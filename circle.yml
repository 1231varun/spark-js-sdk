machine:
  node:
    version: 4

dependencies:
  cache_directories:
    - node_modules
    - packages/*/node_modules
    - $HOME/spark-js-sdk--test-users
  pre:
    - ls spark-js-sdk--test-users 2&>1 || git clone git@github.com:ianwremmel/spark-js-sdk--test-users.git:
        pwd: ../
    - git checkout v0.3.4:
        pwd: ../spark-js-sdk--test-users
    - npm link:
        pwd: ../spark-js-sdk--test-users
    - npm link spark-js-sdk--test-users
    - npm link spark-js-sdk--test-users:
        pwd: packages/test-helper-test-users
  post:
    - npm run bootstrap

test:
  override:
    - ./node_modules/.bin/grunt --gruntfile Gruntfile.circle.js static-analysis
