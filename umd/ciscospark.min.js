/*! Cisco Spark SDK v1.43.5 */
var CiscoSpark=function(){"use strict";var K="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var Ge=t(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),r={}.hasOwnProperty,Ve=function(e,t){return r.call(e,t)},He=function(e){try{return!!e()}catch(e){return!0}},Je=!He(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),v=t(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),Ye=(v.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),h=function(e){if(!Ye(e))throw TypeError(e+" is not an object!");return e},n=Ge.document,i=Ye(n)&&Ye(n.createElement),o=function(e){return i?n.createElement(e):{}},a=!Je&&!He(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}),$e=function(e,t){if(!Ye(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!Ye(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!Ye(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!Ye(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},u=Object.defineProperty,Ke={f:Je?Object.defineProperty:function(e,t,r){if(h(e),t=$e(t,!0),h(r),a)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},Xe=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ze=Je?function(e,t,r){return Ke.f(e,t,Xe(1,r))}:function(e,t,r){return e[t]=r,e},s=0,c=Math.random(),Qe=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++s+c).toString(36))},b=t(function(e){var o=Qe("src"),t="toString",r=Function[t],a=(""+r).split(t);v.inspectSource=function(e){return r.call(e)},(e.exports=function(e,t,r,n){var i="function"==typeof r;i&&(Ve(r,"name")||Ze(r,"name",t)),e[t]!==r&&(i&&(Ve(r,o)||Ze(r,o,e[t]?""+e[t]:a.join(String(t)))),e===Ge?e[t]=r:n?e[t]?e[t]=r:Ze(e,t,r):(delete e[t],Ze(e,t,r)))})(Function.prototype,t,function(){return"function"==typeof this&&this[o]||r.call(this)})}),l=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},et=function(n,i,e){if(l(n),void 0===i)return n;switch(e){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)}}return function(){return n.apply(i,arguments)}},g="prototype",m=function(e,t,r){var n,i,o,a,u=e&m.F,s=e&m.G,c=e&m.S,l=e&m.P,f=e&m.B,d=s?Ge:c?Ge[t]||(Ge[t]={}):(Ge[t]||{})[g],p=s?v:v[t]||(v[t]={}),h=p[g]||(p[g]={});for(n in s&&(r=t),r)o=((i=!u&&d&&void 0!==d[n])?d:r)[n],a=f&&i?et(o,Ge):l&&"function"==typeof o?et(Function.call,o):o,d&&b(d,n,o,e&m.U),p[n]!=o&&Ze(p,n,a),l&&h[n]!=o&&(h[n]=o)};Ge.core=v,m.F=1,m.G=2,m.S=4,m.P=8,m.B=16,m.W=32,m.U=64,m.R=128;var tt=m,y=t(function(e){var r=Qe("meta"),t=Ke.f,n=0,i=Object.isExtensible||function(){return!0},o=!He(function(){return i(Object.preventExtensions({}))}),a=function(e){t(e,r,{value:{i:"O"+ ++n,w:{}}})},u=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!Ye(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Ve(e,r)){if(!i(e))return"F";if(!t)return"E";a(e)}return e[r].i},getWeak:function(e,t){if(!Ve(e,r)){if(!i(e))return!0;if(!t)return!1;a(e)}return e[r].w},onFreeze:function(e){return o&&u.NEED&&i(e)&&!Ve(e,r)&&a(e),e}}}),f=(y.KEY,y.NEED,y.fastKey,y.getWeak,y.onFreeze,t(function(e){var t="__core-js_shared__",r=Ge[t]||(Ge[t]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:v.version,mode:"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})})),rt=t(function(e){var t=f("wks"),r=Ge.Symbol,n="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=n&&r[e]||(n?r:Qe)("Symbol."+e))}).store=t}),d=Ke.f,p=rt("toStringTag"),q=function(e,t,r){e&&!Ve(e=r?e:e.prototype,p)&&d(e,p,{configurable:!0,value:t})},_={f:rt},w=Ke.f,S=function(e){var t=v.Symbol||(v.Symbol=Ge.Symbol||{});"_"==e.charAt(0)||e in t||w(t,e,{value:_.f(e)})},k={}.toString,E=function(e){return k.call(e).slice(8,-1)},T=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==E(e)?e.split(""):Object(e)},P=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},O=function(e){return T(P(e))},C=Math.ceil,M=Math.floor,nt=function(e){return isNaN(e=+e)?0:(0<e?M:C)(e)},j=Math.min,it=function(e){return 0<e?j(nt(e),9007199254740991):0},x=Math.max,R=Math.min,ot=function(e,t){return(e=nt(e))<0?x(e+t,0):R(e,t)},at=function(u){return function(e,t,r){var n,i=O(e),o=it(i.length),a=ot(r,o);if(u&&t!=t){for(;a<o;)if((n=i[a++])!=n)return!0}else for(;a<o;a++)if((u||a in i)&&i[a]===t)return u||a||0;return!u&&-1}},A=f("keys"),I=function(e){return A[e]||(A[e]=Qe(e))},D=at(!1),L=I("IE_PROTO"),F=function(e,t){var r,n=O(e),i=0,o=[];for(r in n)r!=L&&Ve(n,r)&&o.push(r);for(;t.length>i;)Ve(n,r=t[i++])&&(~D(o,r)||o.push(r));return o},N="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),U=Object.keys||function(e){return F(e,N)},z={f:Object.getOwnPropertySymbols},B={f:{}.propertyIsEnumerable},W=Array.isArray||function(e){return"Array"==E(e)},G=Je?Object.defineProperties:function(e,t){h(e);for(var r,n=U(t),i=n.length,o=0;o<i;)Ke.f(e,r=n[o++],t[r]);return e},V=Ge.document,H=V&&V.documentElement,J=I("IE_PROTO"),Y=function(){},$="prototype",X=function(){var e,t=o("iframe"),r=N.length;for(t.style.display="none",H.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),X=e.F;r--;)delete X[$][N[r]];return X()},ut=Object.create||function(e,t){var r;return null!==e?(Y[$]=h(e),r=new Y,Y[$]=null,r[J]=e):r=X(),void 0===t?r:G(r,t)},Z=N.concat("length","prototype"),st={f:Object.getOwnPropertyNames||function(e){return F(e,Z)}},Q=st.f,ee={}.toString,te="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],re={f:function(e){return te&&"[object Window]"==ee.call(e)?function(e){try{return Q(e)}catch(e){return te.slice()}}(e):Q(O(e))}},ne=Object.getOwnPropertyDescriptor,ct={f:Je?ne:function(e,t){if(e=O(e),t=$e(t,!0),a)try{return ne(e,t)}catch(e){}if(Ve(e,t))return Xe(!B.f.call(e,t),e[t])}},ie=y.KEY,oe=ct.f,ae=Ke.f,ue=re.f,se=Ge.Symbol,ce=Ge.JSON,le=ce&&ce.stringify,fe="prototype",de=rt("_hidden"),pe=rt("toPrimitive"),he={}.propertyIsEnumerable,ve=f("symbol-registry"),ge=f("symbols"),me=f("op-symbols"),ye=Object[fe],be="function"==typeof se,_e=Ge.QObject,we=!_e||!_e[fe]||!_e[fe].findChild,Se=Je&&He(function(){return 7!=ut(ae({},"a",{get:function(){return ae(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=oe(ye,t);n&&delete ye[t],ae(e,t,r),n&&e!==ye&&ae(ye,t,n)}:ae,ke=function(e){var t=ge[e]=ut(se[fe]);return t._k=e,t},Ee=be&&"symbol"==typeof se.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof se},Te=function(e,t,r){return e===ye&&Te(me,t,r),h(e),t=$e(t,!0),h(r),Ve(ge,t)?(r.enumerable?(Ve(e,de)&&e[de][t]&&(e[de][t]=!1),r=ut(r,{enumerable:Xe(0,!1)})):(Ve(e,de)||ae(e,de,Xe(1,{})),e[de][t]=!0),Se(e,t,r)):ae(e,t,r)},Pe=function(e,t){h(e);for(var r,n=function(e){var t=U(e),r=z.f;if(r)for(var n,i=r(e),o=B.f,a=0;i.length>a;)o.call(e,n=i[a++])&&t.push(n);return t}(t=O(t)),i=0,o=n.length;i<o;)Te(e,r=n[i++],t[r]);return e},Oe=function(e){var t=he.call(this,e=$e(e,!0));return!(this===ye&&Ve(ge,e)&&!Ve(me,e))&&(!(t||!Ve(this,e)||!Ve(ge,e)||Ve(this,de)&&this[de][e])||t)},Ce=function(e,t){if(e=O(e),t=$e(t,!0),e!==ye||!Ve(ge,t)||Ve(me,t)){var r=oe(e,t);return!r||!Ve(ge,t)||Ve(e,de)&&e[de][t]||(r.enumerable=!0),r}},Me=function(e){for(var t,r=ue(O(e)),n=[],i=0;r.length>i;)Ve(ge,t=r[i++])||t==de||t==ie||n.push(t);return n},je=function(e){for(var t,r=e===ye,n=ue(r?me:O(e)),i=[],o=0;n.length>o;)!Ve(ge,t=n[o++])||r&&!Ve(ye,t)||i.push(ge[t]);return i};be||(b((se=function(){if(this instanceof se)throw TypeError("Symbol is not a constructor!");var t=Qe(0<arguments.length?arguments[0]:void 0),r=function(e){this===ye&&r.call(me,e),Ve(this,de)&&Ve(this[de],t)&&(this[de][t]=!1),Se(this,t,Xe(1,e))};return Je&&we&&Se(ye,t,{configurable:!0,set:r}),ke(t)})[fe],"toString",function(){return this._k}),ct.f=Ce,Ke.f=Te,st.f=re.f=Me,B.f=Oe,z.f=je,Je&&b(ye,"propertyIsEnumerable",Oe,!0),_.f=function(e){return ke(rt(e))}),tt(tt.G+tt.W+tt.F*!be,{Symbol:se});for(var xe="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Re=0;xe.length>Re;)rt(xe[Re++]);for(var Ae=U(rt.store),Ie=0;Ae.length>Ie;)S(Ae[Ie++]);tt(tt.S+tt.F*!be,"Symbol",{for:function(e){return Ve(ve,e+="")?ve[e]:ve[e]=se(e)},keyFor:function(e){if(!Ee(e))throw TypeError(e+" is not a symbol!");for(var t in ve)if(ve[t]===e)return t},useSetter:function(){we=!0},useSimple:function(){we=!1}}),tt(tt.S+tt.F*!be,"Object",{create:function(e,t){return void 0===t?ut(e):Pe(ut(e),t)},defineProperty:Te,defineProperties:Pe,getOwnPropertyDescriptor:Ce,getOwnPropertyNames:Me,getOwnPropertySymbols:je}),ce&&tt(tt.S+tt.F*(!be||He(function(){var e=se();return"[null]"!=le([e])||"{}"!=le({a:e})||"{}"!=le(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(Ye(t)||void 0!==e)&&!Ee(e))return W(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Ee(t))return t}),n[1]=t,le.apply(ce,n)}}),se[fe][pe]||Ze(se[fe],pe,se[fe].valueOf),q(se,"Symbol"),q(Math,"Math",!0),q(Ge.JSON,"JSON",!0),tt(tt.S,"Object",{create:ut}),tt(tt.S+tt.F*!Je,"Object",{defineProperty:Ke.f}),tt(tt.S+tt.F*!Je,"Object",{defineProperties:G});var De=function(e,t){var r=(v.Object||{})[e]||Object[e],n={};n[e]=t(r),tt(tt.S+tt.F*He(function(){r(1)}),"Object",n)},Le=ct.f;De("getOwnPropertyDescriptor",function(){return function(e,t){return Le(O(e),t)}});var lt=function(e){return Object(P(e))},Fe=I("IE_PROTO"),Ne=Object.prototype,ft=Object.getPrototypeOf||function(e){return e=lt(e),Ve(e,Fe)?e[Fe]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ne:null};De("getPrototypeOf",function(){return function(e){return ft(lt(e))}}),De("keys",function(){return function(e){return U(lt(e))}}),De("getOwnPropertyNames",function(){return re.f});var Ue=y.onFreeze;De("freeze",function(t){return function(e){return t&&Ye(e)?t(Ue(e)):e}});var ze=y.onFreeze;De("seal",function(t){return function(e){return t&&Ye(e)?t(ze(e)):e}});var qe=y.onFreeze;De("preventExtensions",function(t){return function(e){return t&&Ye(e)?t(qe(e)):e}}),De("isFrozen",function(t){return function(e){return!Ye(e)||!!t&&t(e)}}),De("isSealed",function(t){return function(e){return!Ye(e)||!!t&&t(e)}}),De("isExtensible",function(t){return function(e){return!!Ye(e)&&(!t||t(e))}});var Be=Object.assign,We=!Be||He(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=Be({},e)[r]||Object.keys(Be({},t)).join("")!=n})?function(e,t){for(var r=lt(e),n=arguments.length,i=1,o=z.f,a=B.f;i<n;)for(var u,s=T(arguments[i++]),c=o?U(s).concat(o(s)):U(s),l=c.length,f=0;f<l;)a.call(s,u=c[f++])&&(r[u]=s[u]);return r}:Be;tt(tt.S+tt.F,"Object",{assign:We});var dt=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};tt(tt.S,"Object",{is:dt});var pt=function(e,t){if(h(e),!Ye(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},ht={set:Object.setPrototypeOf||("__proto__"in{}?function(e,r,n){try{(n=et(Function.call,ct.f(Object.prototype,"__proto__").set,2))(e,[]),r=!(e instanceof Array)}catch(e){r=!0}return function(e,t){return pt(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:pt};tt(tt.S,"Object",{setPrototypeOf:ht.set});var vt=rt("toStringTag"),gt="Arguments"==E(function(){return arguments}()),mt=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),vt))?r:gt?E(t):"Object"==(n=E(t))&&"function"==typeof t.callee?"Arguments":n},yt={};yt[rt("toStringTag")]="z",yt+""!="[object z]"&&b(Object.prototype,"toString",function(){return"[object "+mt(this)+"]"},!0);var bt=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},_t=[].slice,wt={},St=Function.bind||function(t){var r=l(this),n=_t.call(arguments,1),i=function(){var e=n.concat(_t.call(arguments));return this instanceof i?function(e,t,r){if(!(t in wt)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";wt[t]=Function("F,a","return new F("+n.join(",")+")")}return wt[t](e,r)}(r,e.length,e):bt(r,e,t)};return Ye(r.prototype)&&(i.prototype=r.prototype),i};tt(tt.P,"Function",{bind:St});var kt=Ke.f,Et=Function.prototype,Tt=/^\s*function ([^ (]*)/;"name"in Et||Je&&kt(Et,"name",{configurable:!0,get:function(){try{return(""+this).match(Tt)[1]}catch(e){return""}}});var Pt=rt("hasInstance"),Ot=Function.prototype;Pt in Ot||Ke.f(Ot,Pt,{value:function(e){if("function"!=typeof this||!Ye(e))return!1;if(!Ye(this.prototype))return e instanceof this;for(;e=ft(e);)if(this.prototype===e)return!0;return!1}});var Ct="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",Mt="["+Ct+"]",jt=RegExp("^"+Mt+Mt+"*"),xt=RegExp(Mt+Mt+"*$"),Rt=function(e,t,r){var n={},i=He(function(){return!!Ct[e]()||"âÂ"!="âÂ"[e]()}),o=n[e]=i?t(At):Ct[e];r&&(n[r]=o),tt(tt.P+tt.F*i,"String",n)},At=Rt.trim=function(e,t){return e=String(P(e)),1&t&&(e=e.replace(jt,"")),2&t&&(e=e.replace(xt,"")),e},It=Rt,Dt=Ge.parseInt,Lt=It.trim,Ft=/^[-+]?0[xX]/,Nt=8!==Dt(Ct+"08")||22!==Dt(Ct+"0x16")?function(e,t){var r=Lt(String(e),3);return Dt(r,t>>>0||(Ft.test(r)?16:10))}:Dt;tt(tt.G+tt.F*(parseInt!=Nt),{parseInt:Nt});var Ut=Ge.parseFloat,zt=It.trim,qt=1/Ut(Ct+"-0")!=-1/0?function(e){var t=zt(String(e),3),r=Ut(t);return 0===r&&"-"==t.charAt(0)?-0:r}:Ut;tt(tt.G+tt.F*(parseFloat!=qt),{parseFloat:qt});var Bt=ht.set,Wt=function(e,t,r){var n,i=t.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&Ye(n)&&Bt&&Bt(e,n),e},Gt=st.f,Vt=ct.f,Ht=Ke.f,Jt=It.trim,Yt="Number",$t=Ge[Yt],Kt=$t,Xt=$t.prototype,Zt=E(ut(Xt))==Yt,Qt="trim"in String.prototype,er=function(e){var t=$e(e,!1);if("string"==typeof t&&2<t.length){var r,n,i,o=(t=Qt?t.trim():Jt(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var a,u=t.slice(2),s=0,c=u.length;s<c;s++)if((a=u.charCodeAt(s))<48||i<a)return NaN;return parseInt(u,n)}}return+t};if(!$t(" 0o1")||!$t("0b1")||$t("+0x1")){$t=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof $t&&(Zt?He(function(){Xt.valueOf.call(r)}):E(r)!=Yt)?Wt(new Kt(er(t)),r,$t):er(t)};for(var tr,rr=Je?Gt(Kt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),nr=0;rr.length>nr;nr++)Ve(Kt,tr=rr[nr])&&!Ve($t,tr)&&Ht($t,tr,Vt(Kt,tr));($t.prototype=Xt).constructor=$t,b(Ge,Yt,$t)}var ir=function(e,t){if("number"!=typeof e&&"Number"!=E(e))throw TypeError(t);return+e},or=function(e){var t=String(P(this)),r="",n=nt(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;0<n;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r},ar=1..toFixed,ur=Math.floor,sr=[0,0,0,0,0,0],cr="Number.toFixed: incorrect invocation!",lr=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*sr[r],sr[r]=n%1e7,n=ur(n/1e7)},fr=function(e){for(var t=6,r=0;0<=--t;)r+=sr[t],sr[t]=ur(r/e),r=r%e*1e7},dr=function(){for(var e=6,t="";0<=--e;)if(""!==t||0===e||0!==sr[e]){var r=String(sr[e]);t=""===t?r:t+or.call("0",7-r.length)+r}return t},pr=function(e,t,r){return 0===t?r:t%2==1?pr(e,t-1,r*e):pr(e*e,t/2,r)};tt(tt.P+tt.F*(!!ar&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!He(function(){ar.call({})})),"Number",{toFixed:function(e){var t,r,n,i,o=ir(this,cr),a=nt(e),u="",s="0";if(a<0||20<a)throw RangeError(cr);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(u="-",o=-o),1e-21<o)if(r=(t=function(e){for(var t=0,r=e;4096<=r;)t+=12,r/=4096;for(;2<=r;)t+=1,r/=2;return t}(o*pr(2,69,1))-69)<0?o*pr(2,-t,1):o/pr(2,t,1),r*=4503599627370496,0<(t=52-t)){for(lr(0,r),n=a;7<=n;)lr(1e7,0),n-=7;for(lr(pr(10,n,1),0),n=t-1;23<=n;)fr(1<<23),n-=23;fr(1<<n),lr(1,1),fr(2),s=dr()}else lr(0,r),lr(1<<-t,0),s=dr()+or.call("0",a);return s=0<a?u+((i=s.length)<=a?"0."+or.call("0",a-i)+s:s.slice(0,i-a)+"."+s.slice(i-a)):u+s}});var hr=1..toPrecision;tt(tt.P+tt.F*(He(function(){return"1"!==hr.call(1,void 0)})||!He(function(){hr.call({})})),"Number",{toPrecision:function(e){var t=ir(this,"Number#toPrecision: incorrect invocation!");return void 0===e?hr.call(t):hr.call(t,e)}}),tt(tt.S,"Number",{EPSILON:Math.pow(2,-52)});var vr=Ge.isFinite;tt(tt.S,"Number",{isFinite:function(e){return"number"==typeof e&&vr(e)}});var gr=Math.floor,mr=function(e){return!Ye(e)&&isFinite(e)&&gr(e)===e};tt(tt.S,"Number",{isInteger:mr}),tt(tt.S,"Number",{isNaN:function(e){return e!=e}});var yr=Math.abs;tt(tt.S,"Number",{isSafeInteger:function(e){return mr(e)&&yr(e)<=9007199254740991}}),tt(tt.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),tt(tt.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),tt(tt.S+tt.F*(Number.parseFloat!=qt),"Number",{parseFloat:qt}),tt(tt.S+tt.F*(Number.parseInt!=Nt),"Number",{parseInt:Nt});var br=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)},_r=Math.sqrt,wr=Math.acosh;tt(tt.S+tt.F*!(wr&&710==Math.floor(wr(Number.MAX_VALUE))&&wr(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:br(e-1+_r(e-1)*_r(e+1))}});var Sr=Math.asinh;tt(tt.S+tt.F*!(Sr&&0<1/Sr(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}});var kr=Math.atanh;tt(tt.S+tt.F*!(kr&&1/kr(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}});var Er=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1};tt(tt.S,"Math",{cbrt:function(e){return Er(e=+e)*Math.pow(Math.abs(e),1/3)}}),tt(tt.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}});var Tr=Math.exp;tt(tt.S,"Math",{cosh:function(e){return(Tr(e=+e)+Tr(-e))/2}});var Pr=Math.expm1,Or=!Pr||22025.465794806718<Pr(10)||Pr(10)<22025.465794806718||-2e-17!=Pr(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:Pr;tt(tt.S+tt.F*(Or!=Math.expm1),"Math",{expm1:Or});var Cr=Math.pow,Mr=Cr(2,-52),jr=Cr(2,-23),xr=Cr(2,127)*(2-jr),Rr=Cr(2,-126),Ar=Math.fround||function(e){var t,r,n=Math.abs(e),i=Er(e);return n<Rr?i*(n/Rr/jr+1/Mr-1/Mr)*Rr*jr:xr<(r=(t=(1+jr/Mr)*n)-(t-n))||r!=r?i*(1/0):i*r};tt(tt.S,"Math",{fround:Ar});var Ir=Math.abs;tt(tt.S,"Math",{hypot:function(e,t){for(var r,n,i=0,o=0,a=arguments.length,u=0;o<a;)u<(r=Ir(arguments[o++]))?(i=i*(n=u/r)*n+1,u=r):i+=0<r?(n=r/u)*n:r;return u===1/0?1/0:u*Math.sqrt(i)}});var Dr=Math.imul;tt(tt.S+tt.F*He(function(){return-5!=Dr(4294967295,5)||2!=Dr.length}),"Math",{imul:function(e,t){var r=65535,n=+e,i=+t,o=r&n,a=r&i;return 0|o*a+((r&n>>>16)*a+o*(r&i>>>16)<<16>>>0)}}),tt(tt.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}}),tt(tt.S,"Math",{log1p:br}),tt(tt.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}}),tt(tt.S,"Math",{sign:Er});var Lr=Math.exp;tt(tt.S+tt.F*He(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(Or(e)-Or(-e))/2:(Lr(e-1)-Lr(-e-1))*(Math.E/2)}});var Fr=Math.exp;tt(tt.S,"Math",{tanh:function(e){var t=Or(e=+e),r=Or(-e);return t==1/0?1:r==1/0?-1:(t-r)/(Fr(e)+Fr(-e))}}),tt(tt.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}});var Nr=String.fromCharCode,Ur=String.fromCodePoint;tt(tt.S+tt.F*(!!Ur&&1!=Ur.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,i=0;i<n;){if(t=+arguments[i++],ot(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?Nr(t):Nr(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}}),tt(tt.S,"String",{raw:function(e){for(var t=O(e.raw),r=it(t.length),n=arguments.length,i=[],o=0;o<r;)i.push(String(t[o++])),o<n&&i.push(String(arguments[o]));return i.join("")}}),It("trim",function(e){return function(){return e(this,3)}});var zr=function(u){return function(e,t){var r,n,i=String(P(e)),o=nt(t),a=i.length;return o<0||a<=o?u?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===a||(n=i.charCodeAt(o+1))<56320||57343<n?u?i.charAt(o):r:u?i.slice(o,o+2):n-56320+(r-55296<<10)+65536}},qr={},Br={};Ze(Br,rt("iterator"),function(){return this});var Wr=function(e,t,r){e.prototype=ut(Br,{next:Xe(1,r)}),q(e,t+" Iterator")},Gr=rt("iterator"),Vr=!([].keys&&"next"in[].keys()),Hr="values",Jr=function(){return this},Yr=function(e,t,r,n,i,o,a){Wr(r,t,n);var u,s,c,l=function(e){if(!Vr&&e in h)return h[e];switch(e){case"keys":case Hr:return function(){return new r(this,e)}}return function(){return new r(this,e)}},f=t+" Iterator",d=i==Hr,p=!1,h=e.prototype,v=h[Gr]||h["@@iterator"]||i&&h[i],g=v||l(i),m=i?d?l("entries"):g:void 0,y="Array"==t&&h.entries||v;if(y&&(c=ft(y.call(new e)))!==Object.prototype&&c.next&&(q(c,f,!0),"function"!=typeof c[Gr]&&Ze(c,Gr,Jr)),d&&v&&v.name!==Hr&&(p=!0,g=function(){return v.call(this)}),(Vr||p||!h[Gr])&&Ze(h,Gr,g),qr[t]=g,qr[f]=Jr,i)if(u={values:d?g:l(Hr),keys:o?g:l("keys"),entries:m},a)for(s in u)s in h||b(h,s,u[s]);else tt(tt.P+tt.F*(Vr||p),t,u);return u},$r=zr(!0);Yr(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=$r(t,r),this._i+=e.length,{value:e,done:!1})});var Kr=zr(!1);tt(tt.P,"String",{codePointAt:function(e){return Kr(this,e)}});var Xr=rt("match"),Zr=function(e){var t;return Ye(e)&&(void 0!==(t=e[Xr])?!!t:"RegExp"==E(e))},Qr=function(e,t,r){if(Zr(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(P(e))},en=rt("match"),tn=function(t){var r=/./;try{"/./"[t](r)}catch(e){try{return r[en]=!1,!"/./"[t](r)}catch(e){}}return!0},rn="endsWith",nn=""[rn];tt(tt.P+tt.F*tn(rn),"String",{endsWith:function(e){var t=Qr(this,e,rn),r=1<arguments.length?arguments[1]:void 0,n=it(t.length),i=void 0===r?n:Math.min(it(r),n),o=String(e);return nn?nn.call(t,o,i):t.slice(i-o.length,i)===o}});var on="includes";tt(tt.P+tt.F*tn(on),"String",{includes:function(e){return!!~Qr(this,e,on).indexOf(e,1<arguments.length?arguments[1]:void 0)}}),tt(tt.P,"String",{repeat:or});var an="startsWith",un=""[an];tt(tt.P+tt.F*tn(an),"String",{startsWith:function(e){var t=Qr(this,e,an),r=it(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),n=String(e);return un?un.call(t,n,r):t.slice(r,r+n.length)===n}});var sn=/"/g,cn=function(e,t,r,n){var i=String(P(e)),o="<"+t;return""!==r&&(o+=" "+r+'="'+String(n).replace(sn,"&quot;")+'"'),o+">"+i+"</"+t+">"},ln=function(t,e){var r={};r[t]=e(cn),tt(tt.P+tt.F*He(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}),"String",r)};ln("anchor",function(t){return function(e){return t(this,"a","name",e)}}),ln("big",function(e){return function(){return e(this,"big","","")}}),ln("blink",function(e){return function(){return e(this,"blink","","")}}),ln("bold",function(e){return function(){return e(this,"b","","")}}),ln("fixed",function(e){return function(){return e(this,"tt","","")}}),ln("fontcolor",function(t){return function(e){return t(this,"font","color",e)}}),ln("fontsize",function(t){return function(e){return t(this,"font","size",e)}}),ln("italics",function(e){return function(){return e(this,"i","","")}}),ln("link",function(t){return function(e){return t(this,"a","href",e)}}),ln("small",function(e){return function(){return e(this,"small","","")}}),ln("strike",function(e){return function(){return e(this,"strike","","")}}),ln("sub",function(e){return function(){return e(this,"sub","","")}}),ln("sup",function(e){return function(){return e(this,"sup","","")}}),tt(tt.S,"Date",{now:function(){return(new Date).getTime()}}),tt(tt.P+tt.F*He(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=lt(this),r=$e(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}});var fn=Date.prototype.getTime,dn=Date.prototype.toISOString,pn=function(e){return 9<e?e:"0"+e},hn=He(function(){return"0385-07-25T07:06:39.999Z"!=dn.call(new Date(-5e13-1))})||!He(function(){dn.call(new Date(NaN))})?function(){if(!isFinite(fn.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),r=e<0?"-":9999<e?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+pn(this.getUTCMonth()+1)+"-"+pn(this.getUTCDate())+"T"+pn(this.getUTCHours())+":"+pn(this.getUTCMinutes())+":"+pn(this.getUTCSeconds())+"."+(99<t?t:"0"+pn(t))+"Z"}:dn;tt(tt.P+tt.F*(Date.prototype.toISOString!==hn),"Date",{toISOString:hn});var vn=Date.prototype,gn="Invalid Date",mn="toString",yn=vn[mn],bn=vn.getTime;new Date(NaN)+""!=gn&&b(vn,mn,function(){var e=bn.call(this);return e==e?yn.call(this):gn});var _n=rt("toPrimitive"),wn=Date.prototype;_n in wn||Ze(wn,_n,function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return $e(h(this),"number"!=e)}),tt(tt.S,"Array",{isArray:W});var Sn=function(t,e,r,n){try{return n?e(h(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&h(i.call(t)),e}},kn=rt("iterator"),En=Array.prototype,Tn=function(e){return void 0!==e&&(qr.Array===e||En[kn]===e)},Pn=function(e,t,r){t in e?Ke.f(e,t,Xe(0,r)):e[t]=r},On=rt("iterator"),Cn=v.getIteratorMethod=function(e){if(null!=e)return e[On]||e["@@iterator"]||qr[mt(e)]},Mn=rt("iterator"),jn=!1;try{[7][Mn]().return=function(){jn=!0}}catch(e){}var xn=function(e,t){if(!t&&!jn)return!1;var r=!1;try{var n=[7],i=n[Mn]();i.next=function(){return{done:r=!0}},n[Mn]=function(){return i},e(n)}catch(e){}return r};tt(tt.S+tt.F*!xn(function(e){}),"Array",{from:function(e){var t,r,n,i,o=lt(e),a="function"==typeof this?this:Array,u=arguments.length,s=1<u?arguments[1]:void 0,c=void 0!==s,l=0,f=Cn(o);if(c&&(s=et(s,2<u?arguments[2]:void 0,2)),null==f||a==Array&&Tn(f))for(r=new a(t=it(o.length));l<t;l++)Pn(r,l,c?s(o[l],l):o[l]);else for(i=f.call(o),r=new a;!(n=i.next()).done;l++)Pn(r,l,c?Sn(i,s,[n.value,l],!0):n.value);return r.length=l,r}}),tt(tt.S+tt.F*He(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);e<t;)Pn(r,e,arguments[e++]);return r.length=t,r}});var Rn=function(e,t){return!!e&&He(function(){t?e.call(null,function(){},1):e.call(null)})},An=[].join;tt(tt.P+tt.F*(T!=Object||!Rn(An)),"Array",{join:function(e){return An.call(O(this),void 0===e?",":e)}});var In=[].slice;tt(tt.P+tt.F*He(function(){H&&In.call(H)}),"Array",{slice:function(e,t){var r=it(this.length),n=E(this);if(t=void 0===t?r:t,"Array"==n)return In.call(this,e,t);for(var i=ot(e,r),o=ot(t,r),a=it(o-i),u=new Array(a),s=0;s<a;s++)u[s]="String"==n?this.charAt(i+s):this[i+s];return u}});var Dn=[].sort,Ln=[1,2,3];tt(tt.P+tt.F*(He(function(){Ln.sort(void 0)})||!He(function(){Ln.sort(null)})||!Rn(Dn)),"Array",{sort:function(e){return void 0===e?Dn.call(lt(this)):Dn.call(lt(this),l(e))}});var Fn=rt("species"),Nn=function(e,t){return W(r=e)&&("function"!=typeof(n=r.constructor)||n!==Array&&!W(n.prototype)||(n=void 0),Ye(n)&&null===(n=n[Fn])&&(n=void 0)),new(void 0===n?Array:n)(t);var r,n},Un=function(f,e){var d=1==f,p=2==f,h=3==f,v=4==f,g=6==f,m=5==f||g,y=e||Nn;return function(e,t,r){for(var n,i,o=lt(e),a=T(o),u=et(t,r,3),s=it(a.length),c=0,l=d?y(e,s):p?y(e,0):void 0;c<s;c++)if((m||c in a)&&(i=u(n=a[c],c,o),f))if(d)l[c]=i;else if(i)switch(f){case 3:return!0;case 5:return n;case 6:return c;case 2:l.push(n)}else if(v)return!1;return g?-1:h||v?v:l}},zn=Un(0),qn=Rn([].forEach,!0);tt(tt.P+tt.F*!qn,"Array",{forEach:function(e){return zn(this,e,arguments[1])}});var Bn=Un(1);tt(tt.P+tt.F*!Rn([].map,!0),"Array",{map:function(e){return Bn(this,e,arguments[1])}});var Wn=Un(2);tt(tt.P+tt.F*!Rn([].filter,!0),"Array",{filter:function(e){return Wn(this,e,arguments[1])}});var Gn=Un(3);tt(tt.P+tt.F*!Rn([].some,!0),"Array",{some:function(e){return Gn(this,e,arguments[1])}});var Vn=Un(4);tt(tt.P+tt.F*!Rn([].every,!0),"Array",{every:function(e){return Vn(this,e,arguments[1])}});var Hn=function(e,t,r,n,i){l(t);var o=lt(e),a=T(o),u=it(o.length),s=i?u-1:0,c=i?-1:1;if(r<2)for(;;){if(s in a){n=a[s],s+=c;break}if(s+=c,i?s<0:u<=s)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=s:s<u;s+=c)s in a&&(n=t(n,a[s],s,o));return n};tt(tt.P+tt.F*!Rn([].reduce,!0),"Array",{reduce:function(e){return Hn(this,e,arguments.length,arguments[1],!1)}}),tt(tt.P+tt.F*!Rn([].reduceRight,!0),"Array",{reduceRight:function(e){return Hn(this,e,arguments.length,arguments[1],!0)}});var Jn=at(!1),Yn=[].indexOf,$n=!!Yn&&1/[1].indexOf(1,-0)<0;tt(tt.P+tt.F*($n||!Rn(Yn)),"Array",{indexOf:function(e){return $n?Yn.apply(this,arguments)||0:Jn(this,e,arguments[1])}});var Kn=[].lastIndexOf,Xn=!!Kn&&1/[1].lastIndexOf(1,-0)<0;tt(tt.P+tt.F*(Xn||!Rn(Kn)),"Array",{lastIndexOf:function(e){if(Xn)return Kn.apply(this,arguments)||0;var t=O(this),r=it(t.length),n=r-1;for(1<arguments.length&&(n=Math.min(n,nt(arguments[1]))),n<0&&(n=r+n);0<=n;n--)if(n in t&&t[n]===e)return n||0;return-1}});var Zn=[].copyWithin||function(e,t){var r=lt(this),n=it(r.length),i=ot(e,n),o=ot(t,n),a=2<arguments.length?arguments[2]:void 0,u=Math.min((void 0===a?n:ot(a,n))-o,n-i),s=1;for(o<i&&i<o+u&&(s=-1,o+=u-1,i+=u-1);0<u--;)o in r?r[i]=r[o]:delete r[i],i+=s,o+=s;return r},Qn=rt("unscopables"),ei=Array.prototype;null==ei[Qn]&&Ze(ei,Qn,{});var ti=function(e){ei[Qn][e]=!0};tt(tt.P,"Array",{copyWithin:Zn}),ti("copyWithin");var ri=function(e){for(var t=lt(this),r=it(t.length),n=arguments.length,i=ot(1<n?arguments[1]:void 0,r),o=2<n?arguments[2]:void 0,a=void 0===o?r:ot(o,r);i<a;)t[i++]=e;return t};tt(tt.P,"Array",{fill:ri}),ti("fill");var ni=Un(5),ii="find",oi=!0;ii in[]&&Array(1)[ii](function(){oi=!1}),tt(tt.P+tt.F*oi,"Array",{find:function(e){return ni(this,e,1<arguments.length?arguments[1]:void 0)}}),ti(ii);var ai=Un(6),ui="findIndex",si=!0;ui in[]&&Array(1)[ui](function(){si=!1}),tt(tt.P+tt.F*si,"Array",{findIndex:function(e){return ai(this,e,1<arguments.length?arguments[1]:void 0)}}),ti(ui);var ci=rt("species"),li=function(e){var t=Ge[e];Je&&t&&!t[ci]&&Ke.f(t,ci,{configurable:!0,get:function(){return this}})};li("Array");var fi=function(e,t){return{value:t,done:!!e}},di=Yr(Array,"Array",function(e,t){this._t=O(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,fi(1)):fi(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");qr.Arguments=qr.Array,ti("keys"),ti("values"),ti("entries");var pi=function(){var e=h(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},hi=Ke.f,vi=st.f,gi=Ge.RegExp,mi=gi,yi=gi.prototype,bi=/a/g,_i=/a/g,wi=new gi(bi)!==bi;if(Je&&(!wi||He(function(){return _i[rt("match")]=!1,gi(bi)!=bi||gi(_i)==_i||"/a/i"!=gi(bi,"i")}))){gi=function(e,t){var r=this instanceof gi,n=Zr(e),i=void 0===t;return!r&&n&&e.constructor===gi&&i?e:Wt(wi?new mi(n&&!i?e.source:e,t):mi((n=e instanceof gi)?e.source:e,n&&i?pi.call(e):t),r?this:yi,gi)};for(var Si=function(t){t in gi||hi(gi,t,{configurable:!0,get:function(){return mi[t]},set:function(e){mi[t]=e}})},ki=vi(mi),Ei=0;ki.length>Ei;)Si(ki[Ei++]);(yi.constructor=gi).prototype=yi,b(Ge,"RegExp",gi)}li("RegExp"),Je&&"g"!=/./g.flags&&Ke.f(RegExp.prototype,"flags",{configurable:!0,get:pi});var Ti="toString",Pi=/./[Ti],Oi=function(e){b(RegExp.prototype,Ti,e,!0)};He(function(){return"/a/b"!=Pi.call({source:"a",flags:"b"})})?Oi(function(){var e=h(this);return"/".concat(e.source,"/","flags"in e?e.flags:!Je&&e instanceof RegExp?pi.call(e):void 0)}):Pi.name!=Ti&&Oi(function(){return Pi.call(this)});var Ci=function(t,e,r){var n=rt(t),i=r(P,n,""[t]),o=i[0],a=i[1];He(function(){var e={};return e[n]=function(){return 7},7!=""[t](e)})&&(b(String.prototype,t,o),Ze(RegExp.prototype,n,2==e?function(e,t){return a.call(e,this,t)}:function(e){return a.call(e,this)}))};Ci("match",1,function(n,i,e){return[function(e){var t=n(this),r=null==e?void 0:e[i];return void 0!==r?r.call(e,t):new RegExp(e)[i](String(t))},e]}),Ci("replace",2,function(i,o,a){return[function(e,t){var r=i(this),n=null==e?void 0:e[o];return void 0!==n?n.call(e,r,t):a.call(String(r),e,t)},a]}),Ci("search",1,function(n,i,e){return[function(e){var t=n(this),r=null==e?void 0:e[i];return void 0!==r?r.call(e,t):new RegExp(e)[i](String(t))},e]}),Ci("split",2,function(i,o,a){var p=Zr,h=a,v=[].push,e="split",g="length";if("c"=="abbc"[e](/(b)*/)[1]||4!="test"[e](/(?:)/,-1)[g]||2!="ab"[e](/(?:ab)*/)[g]||4!="."[e](/(.?)(.?)/)[g]||1<"."[e](/()()/)[g]||""[e](/.?/)[g]){var m=void 0===/()??/.exec("")[1];a=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!p(e))return h.call(r,e,t);var n,i,o,a,u,s=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,f=void 0===t?4294967295:t>>>0,d=new RegExp(e.source,c+"g");for(m||(n=new RegExp("^"+d.source+"$(?!\\s)",c));(i=d.exec(r))&&!(l<(o=i.index+i[0][g])&&(s.push(r.slice(l,i.index)),!m&&1<i[g]&&i[0].replace(n,function(){for(u=1;u<arguments[g]-2;u++)void 0===arguments[u]&&(i[u]=void 0)}),1<i[g]&&i.index<r[g]&&v.apply(s,i.slice(1)),a=i[0][g],l=o,s[g]>=f));)d.lastIndex===i.index&&d.lastIndex++;return l===r[g]?!a&&d.test("")||s.push(""):s.push(r.slice(l)),s[g]>f?s.slice(0,f):s}}else"0"[e](void 0,0)[g]&&(a=function(e,t){return void 0===e&&0===t?[]:h.call(this,e,t)});return[function(e,t){var r=i(this),n=null==e?void 0:e[o];return void 0!==n?n.call(e,r,t):a.call(String(r),e,t)},a]});var Mi,ji,xi,Ri=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},Ai=t(function(e){var d={},p={},t=e.exports=function(e,t,r,n,i){var o,a,u,s,c=i?function(){return e}:Cn(e),l=et(r,n,t?2:1),f=0;if("function"!=typeof c)throw TypeError(e+" is not iterable!");if(Tn(c)){for(o=it(e.length);f<o;f++)if((s=t?l(h(a=e[f])[0],a[1]):l(e[f]))===d||s===p)return s}else for(u=c.call(e);!(a=u.next()).done;)if((s=Sn(u,l,a.value,t))===d||s===p)return s};t.BREAK=d,t.RETURN=p}),Ii=rt("species"),Di=function(e,t){var r,n=h(e).constructor;return void 0===n||null==(r=h(n)[Ii])?t:l(r)},Li=Ge.process,Fi=Ge.setImmediate,Ni=Ge.clearImmediate,Ui=Ge.MessageChannel,zi=Ge.Dispatch,qi=0,Bi={},Wi="onreadystatechange",Gi=function(){var e=+this;if(Bi.hasOwnProperty(e)){var t=Bi[e];delete Bi[e],t()}},Vi=function(e){Gi.call(e.data)};Fi&&Ni||(Fi=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return Bi[++qi]=function(){bt("function"==typeof e?e:Function(e),t)},Mi(qi),qi},Ni=function(e){delete Bi[e]},"process"==E(Li)?Mi=function(e){Li.nextTick(et(Gi,e,1))}:zi&&zi.now?Mi=function(e){zi.now(et(Gi,e,1))}:Ui?(xi=(ji=new Ui).port2,ji.port1.onmessage=Vi,Mi=et(xi.postMessage,xi,1)):Ge.addEventListener&&"function"==typeof postMessage&&!Ge.importScripts?(Mi=function(e){Ge.postMessage(e+"","*")},Ge.addEventListener("message",Vi,!1)):Mi=Wi in o("script")?function(e){H.appendChild(o("script"))[Wi]=function(){H.removeChild(this),Gi.call(e)}}:function(e){setTimeout(et(Gi,e,1),0)});var Hi={set:Fi,clear:Ni},Ji=Hi.set,Yi=Ge.MutationObserver||Ge.WebKitMutationObserver,$i=Ge.process,Ki=Ge.Promise,Xi="process"==E($i),Zi=function(){var r,n,i,e=function(){var e,t;for(Xi&&(e=$i.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?i():n=void 0,e}}n=void 0,e&&e.enter()};if(Xi)i=function(){$i.nextTick(e)};else if(!Yi||Ge.navigator&&Ge.navigator.standalone)if(Ki&&Ki.resolve){var t=Ki.resolve(void 0);i=function(){t.then(e)}}else i=function(){Ji.call(Ge,e)};else{var o=!0,a=document.createTextNode("");new Yi(e).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(e){var t={fn:e,next:void 0};n&&(n.next=t),r||(r=t,i()),n=t}};function Qi(e){var r,n;this.promise=new e(function(e,t){if(void 0!==r||void 0!==n)throw TypeError("Bad Promise constructor");r=e,n=t}),this.resolve=l(r),this.reject=l(n)}var eo,to,ro,no,io={f:function(e){return new Qi(e)}},oo=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},ao=Ge.navigator,uo=ao&&ao.userAgent||"",so=function(e,t){if(h(e),Ye(t)&&t.constructor===e)return t;var r=io.f(e);return(0,r.resolve)(t),r.promise},co=function(e,t,r){for(var n in t)b(e,n,t[n],r);return e},lo=Hi.set,fo=Zi(),po="Promise",ho=Ge.TypeError,vo=Ge.process,go=vo&&vo.versions,mo=go&&go.v8||"",yo=Ge[po],bo="process"==mt(vo),_o=function(){},wo=to=io.f,So=!!function(){try{var e=yo.resolve(1),t=(e.constructor={})[rt("species")]=function(e){e(_o,_o)};return(bo||"function"==typeof PromiseRejectionEvent)&&e.then(_o)instanceof t&&0!==mo.indexOf("6.6")&&-1===uo.indexOf("Chrome/66")}catch(e){}}(),ko=function(e){var t;return!(!Ye(e)||"function"!=typeof(t=e.then))&&t},Eo=function(l,r){if(!l._n){l._n=!0;var n=l._c;fo(function(){for(var s=l._v,c=1==l._s,e=0,t=function(e){var t,r,n,i=c?e.ok:e.fail,o=e.resolve,a=e.reject,u=e.domain;try{i?(c||(2==l._h&&Oo(l),l._h=1),!0===i?t=s:(u&&u.enter(),t=i(s),u&&(u.exit(),n=!0)),t===e.promise?a(ho("Promise-chain cycle")):(r=ko(t))?r.call(t,o,a):o(t)):a(s)}catch(e){u&&!n&&u.exit(),a(e)}};n.length>e;)t(n[e++]);l._c=[],l._n=!1,r&&!l._h&&To(l)})}},To=function(o){lo.call(Ge,function(){var e,t,r,n=o._v,i=Po(o);if(i&&(e=oo(function(){bo?vo.emit("unhandledRejection",n,o):(t=Ge.onunhandledrejection)?t({promise:o,reason:n}):(r=Ge.console)&&r.error&&r.error("Unhandled promise rejection",n)}),o._h=bo||Po(o)?2:1),o._a=void 0,i&&e.e)throw e.v})},Po=function(e){return 1!==e._h&&0===(e._a||e._c).length},Oo=function(t){lo.call(Ge,function(){var e;bo?vo.emit("rejectionHandled",t):(e=Ge.onrejectionhandled)&&e({promise:t,reason:t._v})})},Co=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),Eo(t,!0))},Mo=function(e){var r,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw ho("Promise can't be resolved itself");(r=ko(e))?fo(function(){var t={_w:n,_d:!1};try{r.call(e,et(Mo,t,1),et(Co,t,1))}catch(e){Co.call(t,e)}}):(n._v=e,n._s=1,Eo(n,!1))}catch(e){Co.call({_w:n,_d:!1},e)}}};So||(yo=function(e){Ri(this,yo,po,"_h"),l(e),eo.call(this);try{e(et(Mo,this,1),et(Co,this,1))}catch(e){Co.call(this,e)}},(eo=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=co(yo.prototype,{then:function(e,t){var r=wo(Di(this,yo));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=bo?vo.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Eo(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),ro=function(){var e=new eo;this.promise=e,this.resolve=et(Mo,e,1),this.reject=et(Co,e,1)},io.f=wo=function(e){return e===yo||e===no?new ro(e):to(e)}),tt(tt.G+tt.W+tt.F*!So,{Promise:yo}),q(yo,po),li(po),no=v[po],tt(tt.S+tt.F*!So,po,{reject:function(e){var t=wo(this);return(0,t.reject)(e),t.promise}}),tt(tt.S+tt.F*!So,po,{resolve:function(e){return so(this,e)}}),tt(tt.S+tt.F*!(So&&xn(function(e){yo.all(e).catch(_o)})),po,{all:function(e){var a=this,t=wo(a),u=t.resolve,s=t.reject,r=oo(function(){var n=[],i=0,o=1;Ai(e,!1,function(e){var t=i++,r=!1;n.push(void 0),o++,a.resolve(e).then(function(e){r||(r=!0,n[t]=e,--o||u(n))},s)}),--o||u(n)});return r.e&&s(r.v),t.promise},race:function(e){var t=this,r=wo(t),n=r.reject,i=oo(function(){Ai(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}});var jo=function(e,t){if(!Ye(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},xo=Ke.f,Ro=y.fastKey,Ao=Je?"_s":"size",Io=function(e,t){var r,n=Ro(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r},Do={getConstructor:function(e,o,r,n){var i=e(function(e,t){Ri(e,i,o,"_i"),e._t=o,e._i=ut(null),e._f=void 0,e._l=void 0,e[Ao]=0,null!=t&&Ai(t,r,e[n],e)});return co(i.prototype,{clear:function(){for(var e=jo(this,o),t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e._f=e._l=void 0,e[Ao]=0},delete:function(e){var t=jo(this,o),r=Io(t,e);if(r){var n=r.n,i=r.p;delete t._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),t._f==r&&(t._f=n),t._l==r&&(t._l=i),t[Ao]--}return!!r},forEach:function(e){jo(this,o);for(var t,r=et(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!Io(jo(this,o),e)}}),Je&&xo(i.prototype,"size",{get:function(){return jo(this,o)[Ao]}}),i},def:function(e,t,r){var n,i,o=Io(e,t);return o?o.v=r:(e._l=o={i:i=Ro(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[Ao]++,"F"!==i&&(e._i[i]=o)),e},getEntry:Io,setStrong:function(e,r,t){Yr(e,r,function(e,t){this._t=jo(e,r),this._k=t,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?fi(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,fi(1))},t?"entries":"values",!t,!0),li(r)}},Lo=function(n,e,t,r,i,o){var a=Ge[n],u=a,s=i?"set":"add",c=u&&u.prototype,l={},f=function(e){var r=c[e];b(c,e,"delete"==e?function(e){return!(o&&!Ye(e))&&r.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!Ye(e))&&r.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!Ye(e)?void 0:r.call(this,0===e?0:e)}:"add"==e?function(e){return r.call(this,0===e?0:e),this}:function(e,t){return r.call(this,0===e?0:e,t),this})};if("function"==typeof u&&(o||c.forEach&&!He(function(){(new u).entries().next()}))){var d=new u,p=d[s](o?{}:-0,1)!=d,h=He(function(){d.has(1)}),v=xn(function(e){new u(e)}),g=!o&&He(function(){for(var e=new u,t=5;t--;)e[s](t,t);return!e.has(-0)});v||(((u=e(function(e,t){Ri(e,u,n);var r=Wt(new a,e,u);return null!=t&&Ai(t,i,r[s],r),r})).prototype=c).constructor=u),(h||g)&&(f("delete"),f("has"),i&&f("get")),(g||p)&&f(s),o&&c.clear&&delete c.clear}else u=r.getConstructor(e,n,i,s),co(u.prototype,t),y.NEED=!0;return q(u,n),l[n]=u,tt(tt.G+tt.W+tt.F*(u!=a),l),o||r.setStrong(u,n,i),u},Fo=Lo("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=Do.getEntry(jo(this,"Map"),e);return t&&t.v},set:function(e,t){return Do.def(jo(this,"Map"),0===e?0:e,t)}},Do,!0),No=Lo("Set",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return Do.def(jo(this,"Set"),e=0===e?0:e,e)}},Do),Uo=y.getWeak,zo=Un(5),qo=Un(6),Bo=0,Wo=function(e){return e._l||(e._l=new Go)},Go=function(){this.a=[]},Vo=function(e,t){return zo(e.a,function(e){return e[0]===t})};Go.prototype={get:function(e){var t=Vo(this,e);if(t)return t[1]},has:function(e){return!!Vo(this,e)},set:function(e,t){var r=Vo(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(t){var e=qo(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var Ho={getConstructor:function(e,r,n,i){var o=e(function(e,t){Ri(e,o,r,"_i"),e._t=r,e._i=Bo++,e._l=void 0,null!=t&&Ai(t,n,e[i],e)});return co(o.prototype,{delete:function(e){if(!Ye(e))return!1;var t=Uo(e);return!0===t?Wo(jo(this,r)).delete(e):t&&Ve(t,this._i)&&delete t[this._i]},has:function(e){if(!Ye(e))return!1;var t=Uo(e);return!0===t?Wo(jo(this,r)).has(e):t&&Ve(t,this._i)}}),o},def:function(e,t,r){var n=Uo(h(t),!0);return!0===n?Wo(e).set(t,r):n[e._i]=r,e},ufstore:Wo},Jo=t(function(e){var o,t=Un(0),r="WeakMap",n=y.getWeak,a=Object.isExtensible,i=Ho.ufstore,u={},s=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},c={get:function(e){if(Ye(e)){var t=n(e);return!0===t?i(jo(this,r)).get(e):t?t[this._i]:void 0}},set:function(e,t){return Ho.def(jo(this,r),e,t)}},l=e.exports=Lo(r,s,c,Ho,!0,!0);He(function(){return 7!=(new l).set((Object.freeze||Object)(u),7).get(u)})&&(o=Ho.getConstructor(s,r),We(o.prototype,c),y.NEED=!0,t(["delete","has","get","set"],function(n){var e=l.prototype,i=e[n];b(e,n,function(e,t){if(!Ye(e)||a(e))return i.call(this,e,t);this._f||(this._f=new o);var r=this._f[n](e,t);return"set"==n?this:r})}))}),Yo="WeakSet";Lo(Yo,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return Ho.def(jo(this,Yo),e,!0)}},Ho,!1,!0);for(var $o,Ko=Qe("typed_array"),Xo=Qe("view"),Zo=!(!Ge.ArrayBuffer||!Ge.DataView),Qo=Zo,ea=0,ta="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");ea<9;)($o=Ge[ta[ea++]])?(Ze($o.prototype,Ko,!0),Ze($o.prototype,Xo,!0)):Qo=!1;var ra={ABV:Zo,CONSTR:Qo,TYPED:Ko,VIEW:Xo},na=function(e){if(void 0===e)return 0;var t=nt(e),r=it(t);if(t!==r)throw RangeError("Wrong length!");return r},ia=t(function(e,t){var r=st.f,n=Ke.f,i="ArrayBuffer",o="DataView",a="prototype",f="Wrong index!",u=Ge[i],s=Ge[o],c=Ge.Math,d=Ge.RangeError,p=Ge.Infinity,l=u,h=c.abs,v=c.pow,g=c.floor,m=c.log,y=c.LN2,b="byteLength",_="byteOffset",w=Je?"_b":"buffer",S=Je?"_l":b,k=Je?"_o":_;function E(e,t,r){var n,i,o,a=new Array(r),u=8*r-t-1,s=(1<<u)-1,c=s>>1,l=23===t?v(2,-24)-v(2,-77):0,f=0,d=e<0||0===e&&1/e<0?1:0;for((e=h(e))!=e||e===p?(i=e!=e?1:0,n=s):(n=g(m(e)/y),e*(o=v(2,-n))<1&&(n--,o*=2),2<=(e+=1<=n+c?l/o:l*v(2,1-c))*o&&(n++,o/=2),s<=n+c?(i=0,n=s):1<=n+c?(i=(e*o-1)*v(2,t),n+=c):(i=e*v(2,c-1)*v(2,t),n=0));8<=t;a[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,u+=t;0<u;a[f++]=255&n,n/=256,u-=8);return a[--f]|=128*d,a}function T(e,t,r){var n,i=8*r-t-1,o=(1<<i)-1,a=o>>1,u=i-7,s=r-1,c=e[s--],l=127&c;for(c>>=7;0<u;l=256*l+e[s],s--,u-=8);for(n=l&(1<<-u)-1,l>>=-u,u+=t;0<u;n=256*n+e[s],s--,u-=8);if(0===l)l=1-a;else{if(l===o)return n?NaN:c?-p:p;n+=v(2,t),l-=a}return(c?-1:1)*n*v(2,l-t)}function P(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function O(e){return[255&e]}function C(e){return[255&e,e>>8&255]}function M(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function j(e){return E(e,52,8)}function x(e){return E(e,23,4)}function R(e,t,r){n(e[a],t,{get:function(){return this[r]}})}function A(e,t,r,n){var i=na(+r);if(i+t>e[S])throw d(f);var o=e[w]._b,a=i+e[k],u=o.slice(a,a+t);return n?u:u.reverse()}function I(e,t,r,n,i,o){var a=na(+r);if(a+t>e[S])throw d(f);for(var u=e[w]._b,s=a+e[k],c=n(+i),l=0;l<t;l++)u[s+l]=c[o?l:t-l-1]}if(ra.ABV){if(!He(function(){u(1)})||!He(function(){new u(-1)})||He(function(){return new u,new u(1.5),new u(NaN),u.name!=i})){for(var D,L=(u=function(e){return Ri(this,u),new l(na(e))})[a]=l[a],F=r(l),N=0;F.length>N;)(D=F[N++])in u||Ze(u,D,l[D]);L.constructor=u}var U=new s(new u(2)),z=s[a].setInt8;U.setInt8(0,2147483648),U.setInt8(1,2147483649),!U.getInt8(0)&&U.getInt8(1)||co(s[a],{setInt8:function(e,t){z.call(this,e,t<<24>>24)},setUint8:function(e,t){z.call(this,e,t<<24>>24)}},!0)}else u=function(e){Ri(this,u,i);var t=na(e);this._b=ri.call(new Array(t),0),this[S]=t},s=function(e,t,r){Ri(this,s,o),Ri(e,u,o);var n=e[S],i=nt(t);if(i<0||n<i)throw d("Wrong offset!");if(n<i+(r=void 0===r?n-i:it(r)))throw d("Wrong length!");this[w]=e,this[k]=i,this[S]=r},Je&&(R(u,b,"_l"),R(s,"buffer","_b"),R(s,b,"_l"),R(s,_,"_o")),co(s[a],{getInt8:function(e){return A(this,1,e)[0]<<24>>24},getUint8:function(e){return A(this,1,e)[0]},getInt16:function(e){var t=A(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=A(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return P(A(this,4,e,arguments[1]))},getUint32:function(e){return P(A(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return T(A(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return T(A(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){I(this,1,e,O,t)},setUint8:function(e,t){I(this,1,e,O,t)},setInt16:function(e,t){I(this,2,e,C,t,arguments[2])},setUint16:function(e,t){I(this,2,e,C,t,arguments[2])},setInt32:function(e,t){I(this,4,e,M,t,arguments[2])},setUint32:function(e,t){I(this,4,e,M,t,arguments[2])},setFloat32:function(e,t){I(this,4,e,x,t,arguments[2])},setFloat64:function(e,t){I(this,8,e,j,t,arguments[2])}});q(u,i),q(s,o),Ze(s[a],ra.VIEW,!0),t[i]=u,t[o]=s}),oa=Ge.ArrayBuffer,aa=ia.ArrayBuffer,ua=ia.DataView,sa=ra.ABV&&oa.isView,ca=aa.prototype.slice,la=ra.VIEW,fa="ArrayBuffer";tt(tt.G+tt.W+tt.F*(oa!==aa),{ArrayBuffer:aa}),tt(tt.S+tt.F*!ra.CONSTR,fa,{isView:function(e){return sa&&sa(e)||Ye(e)&&la in e}}),tt(tt.P+tt.U+tt.F*He(function(){return!new aa(2).slice(1,void 0).byteLength}),fa,{slice:function(e,t){if(void 0!==ca&&void 0===t)return ca.call(h(this),e);for(var r=h(this).byteLength,n=ot(e,r),i=ot(void 0===t?r:t,r),o=new(Di(this,aa))(it(i-n)),a=new ua(this),u=new ua(o),s=0;n<i;)u.setUint8(s++,a.getUint8(n++));return o}}),li(fa),tt(tt.G+tt.W+tt.F*!ra.ABV,{DataView:ia.DataView});var da=t(function(e){if(Je){var m=Ge,y=He,b=tt,_=ra,t=ia,d=et,w=Ri,r=Xe,S=Ze,n=co,i=nt,k=it,E=na,o=ot,a=$e,u=Ve,T=mt,P=Ye,p=lt,h=Tn,O=ut,C=ft,M=st.f,v=Cn,s=Qe,c=rt,l=Un,f=at,g=Di,j=di,x=qr,R=xn,A=li,I=ri,D=Zn,L=Ke,F=ct,N=L.f,U=F.f,z=m.RangeError,q=m.TypeError,B=m.Uint8Array,W="ArrayBuffer",G="Shared"+W,V="BYTES_PER_ELEMENT",H="prototype",J=Array[H],Y=t.ArrayBuffer,$=t.DataView,K=l(0),X=l(2),Z=l(3),Q=l(4),ee=l(5),te=l(6),re=f(!0),ne=f(!1),ie=j.values,oe=j.keys,ae=j.entries,ue=J.lastIndexOf,se=J.reduce,ce=J.reduceRight,le=J.join,fe=J.sort,de=J.slice,pe=J.toString,he=J.toLocaleString,ve=c("iterator"),ge=c("toStringTag"),me=s("typed_constructor"),ye=s("def_constructor"),be=_.CONSTR,_e=_.TYPED,we=_.VIEW,Se="Wrong length!",ke=l(1,function(e,t){return Ce(g(e,e[ye]),t)}),Ee=y(function(){return 1===new B(new Uint16Array([1]).buffer)[0]}),Te=!!B&&!!B[H].set&&y(function(){new B(1).set({})}),Pe=function(e,t){var r=i(e);if(r<0||r%t)throw z("Wrong offset!");return r},Oe=function(e){if(P(e)&&_e in e)return e;throw q(e+" is not a typed array!")},Ce=function(e,t){if(!(P(e)&&me in e))throw q("It is not a typed array constructor!");return new e(t)},Me=function(e,t){return je(g(e,e[ye]),t)},je=function(e,t){for(var r=0,n=t.length,i=Ce(e,n);r<n;)i[r]=t[r++];return i},xe=function(e,t,r){N(e,t,{get:function(){return this._d[r]}})},Re=function(e){var t,r,n,i,o,a,u=p(e),s=arguments.length,c=1<s?arguments[1]:void 0,l=void 0!==c,f=v(u);if(null!=f&&!h(f)){for(a=f.call(u),n=[],t=0;!(o=a.next()).done;t++)n.push(o.value);u=n}for(l&&2<s&&(c=d(c,arguments[2],2)),t=0,r=k(u.length),i=Ce(this,r);t<r;t++)i[t]=l?c(u[t],t):u[t];return i},Ae=function(){for(var e=0,t=arguments.length,r=Ce(this,t);e<t;)r[e]=arguments[e++];return r},Ie=!!B&&y(function(){he.call(new B(1))}),De=function(){return he.apply(Ie?de.call(Oe(this)):Oe(this),arguments)},Le={copyWithin:function(e,t){return D.call(Oe(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return Q(Oe(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(e){return I.apply(Oe(this),arguments)},filter:function(e){return Me(this,X(Oe(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return ee(Oe(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return te(Oe(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){K(Oe(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return ne(Oe(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return re(Oe(this),e,1<arguments.length?arguments[1]:void 0)},join:function(e){return le.apply(Oe(this),arguments)},lastIndexOf:function(e){return ue.apply(Oe(this),arguments)},map:function(e){return ke(Oe(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(e){return se.apply(Oe(this),arguments)},reduceRight:function(e){return ce.apply(Oe(this),arguments)},reverse:function(){for(var e,t=Oe(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return Z(Oe(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return fe.call(Oe(this),e)},subarray:function(e,t){var r=Oe(this),n=r.length,i=o(e,n);return new(g(r,r[ye]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,k((void 0===t?n:o(t,n))-i))}},Fe=function(e,t){return Me(this,de.call(Oe(this),e,t))},Ne=function(e){Oe(this);var t=Pe(arguments[1],1),r=this.length,n=p(e),i=k(n.length),o=0;if(r<i+t)throw z(Se);for(;o<i;)this[t+o]=n[o++]},Ue={entries:function(){return ae.call(Oe(this))},keys:function(){return oe.call(Oe(this))},values:function(){return ie.call(Oe(this))}},ze=function(e,t){return P(e)&&e[_e]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},qe=function(e,t){return ze(e,t=a(t,!0))?r(2,e[t]):U(e,t)},Be=function(e,t,r){return!(ze(e,t=a(t,!0))&&P(r)&&u(r,"value"))||u(r,"get")||u(r,"set")||r.configurable||u(r,"writable")&&!r.writable||u(r,"enumerable")&&!r.enumerable?N(e,t,r):(e[t]=r.value,e)};be||(F.f=qe,L.f=Be),b(b.S+b.F*!be,"Object",{getOwnPropertyDescriptor:qe,defineProperty:Be}),y(function(){pe.call({})})&&(pe=he=function(){return le.call(this)});var We=n({},Le);n(We,Ue),S(We,ve,Ue.values),n(We,{slice:Fe,set:Ne,constructor:function(){},toString:pe,toLocaleString:De}),xe(We,"buffer","b"),xe(We,"byteOffset","o"),xe(We,"byteLength","l"),xe(We,"length","e"),N(We,ge,{get:function(){return this[_e]}}),e.exports=function(e,f,t,o){var d=e+((o=!!o)?"Clamped":"")+"Array",r="get"+e,a="set"+e,p=m[d],u=p||{},n=p&&C(p),i=!p||!_.ABV,s={},c=p&&p[H],h=function(e,i){N(e,i,{get:function(){return e=i,(t=this._d).v[r](e*f+t.o,Ee);var e,t},set:function(e){return t=i,r=e,n=this._d,o&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),void n.v[a](t*f+n.o,r,Ee);var t,r,n},enumerable:!0})};i?(p=t(function(e,t,r,n){w(e,p,d,"_d");var i,o,a,u,s=0,c=0;if(P(t)){if(!(t instanceof Y||(u=T(t))==W||u==G))return _e in t?je(p,t):Re.call(p,t);i=t,c=Pe(r,f);var l=t.byteLength;if(void 0===n){if(l%f)throw z(Se);if((o=l-c)<0)throw z(Se)}else if(l<(o=k(n)*f)+c)throw z(Se);a=o/f}else a=E(t),i=new Y(o=a*f);for(S(e,"_d",{b:i,o:c,l:o,e:a,v:new $(i)});s<a;)h(e,s++)}),c=p[H]=O(We),S(c,"constructor",p)):y(function(){p(1)})&&y(function(){new p(-1)})&&R(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=t(function(e,t,r,n){var i;return w(e,p,d),P(t)?t instanceof Y||(i=T(t))==W||i==G?void 0!==n?new u(t,Pe(r,f),n):void 0!==r?new u(t,Pe(r,f)):new u(t):_e in t?je(p,t):Re.call(p,t):new u(E(t))}),K(n!==Function.prototype?M(u).concat(M(n)):M(u),function(e){e in p||S(p,e,u[e])}),(p[H]=c).constructor=p);var l=c[ve],v=!!l&&("values"==l.name||null==l.name),g=Ue.values;S(p,me,!0),S(c,_e,d),S(c,we,!0),S(c,ye,p),(o?new p(1)[ge]==d:ge in c)||N(c,ge,{get:function(){return d}}),s[d]=p,b(b.G+b.W+b.F*(p!=u),s),b(b.S,d,{BYTES_PER_ELEMENT:f}),b(b.S+b.F*y(function(){u.of.call(p,1)}),d,{from:Re,of:Ae}),V in c||S(c,V,f),b(b.P,d,Le),A(d),b(b.P+b.F*Te,d,{set:Ne}),b(b.P+b.F*!v,d,Ue),c.toString!=pe&&(c.toString=pe),b(b.P+b.F*y(function(){new p(1).slice()}),d,{slice:Fe}),b(b.P+b.F*(y(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!y(function(){c.toLocaleString.call([1,2])})),d,{toLocaleString:De}),x[d]=v?l:g,v||S(c,ve,g)}}else e.exports=function(){}});da("Int8",1,function(n){return function(e,t,r){return n(this,e,t,r)}}),da("Uint8",1,function(n){return function(e,t,r){return n(this,e,t,r)}}),da("Uint8",1,function(n){return function(e,t,r){return n(this,e,t,r)}},!0),da("Int16",2,function(n){return function(e,t,r){return n(this,e,t,r)}}),da("Uint16",2,function(n){return function(e,t,r){return n(this,e,t,r)}}),da("Int32",4,function(n){return function(e,t,r){return n(this,e,t,r)}}),da("Uint32",4,function(n){return function(e,t,r){return n(this,e,t,r)}}),da("Float32",4,function(n){return function(e,t,r){return n(this,e,t,r)}}),da("Float64",8,function(n){return function(e,t,r){return n(this,e,t,r)}});var pa=(Ge.Reflect||{}).apply,ha=Function.apply;tt(tt.S+tt.F*!He(function(){pa(function(){})}),"Reflect",{apply:function(e,t,r){var n=l(e),i=h(r);return pa?pa(n,t,i):ha.call(n,t,i)}});var va=(Ge.Reflect||{}).construct,ga=He(function(){function e(){}return!(va(function(){},[],e)instanceof e)}),ma=!He(function(){va(function(){})});tt(tt.S+tt.F*(ga||ma),"Reflect",{construct:function(e,t){l(e),h(t);var r=arguments.length<3?e:l(arguments[2]);if(ma&&!ga)return va(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(St.apply(e,n))}var i=r.prototype,o=ut(Ye(i)?i:Object.prototype),a=Function.apply.call(e,o,t);return Ye(a)?a:o}}),tt(tt.S+tt.F*He(function(){Reflect.defineProperty(Ke.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){h(e),t=$e(t,!0),h(r);try{return Ke.f(e,t,r),!0}catch(e){return!1}}});var ya=ct.f;tt(tt.S,"Reflect",{deleteProperty:function(e,t){var r=ya(h(e),t);return!(r&&!r.configurable)&&delete e[t]}});var ba=function(e){this._t=h(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};Wr(ba,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),tt(tt.S,"Reflect",{enumerate:function(e){return new ba(e)}}),tt(tt.S,"Reflect",{get:function e(t,r){var n,i,o=arguments.length<3?t:arguments[2];return h(t)===o?t[r]:(n=ct.f(t,r))?Ve(n,"value")?n.value:void 0!==n.get?n.get.call(o):void 0:Ye(i=ft(t))?e(i,r,o):void 0}}),tt(tt.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return ct.f(h(e),t)}}),tt(tt.S,"Reflect",{getPrototypeOf:function(e){return ft(h(e))}}),tt(tt.S,"Reflect",{has:function(e,t){return t in e}});var _a=Object.isExtensible;tt(tt.S,"Reflect",{isExtensible:function(e){return h(e),!_a||_a(e)}});var wa=Ge.Reflect,Sa=wa&&wa.ownKeys||function(e){var t=st.f(h(e)),r=z.f;return r?t.concat(r(e)):t};tt(tt.S,"Reflect",{ownKeys:Sa});var ka=Object.preventExtensions;tt(tt.S,"Reflect",{preventExtensions:function(e){h(e);try{return ka&&ka(e),!0}catch(e){return!1}}}),tt(tt.S,"Reflect",{set:function e(t,r,n){var i,o,a=arguments.length<4?t:arguments[3],u=ct.f(h(t),r);if(!u){if(Ye(o=ft(t)))return e(o,r,n,a);u=Xe(0)}if(Ve(u,"value")){if(!1===u.writable||!Ye(a))return!1;if(i=ct.f(a,r)){if(i.get||i.set||!1===i.writable)return!1;i.value=n,Ke.f(a,r,i)}else Ke.f(a,r,Xe(0,n));return!0}return void 0!==u.set&&(u.set.call(a,n),!0)}}),ht&&tt(tt.S,"Reflect",{setPrototypeOf:function(e,t){ht.check(e,t);try{return ht.set(e,t),!0}catch(e){return!1}}});var Ea=at(!0);tt(tt.P,"Array",{includes:function(e){return Ea(this,e,1<arguments.length?arguments[1]:void 0)}}),ti("includes");var Ta=rt("isConcatSpreadable");var Pa=function e(t,r,n,i,o,a,u,s){for(var c,l,f=o,d=0,p=!!u&&et(u,s,3);d<i;){if(d in n){if(c=p?p(n[d],d,r):n[d],l=!1,Ye(c)&&(l=void 0!==(l=c[Ta])?!!l:W(c)),l&&0<a)f=e(t,r,c,it(c.length),f,a-1)-1;else{if(9007199254740991<=f)throw TypeError();t[f]=c}f++}d++}return f};tt(tt.P,"Array",{flatMap:function(e){var t,r,n=lt(this);return l(e),t=it(n.length),r=Nn(n,0),Pa(r,n,n,t,0,1,e,arguments[1]),r}}),ti("flatMap"),tt(tt.P,"Array",{flatten:function(){var e=arguments[0],t=lt(this),r=it(t.length),n=Nn(t,0);return Pa(n,t,t,r,0,void 0===e?1:nt(e)),n}}),ti("flatten");var Oa=zr(!0);tt(tt.P,"String",{at:function(e){return Oa(this,e)}});var Ca=function(e,t,r,n){var i=String(P(e)),o=i.length,a=void 0===r?" ":String(r),u=it(t);if(u<=o||""==a)return i;var s=u-o,c=or.call(a,Math.ceil(s/a.length));return c.length>s&&(c=c.slice(0,s)),n?c+i:i+c};tt(tt.P+tt.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(uo),"String",{padStart:function(e){return Ca(this,e,1<arguments.length?arguments[1]:void 0,!0)}}),tt(tt.P+tt.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(uo),"String",{padEnd:function(e){return Ca(this,e,1<arguments.length?arguments[1]:void 0,!1)}}),It("trimLeft",function(e){return function(){return e(this,1)}},"trimStart"),It("trimRight",function(e){return function(){return e(this,2)}},"trimEnd");var Ma=RegExp.prototype,ja=function(e,t){this._r=e,this._s=t};Wr(ja,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),tt(tt.P,"String",{matchAll:function(e){if(P(this),!Zr(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in Ma?String(e.flags):pi.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=it(e.lastIndex),new ja(n,t)}}),S("asyncIterator"),S("observable"),tt(tt.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=O(e),i=ct.f,o=Sa(n),a={},u=0;o.length>u;)void 0!==(r=i(n,t=o[u++]))&&Pn(a,t,r);return a}});var xa=B.f,Ra=function(u){return function(e){for(var t,r=O(e),n=U(r),i=n.length,o=0,a=[];o<i;)xa.call(r,t=n[o++])&&a.push(u?[t,r[t]]:r[t]);return a}},Aa=Ra(!1);tt(tt.S,"Object",{values:function(e){return Aa(e)}});var Ia=Ra(!0);tt(tt.S,"Object",{entries:function(e){return Ia(e)}});var Da=!He(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete Ge[e]});Je&&tt(tt.P+Da,"Object",{__defineGetter__:function(e,t){Ke.f(lt(this),e,{get:l(t),enumerable:!0,configurable:!0})}}),Je&&tt(tt.P+Da,"Object",{__defineSetter__:function(e,t){Ke.f(lt(this),e,{set:l(t),enumerable:!0,configurable:!0})}});var La=ct.f;Je&&tt(tt.P+Da,"Object",{__lookupGetter__:function(e){var t,r=lt(this),n=$e(e,!0);do{if(t=La(r,n))return t.get}while(r=ft(r))}});var Fa=ct.f;Je&&tt(tt.P+Da,"Object",{__lookupSetter__:function(e){var t,r=lt(this),n=$e(e,!0);do{if(t=Fa(r,n))return t.set}while(r=ft(r))}});var Na=function(e,t){var r=[];return Ai(e,!1,r.push,r,t),r},Ua=function(e){return function(){if(mt(this)!=e)throw TypeError(e+"#toJSON isn't generic");return Na(this)}};tt(tt.P+tt.R,"Map",{toJSON:Ua("Map")}),tt(tt.P+tt.R,"Set",{toJSON:Ua("Set")});var za=function(e){tt(tt.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})};za("Map"),za("Set"),za("WeakMap"),za("WeakSet");var qa=function(e){tt(tt.S,e,{from:function(e){var t,r,n,i,o=arguments[1];return l(this),(t=void 0!==o)&&l(o),null==e?new this:(r=[],t?(n=0,i=et(o,arguments[2],2),Ai(e,!1,function(e){r.push(i(e,n++))})):Ai(e,!1,r.push,r),new this(r))}})};qa("Map"),qa("Set"),qa("WeakMap"),qa("WeakSet"),tt(tt.G,{global:Ge}),tt(tt.S,"System",{global:Ge}),tt(tt.S,"Error",{isError:function(e){return"Error"===E(e)}}),tt(tt.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}}),tt(tt.S,"Math",{DEG_PER_RAD:Math.PI/180});var Ba=180/Math.PI;tt(tt.S,"Math",{degrees:function(e){return e*Ba}});var Wa=Math.scale||function(e,t,r,n,i){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-n)/(r-t)+n};tt(tt.S,"Math",{fscale:function(e,t,r,n,i){return Ar(Wa(e,t,r,n,i))}}),tt(tt.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,o=r>>>0;return(t>>>0)+(n>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}}),tt(tt.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,o=r>>>0;return(t>>>0)-(n>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}}),tt(tt.S,"Math",{imulh:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n,a=r>>16,u=n>>16,s=(a*o>>>0)+(i*o>>>16);return a*u+(s>>16)+((i*u>>>0)+(65535&s)>>16)}}),tt(tt.S,"Math",{RAD_PER_DEG:180/Math.PI});var Ga=Math.PI/180;tt(tt.S,"Math",{radians:function(e){return e*Ga}}),tt(tt.S,"Math",{scale:Wa}),tt(tt.S,"Math",{umulh:function(e,t){var r=+e,n=+t,i=65535&r,o=65535&n,a=r>>>16,u=n>>>16,s=(a*o>>>0)+(i*o>>>16);return a*u+(s>>>16)+((i*u>>>0)+(65535&s)>>>16)}}),tt(tt.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:0<e}}),tt(tt.P+tt.R,"Promise",{finally:function(t){var r=Di(this,v.Promise||Ge.Promise),e="function"==typeof t;return this.then(e?function(e){return so(r,t()).then(function(){return e})}:t,e?function(e){return so(r,t()).then(function(){throw e})}:t)}}),tt(tt.S,"Promise",{try:function(e){var t=io.f(this),r=oo(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}});var Va=f("metadata"),Ha=Va.store||(Va.store=new Jo),Ja=function(e,t,r){var n=Ha.get(e);if(!n){if(!r)return;Ha.set(e,n=new Fo)}var i=n.get(t);if(!i){if(!r)return;n.set(t,i=new Fo)}return i},Ya={store:Ha,map:Ja,has:function(e,t,r){var n=Ja(t,r,!1);return void 0!==n&&n.has(e)},get:function(e,t,r){var n=Ja(t,r,!1);return void 0===n?void 0:n.get(e)},set:function(e,t,r,n){Ja(r,n,!0).set(e,t)},keys:function(e,t){var r=Ja(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){tt(tt.S,"Reflect",e)}},$a=Ya.key,Ka=Ya.set;Ya.exp({defineMetadata:function(e,t,r,n){Ka(e,t,h(r),$a(n))}});var Xa=Ya.key,Za=Ya.map,Qa=Ya.store;Ya.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:Xa(arguments[2]),n=Za(h(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var i=Qa.get(t);return i.delete(r),!!i.size||Qa.delete(t)}});var eu=Ya.has,tu=Ya.get,ru=Ya.key,nu=function(e,t,r){if(eu(e,t,r))return tu(e,t,r);var n=ft(t);return null!==n?nu(e,n,r):void 0};Ya.exp({getMetadata:function(e,t){return nu(e,h(t),arguments.length<3?void 0:ru(arguments[2]))}});var iu=Ya.keys,ou=Ya.key,au=function(e,t){var r=iu(e,t),n=ft(e);if(null===n)return r;var i=au(n,t);return i.length?r.length?Na(new No(r.concat(i))):i:r};Ya.exp({getMetadataKeys:function(e){return au(h(e),arguments.length<2?void 0:ou(arguments[1]))}});var uu=Ya.get,su=Ya.key;Ya.exp({getOwnMetadata:function(e,t){return uu(e,h(t),arguments.length<3?void 0:su(arguments[2]))}});var cu=Ya.keys,lu=Ya.key;Ya.exp({getOwnMetadataKeys:function(e){return cu(h(e),arguments.length<2?void 0:lu(arguments[1]))}});var fu=Ya.has,du=Ya.key,pu=function(e,t,r){if(fu(e,t,r))return!0;var n=ft(t);return null!==n&&pu(e,n,r)};Ya.exp({hasMetadata:function(e,t){return pu(e,h(t),arguments.length<3?void 0:du(arguments[2]))}});var hu=Ya.has,vu=Ya.key;Ya.exp({hasOwnMetadata:function(e,t){return hu(e,h(t),arguments.length<3?void 0:vu(arguments[2]))}});var gu=Ya.key,mu=Ya.set;Ya.exp({metadata:function(r,n){return function(e,t){mu(r,n,(void 0!==t?h:l)(e),gu(t))}}});var yu=Zi(),bu=Ge.process,_u="process"==E(bu);tt(tt.G,{asap:function(e){var t=_u&&bu.domain;yu(t?t.bind(e):e)}});var wu=Zi(),Su=rt("observable"),ku=Ai.RETURN,Eu=function(e){return null==e?void 0:l(e)},Tu=function(e){var t=e._c;t&&(e._c=void 0,t())},Pu=function(e){return void 0===e._o},Ou=function(e){Pu(e)||(e._o=void 0,Tu(e))},Cu=function(t,e){h(t),this._c=void 0,this._o=t,t=new Mu(this);try{var r=e(t),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:l(r),this._c=r)}catch(e){return void t.error(e)}Pu(this)&&Tu(this)};Cu.prototype=co({},{unsubscribe:function(){Ou(this)}});var Mu=function(e){this._s=e};Mu.prototype=co({},{next:function(e){var t=this._s;if(!Pu(t)){var r=t._o;try{var n=Eu(r.next);if(n)return n.call(r,e)}catch(e){try{Ou(t)}finally{throw e}}}},error:function(e){var t=this._s;if(Pu(t))throw e;var r=t._o;t._o=void 0;try{var n=Eu(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{Tu(t)}finally{throw e}}return Tu(t),e},complete:function(e){var t=this._s;if(!Pu(t)){var r=t._o;t._o=void 0;try{var n=Eu(r.complete);e=n?n.call(r,e):void 0}catch(e){try{Tu(t)}finally{throw e}}return Tu(t),e}}});var ju=function(e){Ri(this,ju,"Observable","_f")._f=l(e)};co(ju.prototype,{subscribe:function(e){return new Cu(e,this._f)},forEach:function(n){var i=this;return new(v.Promise||Ge.Promise)(function(e,t){l(n);var r=i.subscribe({next:function(e){try{return n(e)}catch(e){t(e),r.unsubscribe()}},error:t,complete:e})})}}),co(ju,{from:function(e){var t="function"==typeof this?this:ju,r=Eu(h(e)[Su]);if(r){var n=h(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return wu(function(){if(!r){try{if(Ai(e,!1,function(e){if(t.next(e),r)return ku})===ku)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:ju)(function(t){var r=!1;return wu(function(){if(!r){for(var e=0;e<n.length;++e)if(t.next(n[e]),r)return;t.complete()}}),function(){r=!0}})}}),Ze(ju.prototype,Su,function(){return this}),tt(tt.G,{Observable:ju}),li("Observable");var xu=[].slice,Ru=/MSIE .\./.test(uo),Au=function(i){return function(e,t){var r=2<arguments.length,n=!!r&&xu.call(arguments,2);return i(r?function(){("function"==typeof e?e:Function(e)).apply(this,n)}:e,t)}};tt(tt.G+tt.B+tt.F*Ru,{setTimeout:Au(Ge.setTimeout),setInterval:Au(Ge.setInterval)}),tt(tt.G+tt.B,{setImmediate:Hi.set,clearImmediate:Hi.clear});for(var Iu=rt("iterator"),Du=rt("toStringTag"),Lu=qr.Array,Fu={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Nu=U(Fu),Uu=0;Uu<Nu.length;Uu++){var zu,qu=Nu[Uu],Bu=Fu[qu],Wu=Ge[qu],Gu=Wu&&Wu.prototype;if(Gu&&(Gu[Iu]||Ze(Gu,Iu,Lu),Gu[Du]||Ze(Gu,Du,qu),qr[qu]=Lu,Bu))for(zu in di)Gu[zu]||b(Gu,zu,di[zu],!0)}t(function(x){!function(e){var s,t=Object.prototype,c=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag",a=e.regeneratorRuntime;if(a)x.exports=a;else{(a=e.regeneratorRuntime=x.exports).wrap=y;var f="suspendedStart",d="suspendedYield",p="executing",h="completed",v={},u={};u[i]=function(){return this};var l=Object.getPrototypeOf,g=l&&l(l(M([])));g&&g!==t&&c.call(g,i)&&(u=g);var m=S.prototype=_.prototype=Object.create(u);w.prototype=m.constructor=S,S.constructor=w,S[o]=w.displayName="GeneratorFunction",a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(m),e},a.awrap=function(e){return{__await:e}},k(E.prototype),E.prototype[n]=function(){return this},a.AsyncIterator=E,a.async=function(e,t,r,n){var i=new E(y(e,t,r,n));return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},k(m),m[o]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},a.keys=function(r){var n=[];for(var e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return o.type="throw",o.arg=r,n.next=e,t&&(n.method="next",n.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),u=c.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:M(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=s),v}}}function y(e,t,r,n){var o,a,u,s,i=t&&t.prototype instanceof _?t:_,c=Object.create(i.prototype),l=new C(n||[]);return c._invoke=(o=e,a=r,u=l,s=f,function(e,t){if(s===p)throw new Error("Generator is already running");if(s===h){if("throw"===e)throw t;return j()}for(u.method=e,u.arg=t;;){var r=u.delegate;if(r){var n=T(r,u);if(n){if(n===v)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(s===f)throw s=h,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);s=p;var i=b(o,a,u);if("normal"===i.type){if(s=u.done?h:d,i.arg===v)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(s=h,u.method="throw",u.arg=i.arg)}}),c}function b(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function _(){}function w(){}function S(){}function k(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(u){function s(e,t,r,n){var i=b(u[e],u,t);if("throw"!==i.type){var o=i.arg,a=o.value;return a&&"object"==typeof a&&c.call(a,"__await")?Promise.resolve(a.__await).then(function(e){s("next",e,r,n)},function(e){s("throw",e,r,n)}):Promise.resolve(a).then(function(e){o.value=e,r(o)},n)}n(i.arg)}var t;"object"==typeof e.process&&e.process.domain&&(s=e.process.domain.bind(s)),this._invoke=function(r,n){function e(){return new Promise(function(e,t){s(r,n,e,t)})}return t=t?t.then(e,e):e()}}function T(e,t){var r=e.iterator[t.method];if(r===s){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=s,T(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var n=b(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,v;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=s),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(c.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=s,e.done=!0,e};return n.next=n}}return{next:j}}function j(){return{value:s,done:!0}}}("object"==typeof K?K:"object"==typeof window?window:"object"==typeof self?self:K)});var Vu,Hu,Ju,Yu=(Vu=/[\\^$*+?.()|[\]{}]/g,Ju=(Hu="\\$&")===Object(Hu)?function(e){return Hu[e]}:Hu,function(e){return String(e).replace(Vu,Ju)});tt(tt.S,"RegExp",{escape:function(e){return Yu(e)}});v.RegExp.escape;if(K._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");K._babelPolyfill=!0;function $u(e,t,r){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:r})}$u(String.prototype,"padLeft","".padStart),$u(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&$u(Array,e,Function.call.bind([][e]))});var Ku="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Xu(){throw new Error("setTimeout has not been defined")}function Zu(){throw new Error("clearTimeout has not been defined")}var Qu=Xu,es=Zu;function ts(t){if(Qu===setTimeout)return setTimeout(t,0);if((Qu===Xu||!Qu)&&setTimeout)return Qu=setTimeout,setTimeout(t,0);try{return Qu(t,0)}catch(e){try{return Qu.call(null,t,0)}catch(e){return Qu.call(this,t,0)}}}"function"==typeof Ku.setTimeout&&(Qu=setTimeout),"function"==typeof Ku.clearTimeout&&(es=clearTimeout);var rs,ns=[],is=!1,os=-1;function as(){is&&rs&&(is=!1,rs.length?ns=rs.concat(ns):os=-1,ns.length&&us())}function us(){if(!is){var e=ts(as);is=!0;for(var t=ns.length;t;){for(rs=ns,ns=[];++os<t;)rs&&rs[os].run();os=-1,t=ns.length}rs=null,is=!1,function(t){if(es===clearTimeout)return clearTimeout(t);if((es===Zu||!es)&&clearTimeout)return es=clearTimeout,clearTimeout(t);try{es(t)}catch(e){try{return es.call(null,t)}catch(e){return es.call(this,t)}}}(e)}}function ss(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];ns.push(new cs(e,t)),1!==ns.length||is||ts(us)}function cs(e,t){this.fun=e,this.array=t}cs.prototype.run=function(){this.fun.apply(null,this.array)};function ls(){}var fs=ls,ds=ls,ps=ls,hs=ls,vs=ls,gs=ls,ms=ls;var ys=Ku.performance||{},bs=ys.now||ys.mozNow||ys.msNow||ys.oNow||ys.webkitNow||function(){return(new Date).getTime()};var _s=new Date;var ws={nextTick:ss,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:fs,addListener:ds,once:ps,off:hs,removeListener:vs,removeAllListeners:gs,emit:ms,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*bs.call(ys),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-_s)/1e3}},Ss={}.toString,ks=function(e){return Ss.call(e).slice(8,-1)},Es=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==ks(e)?e.split(""):Object(e)},Ts=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},Ps=function(e){return Es(Ts(e))},Os={f:{}.propertyIsEnumerable},Cs=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ms=function(e){return"object"==typeof e?null!==e:"function"==typeof e},js=function(e,t){if(!Ms(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!Ms(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!Ms(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!Ms(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},xs={}.hasOwnProperty,Rs=function(e,t){return xs.call(e,t)},As=function(e){try{return!!e()}catch(e){return!0}},Is=!As(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Ds=t(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),Ls=Ds.document,Fs=Ms(Ls)&&Ms(Ls.createElement),Ns=function(e){return Fs?Ls.createElement(e):{}},Us=!Is&&!As(function(){return 7!=Object.defineProperty(Ns("div"),"a",{get:function(){return 7}}).a}),zs=Object.getOwnPropertyDescriptor,qs={f:Is?zs:function(e,t){if(e=Ps(e),t=js(t,!0),Us)try{return zs(e,t)}catch(e){}if(Rs(e,t))return Cs(!Os.f.call(e,t),e[t])}},Bs=t(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),Ws=(Bs.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),Gs=function(n,i,e){if(Ws(n),void 0===i)return n;switch(e){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)}}return function(){return n.apply(i,arguments)}},Vs=function(e){if(!Ms(e))throw TypeError(e+" is not an object!");return e},Hs=Object.defineProperty,Js={f:Is?Object.defineProperty:function(e,t,r){if(Vs(e),t=js(t,!0),Vs(r),Us)try{return Hs(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},Ys=Is?function(e,t,r){return Js.f(e,t,Cs(1,r))}:function(e,t,r){return e[t]=r,e},$s="prototype",Ks=function(e,t,r){var n,i,o,a=e&Ks.F,u=e&Ks.G,s=e&Ks.S,c=e&Ks.P,l=e&Ks.B,f=e&Ks.W,d=u?Bs:Bs[t]||(Bs[t]={}),p=d[$s],h=u?Ds:s?Ds[t]:(Ds[t]||{})[$s];for(n in u&&(r=t),r)(i=!a&&h&&void 0!==h[n])&&Rs(d,n)||(o=i?h[n]:r[n],d[n]=u&&"function"!=typeof h[n]?r[n]:l&&i?Gs(o,Ds):f&&h[n]==o?function(n){var e=function(e,t,r){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(e);case 2:return new n(e,t)}return new n(e,t,r)}return n.apply(this,arguments)};return e[$s]=n[$s],e}(o):c&&"function"==typeof o?Gs(Function.call,o):o,c&&((d.virtual||(d.virtual={}))[n]=o,e&Ks.R&&p&&!p[n]&&Ys(p,n,o)))};Ks.F=1,Ks.G=2,Ks.S=4,Ks.P=8,Ks.B=16,Ks.W=32,Ks.U=64,Ks.R=128;var Xs=Ks,Zs=function(e,t){var r=(Bs.Object||{})[e]||Object[e],n={};n[e]=t(r),Xs(Xs.S+Xs.F*As(function(){r(1)}),"Object",n)},Qs=qs.f;Zs("getOwnPropertyDescriptor",function(){return function(e,t){return Qs(Ps(e),t)}});var ec=Bs.Object,tc=function(e,t){return ec.getOwnPropertyDescriptor(e,t)},rc=t(function(e){e.exports={default:tc,__esModule:!0}});e(rc);var nc=qs.f;Xs(Xs.S,"Reflect",{deleteProperty:function(e,t){var r=nc(Vs(e),t);return!(r&&!r.configurable)&&delete e[t]}});var ic=Bs.Reflect.deleteProperty,oc=t(function(e){e.exports={default:ic,__esModule:!0}});e(oc);var ac,uc=Math.ceil,sc=Math.floor,cc=function(e){return isNaN(e=+e)?0:(0<e?sc:uc)(e)},lc=Ys,fc={},dc=Math.min,pc=function(e){return 0<e?dc(cc(e),9007199254740991):0},hc=Math.max,vc=Math.min,gc=t(function(e){var t="__core-js_shared__",r=Ds[t]||(Ds[t]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:Bs.version,mode:"pure",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})}),mc=0,yc=Math.random(),bc=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++mc+yc).toString(36))},_c=gc("keys"),wc=function(e){return _c[e]||(_c[e]=bc(e))},Sc=(ac=!1,function(e,t,r){var n,i,o,a=Ps(e),u=pc(a.length),s=(i=u,(n=cc(n=r))<0?hc(n+i,0):vc(n,i));if(ac&&t!=t){for(;s<u;)if((o=a[s++])!=o)return!0}else for(;s<u;s++)if((ac||s in a)&&a[s]===t)return ac||s||0;return!ac&&-1}),kc=wc("IE_PROTO"),Ec=function(e,t){var r,n=Ps(e),i=0,o=[];for(r in n)r!=kc&&Rs(n,r)&&o.push(r);for(;t.length>i;)Rs(n,r=t[i++])&&(~Sc(o,r)||o.push(r));return o},Tc="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Pc=Object.keys||function(e){return Ec(e,Tc)},Oc=Is?Object.defineProperties:function(e,t){Vs(e);for(var r,n=Pc(t),i=n.length,o=0;o<i;)Js.f(e,r=n[o++],t[r]);return e},Cc=Ds.document,Mc=Cc&&Cc.documentElement,jc=wc("IE_PROTO"),xc=function(){},Rc="prototype",Ac=function(){var e,t=Ns("iframe"),r=Tc.length;for(t.style.display="none",Mc.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Ac=e.F;r--;)delete Ac[Rc][Tc[r]];return Ac()},Ic=Object.create||function(e,t){var r;return null!==e?(xc[Rc]=Vs(e),r=new xc,xc[Rc]=null,r[jc]=e):r=Ac(),void 0===t?r:Oc(r,t)},Dc=t(function(e){var t=gc("wks"),r=Ds.Symbol,n="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=n&&r[e]||(n?r:bc)("Symbol."+e))}).store=t}),Lc=Js.f,Fc=Dc("toStringTag"),Nc=function(e,t,r){e&&!Rs(e=r?e:e.prototype,Fc)&&Lc(e,Fc,{configurable:!0,value:t})},Uc={};Ys(Uc,Dc("iterator"),function(){return this});var zc,qc=function(e){return Object(Ts(e))},Bc=wc("IE_PROTO"),Wc=Object.prototype,Gc=Object.getPrototypeOf||function(e){return e=qc(e),Rs(e,Bc)?e[Bc]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Wc:null},Vc=Dc("iterator"),Hc=!([].keys&&"next"in[].keys()),Jc="values",Yc=function(){return this},$c=function(e,t,r,n,i,o,a){var u,s,c;s=t,c=n,(u=r).prototype=Ic(Uc,{next:Cs(1,c)}),Nc(u,s+" Iterator");var l,f,d,p=function(e){if(!Hc&&e in m)return m[e];switch(e){case"keys":case Jc:return function(){return new r(this,e)}}return function(){return new r(this,e)}},h=t+" Iterator",v=i==Jc,g=!1,m=e.prototype,y=m[Vc]||m["@@iterator"]||i&&m[i],b=y||p(i),_=i?v?p("entries"):b:void 0,w="Array"==t&&m.entries||y;if(w&&(d=Gc(w.call(new e)))!==Object.prototype&&d.next&&Nc(d,h,!0),v&&y&&y.name!==Jc&&(g=!0,b=function(){return y.call(this)}),a&&(Hc||g||!m[Vc])&&Ys(m,Vc,b),fc[t]=b,fc[h]=Yc,i)if(l={values:v?b:p(Jc),keys:o?b:p("keys"),entries:_},a)for(f in l)f in m||lc(m,f,l[f]);else Xs(Xs.P+Xs.F*(Hc||g),t,l);return l},Kc=(zc=!0,function(e,t){var r,n,i=String(Ts(e)),o=cc(t),a=i.length;return o<0||a<=o?zc?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===a||(n=i.charCodeAt(o+1))<56320||57343<n?zc?i.charAt(o):r:zc?i.slice(o,o+2):n-56320+(r-55296<<10)+65536});$c(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=Kc(t,r),this._i+=e.length,{value:e,done:!1})});var Xc=function(e,t){return{value:t,done:!!e}};$c(Array,"Array",function(e,t){this._t=Ps(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,Xc(1)):Xc(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");fc.Arguments=fc.Array;for(var Zc=Dc("toStringTag"),Qc="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),el=0;el<Qc.length;el++){var tl=Qc[el],rl=Ds[tl],nl=rl&&rl.prototype;nl&&!nl[Zc]&&Ys(nl,Zc,tl),fc[tl]=fc.Array}var il,ol,al,ul=Dc("toStringTag"),sl="Arguments"==ks(function(){return arguments}()),cl=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ul))?r:sl?ks(t):"Object"==(n=ks(t))&&"function"==typeof t.callee?"Arguments":n},ll=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},fl=function(t,e,r,n){try{return n?e(Vs(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&Vs(i.call(t)),e}},dl=Dc("iterator"),pl=Array.prototype,hl=function(e){return void 0!==e&&(fc.Array===e||pl[dl]===e)},vl=Dc("iterator"),gl=Bs.getIteratorMethod=function(e){if(null!=e)return e[vl]||e["@@iterator"]||fc[cl(e)]},ml=t(function(e){var d={},p={},t=e.exports=function(e,t,r,n,i){var o,a,u,s,c=i?function(){return e}:gl(e),l=Gs(r,n,t?2:1),f=0;if("function"!=typeof c)throw TypeError(e+" is not iterable!");if(hl(c)){for(o=pc(e.length);f<o;f++)if((s=t?l(Vs(a=e[f])[0],a[1]):l(e[f]))===d||s===p)return s}else for(u=c.call(e);!(a=u.next()).done;)if((s=fl(u,l,a.value,t))===d||s===p)return s};t.BREAK=d,t.RETURN=p}),yl=Dc("species"),bl=function(e,t){var r,n=Vs(e).constructor;return void 0===n||null==(r=Vs(n)[yl])?t:Ws(r)},_l=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},wl=Ds.process,Sl=Ds.setImmediate,kl=Ds.clearImmediate,El=Ds.MessageChannel,Tl=Ds.Dispatch,Pl=0,Ol={},Cl="onreadystatechange",Ml=function(){var e=+this;if(Ol.hasOwnProperty(e)){var t=Ol[e];delete Ol[e],t()}},jl=function(e){Ml.call(e.data)};Sl&&kl||(Sl=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return Ol[++Pl]=function(){_l("function"==typeof e?e:Function(e),t)},il(Pl),Pl},kl=function(e){delete Ol[e]},"process"==ks(wl)?il=function(e){wl.nextTick(Gs(Ml,e,1))}:Tl&&Tl.now?il=function(e){Tl.now(Gs(Ml,e,1))}:El?(al=(ol=new El).port2,ol.port1.onmessage=jl,il=Gs(al.postMessage,al,1)):Ds.addEventListener&&"function"==typeof postMessage&&!Ds.importScripts?(il=function(e){Ds.postMessage(e+"","*")},Ds.addEventListener("message",jl,!1)):il=Cl in Ns("script")?function(e){Mc.appendChild(Ns("script"))[Cl]=function(){Mc.removeChild(this),Ml.call(e)}}:function(e){setTimeout(Gs(Ml,e,1),0)});var xl={set:Sl,clear:kl},Rl=xl.set,Al=Ds.MutationObserver||Ds.WebKitMutationObserver,Il=Ds.process,Dl=Ds.Promise,Ll="process"==ks(Il);function Fl(e){var r,n;this.promise=new e(function(e,t){if(void 0!==r||void 0!==n)throw TypeError("Bad Promise constructor");r=e,n=t}),this.resolve=Ws(r),this.reject=Ws(n)}var Nl={f:function(e){return new Fl(e)}},Ul=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},zl=Ds.navigator,ql=zl&&zl.userAgent||"",Bl=function(e,t){if(Vs(e),Ms(t)&&t.constructor===e)return t;var r=Nl.f(e);return(0,r.resolve)(t),r.promise},Wl=function(e,t,r){for(var n in t)r&&e[n]?e[n]=t[n]:Ys(e,n,t[n]);return e},Gl=Dc("species"),Vl=function(e){var t="function"==typeof Bs[e]?Bs[e]:Ds[e];Is&&t&&!t[Gl]&&Js.f(t,Gl,{configurable:!0,get:function(){return this}})},Hl=Dc("iterator"),Jl=!1;try{[7][Hl]().return=function(){Jl=!0}}catch(e){}var Yl,$l,Kl,Xl,Zl=function(e,t){if(!t&&!Jl)return!1;var r=!1;try{var n=[7],i=n[Hl]();i.next=function(){return{done:r=!0}},n[Hl]=function(){return i},e(n)}catch(e){}return r},Ql=xl.set,ef=function(){var r,n,i,e=function(){var e,t;for(Ll&&(e=Il.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?i():n=void 0,e}}n=void 0,e&&e.enter()};if(Ll)i=function(){Il.nextTick(e)};else if(!Al||Ds.navigator&&Ds.navigator.standalone)if(Dl&&Dl.resolve){var t=Dl.resolve(void 0);i=function(){t.then(e)}}else i=function(){Rl.call(Ds,e)};else{var o=!0,a=document.createTextNode("");new Al(e).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(e){var t={fn:e,next:void 0};n&&(n.next=t),r||(r=t,i()),n=t}}(),tf="Promise",rf=Ds.TypeError,nf=Ds.process,of=nf&&nf.versions,af=of&&of.v8||"",uf=Ds[tf],sf="process"==cl(nf),cf=function(){},lf=$l=Nl.f,ff=!!function(){try{var e=uf.resolve(1),t=(e.constructor={})[Dc("species")]=function(e){e(cf,cf)};return(sf||"function"==typeof PromiseRejectionEvent)&&e.then(cf)instanceof t&&0!==af.indexOf("6.6")&&-1===ql.indexOf("Chrome/66")}catch(e){}}(),df=function(e){var t;return!(!Ms(e)||"function"!=typeof(t=e.then))&&t},pf=function(l,r){if(!l._n){l._n=!0;var n=l._c;ef(function(){for(var s=l._v,c=1==l._s,e=0,t=function(e){var t,r,n,i=c?e.ok:e.fail,o=e.resolve,a=e.reject,u=e.domain;try{i?(c||(2==l._h&&gf(l),l._h=1),!0===i?t=s:(u&&u.enter(),t=i(s),u&&(u.exit(),n=!0)),t===e.promise?a(rf("Promise-chain cycle")):(r=df(t))?r.call(t,o,a):o(t)):a(s)}catch(e){u&&!n&&u.exit(),a(e)}};n.length>e;)t(n[e++]);l._c=[],l._n=!1,r&&!l._h&&hf(l)})}},hf=function(o){Ql.call(Ds,function(){var e,t,r,n=o._v,i=vf(o);if(i&&(e=Ul(function(){sf?nf.emit("unhandledRejection",n,o):(t=Ds.onunhandledrejection)?t({promise:o,reason:n}):(r=Ds.console)&&r.error&&r.error("Unhandled promise rejection",n)}),o._h=sf||vf(o)?2:1),o._a=void 0,i&&e.e)throw e.v})},vf=function(e){return 1!==e._h&&0===(e._a||e._c).length},gf=function(t){Ql.call(Ds,function(){var e;sf?nf.emit("rejectionHandled",t):(e=Ds.onrejectionhandled)&&e({promise:t,reason:t._v})})},mf=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),pf(t,!0))},yf=function(e){var r,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw rf("Promise can't be resolved itself");(r=df(e))?ef(function(){var t={_w:n,_d:!1};try{r.call(e,Gs(yf,t,1),Gs(mf,t,1))}catch(e){mf.call(t,e)}}):(n._v=e,n._s=1,pf(n,!1))}catch(e){mf.call({_w:n,_d:!1},e)}}};ff||(uf=function(e){ll(this,uf,tf,"_h"),Ws(e),Yl.call(this);try{e(Gs(yf,this,1),Gs(mf,this,1))}catch(e){mf.call(this,e)}},(Yl=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=Wl(uf.prototype,{then:function(e,t){var r=lf(bl(this,uf));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=sf?nf.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&pf(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Kl=function(){var e=new Yl;this.promise=e,this.resolve=Gs(yf,e,1),this.reject=Gs(mf,e,1)},Nl.f=lf=function(e){return e===uf||e===Xl?new Kl(e):$l(e)}),Xs(Xs.G+Xs.W+Xs.F*!ff,{Promise:uf}),Nc(uf,tf),Vl(tf),Xl=Bs[tf],Xs(Xs.S+Xs.F*!ff,tf,{reject:function(e){var t=lf(this);return(0,t.reject)(e),t.promise}}),Xs(Xs.S+!0*Xs.F,tf,{resolve:function(e){return Bl(this===Xl?uf:this,e)}}),Xs(Xs.S+Xs.F*!(ff&&Zl(function(e){uf.all(e).catch(cf)})),tf,{all:function(e){var a=this,t=lf(a),u=t.resolve,s=t.reject,r=Ul(function(){var n=[],i=0,o=1;ml(e,!1,function(e){var t=i++,r=!1;n.push(void 0),o++,a.resolve(e).then(function(e){r||(r=!0,n[t]=e,--o||u(n))},s)}),--o||u(n)});return r.e&&s(r.v),t.promise},race:function(e){var t=this,r=lf(t),n=r.reject,i=Ul(function(){ml(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}}),Xs(Xs.P+Xs.R,"Promise",{finally:function(t){var r=bl(this,Bs.Promise||Ds.Promise),e="function"==typeof t;return this.then(e?function(e){return Bl(r,t()).then(function(){return e})}:t,e?function(e){return Bl(r,t()).then(function(){throw e})}:t)}}),Xs(Xs.S,"Promise",{try:function(e){var t=Nl.f(this),r=Ul(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}});var bf=Bs.Promise,_f=t(function(e){e.exports={default:bf,__esModule:!0}});e(_f);var wf={f:Object.getOwnPropertySymbols},Sf=Object.assign,kf=!Sf||As(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=Sf({},e)[r]||Object.keys(Sf({},t)).join("")!=n})?function(e,t){for(var r=qc(e),n=arguments.length,i=1,o=wf.f,a=Os.f;i<n;)for(var u,s=Es(arguments[i++]),c=o?Pc(s).concat(o(s)):Pc(s),l=c.length,f=0;f<l;)a.call(s,u=c[f++])&&(r[u]=s[u]);return r}:Sf;Xs(Xs.S+Xs.F,"Object",{assign:kf});var Ef=Bs.Object.assign,Tf=t(function(e){e.exports={default:Ef,__esModule:!0}});e(Tf);var Pf=(Ds.Reflect||{}).apply,Of=Function.apply;Xs(Xs.S+Xs.F*!As(function(){Pf(function(){})}),"Reflect",{apply:function(e,t,r){var n=Ws(e),i=Vs(r);return Pf?Pf(n,t,i):Of.call(n,t,i)}});var Cf=Bs.Reflect.apply,Mf=t(function(e){e.exports={default:Cf,__esModule:!0}});e(Mf);var jf=Bs.JSON||(Bs.JSON={stringify:JSON.stringify}),xf=function(e){return jf.stringify.apply(jf,arguments)},Rf=t(function(e){e.exports={default:xf,__esModule:!0}});e(Rf);var Af=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i};var If=function(){this.__data__=[],this.size=0};var Df=function(e,t){return e===t||e!=e&&t!=t};var Lf=function(e,t){for(var r=e.length;r--;)if(Df(e[r][0],t))return r;return-1},Ff=Array.prototype.splice;var Nf=function(e){var t=this.__data__,r=Lf(t,e);return!(r<0||(r==t.length-1?t.pop():Ff.call(t,r,1),--this.size,0))};var Uf=function(e){var t=this.__data__,r=Lf(t,e);return r<0?void 0:t[r][1]};var zf=function(e){return-1<Lf(this.__data__,e)};var qf=function(e,t){var r=this.__data__,n=Lf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Bf(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Bf.prototype.clear=If,Bf.prototype.delete=Nf,Bf.prototype.get=Uf,Bf.prototype.has=zf,Bf.prototype.set=qf;var Wf=Bf;var Gf=function(){this.__data__=new Wf,this.size=0};var Vf=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var Hf=function(e){return this.__data__.get(e)};var Jf=function(e){return this.__data__.has(e)},Yf="object"==typeof K&&K&&K.Object===Object&&K,$f="object"==typeof self&&self&&self.Object===Object&&self,Kf=Yf||$f||Function("return this")(),Xf=Kf.Symbol,Zf=Object.prototype,Qf=Zf.hasOwnProperty,ed=Zf.toString,td=Xf?Xf.toStringTag:void 0;var rd=function(e){var t=Qf.call(e,td),r=e[td];try{e[td]=void 0}catch(e){}var n=ed.call(e);return t?e[td]=r:delete e[td],n},nd=Object.prototype.toString;var id=function(e){return nd.call(e)},od=Xf?Xf.toStringTag:void 0;var ad=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":od&&od in Object(e)?rd(e):id(e)};var ud=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var sd,cd=function(e){if(!ud(e))return!1;var t=ad(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},ld=Kf["__core-js_shared__"],fd=(sd=/[^.]+$/.exec(ld&&ld.keys&&ld.keys.IE_PROTO||""))?"Symbol(src)_1."+sd:"";var dd=function(e){return!!fd&&fd in e},pd=Function.prototype.toString;var hd=function(e){if(null!=e){try{return pd.call(e)}catch(e){}try{return e+""}catch(e){}}return""},vd=/^\[object .+?Constructor\]$/,gd=Function.prototype,md=Object.prototype,yd=gd.toString,bd=md.hasOwnProperty,_d=RegExp("^"+yd.call(bd).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var wd=function(e){return!(!ud(e)||dd(e))&&(cd(e)?_d:vd).test(hd(e))};var Sd=function(e,t){return null==e?void 0:e[t]};var kd=function(e,t){var r=Sd(e,t);return wd(r)?r:void 0},Ed=kd(Kf,"Map"),Td=kd(Object,"create");var Pd=function(){this.__data__=Td?Td(null):{},this.size=0};var Od=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Cd=Object.prototype.hasOwnProperty;var Md=function(e){var t=this.__data__;if(Td){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Cd.call(t,e)?t[e]:void 0},jd=Object.prototype.hasOwnProperty;var xd=function(e){var t=this.__data__;return Td?void 0!==t[e]:jd.call(t,e)};var Rd=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Td&&void 0===t?"__lodash_hash_undefined__":t,this};function Ad(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ad.prototype.clear=Pd,Ad.prototype.delete=Od,Ad.prototype.get=Md,Ad.prototype.has=xd,Ad.prototype.set=Rd;var Id=Ad;var Dd=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Ld=function(e,t){var r=e.__data__;return Dd(t)?r["string"==typeof t?"string":"hash"]:r.map};var Fd=function(e){var t=Ld(this,e).delete(e);return this.size-=t?1:0,t};var Nd=function(e){return Ld(this,e).get(e)};var Ud=function(e){return Ld(this,e).has(e)};var zd=function(e,t){var r=Ld(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function qd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qd.prototype.clear=function(){this.size=0,this.__data__={hash:new Id,map:new(Ed||Wf),string:new Id}},qd.prototype.delete=Fd,qd.prototype.get=Nd,qd.prototype.has=Ud,qd.prototype.set=zd;var Bd=qd;var Wd=function(e,t){var r=this.__data__;if(r instanceof Wf){var n=r.__data__;if(!Ed||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Bd(n)}return r.set(e,t),this.size=r.size,this};function Gd(e){var t=this.__data__=new Wf(e);this.size=t.size}Gd.prototype.clear=Gf,Gd.prototype.delete=Vf,Gd.prototype.get=Hf,Gd.prototype.has=Jf,Gd.prototype.set=Wd;var Vd=Gd;var Hd=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},Jd=function(){try{var e=kd(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Yd=function(e,t,r){"__proto__"==t&&Jd?Jd(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},$d=Object.prototype.hasOwnProperty;var Kd=function(e,t,r){var n=e[t];$d.call(e,t)&&Df(n,r)&&(void 0!==r||t in e)||Yd(e,t,r)};var Xd=function(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var u=t[o],s=n?n(r[u],e[u],u,r,e):void 0;void 0===s&&(s=e[u]),i?Yd(r,u,s):Kd(r,u,s)}return r};var Zd=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var Qd=function(e){return null!=e&&"object"==typeof e};var ep=function(e){return Qd(e)&&"[object Arguments]"==ad(e)},tp=Object.prototype,rp=tp.hasOwnProperty,np=tp.propertyIsEnumerable,ip=ep(function(){return arguments}())?ep:function(e){return Qd(e)&&rp.call(e,"callee")&&!np.call(e,"callee")},op=Array.isArray;var ap=function(){return!1},up=t(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?Kf.Buffer:void 0,o=(i?i.isBuffer:void 0)||ap;e.exports=o}),sp=/^(?:0|[1-9]\d*)$/;var cp=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&sp.test(e))&&-1<e&&e%1==0&&e<t};var lp=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991},fp={};fp["[object Float32Array]"]=fp["[object Float64Array]"]=fp["[object Int8Array]"]=fp["[object Int16Array]"]=fp["[object Int32Array]"]=fp["[object Uint8Array]"]=fp["[object Uint8ClampedArray]"]=fp["[object Uint16Array]"]=fp["[object Uint32Array]"]=!0,fp["[object Arguments]"]=fp["[object Array]"]=fp["[object ArrayBuffer]"]=fp["[object Boolean]"]=fp["[object DataView]"]=fp["[object Date]"]=fp["[object Error]"]=fp["[object Function]"]=fp["[object Map]"]=fp["[object Number]"]=fp["[object Object]"]=fp["[object RegExp]"]=fp["[object Set]"]=fp["[object String]"]=fp["[object WeakMap]"]=!1;var dp=function(e){return Qd(e)&&lp(e.length)&&!!fp[ad(e)]};var pp=function(t){return function(e){return t(e)}},hp=t(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&Yf.process,o=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o}),vp=hp&&hp.isTypedArray,gp=vp?pp(vp):dp,mp=Object.prototype.hasOwnProperty;var yp=function(e,t){var r=op(e),n=!r&&ip(e),i=!r&&!n&&up(e),o=!r&&!n&&!i&&gp(e),a=r||n||i||o,u=a?Zd(e.length,String):[],s=u.length;for(var c in e)!t&&!mp.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||cp(c,s))||u.push(c);return u},bp=Object.prototype;var _p=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||bp)};var wp=function(t,r){return function(e){return t(r(e))}},Sp=wp(Object.keys,Object),kp=Object.prototype.hasOwnProperty;var Ep=function(e){if(!_p(e))return Sp(e);var t=[];for(var r in Object(e))kp.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Tp=function(e){return null!=e&&lp(e.length)&&!cd(e)};var Pp=function(e){return Tp(e)?yp(e):Ep(e)};var Op=function(e,t){return e&&Xd(t,Pp(t),e)};var Cp=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},Mp=Object.prototype.hasOwnProperty;var jp=function(e){if(!ud(e))return Cp(e);var t=_p(e),r=[];for(var n in e)("constructor"!=n||!t&&Mp.call(e,n))&&r.push(n);return r};var xp=function(e){return Tp(e)?yp(e,!0):jp(e)};var Rp=function(e,t){return e&&Xd(t,xp(t),e)},Ap=t(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?Kf.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}});var Ip=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var Dp=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o};var Lp=function(){return[]},Fp=Object.prototype.propertyIsEnumerable,Np=Object.getOwnPropertySymbols,Up=Np?function(t){return null==t?[]:(t=Object(t),Dp(Np(t),function(e){return Fp.call(t,e)}))}:Lp;var zp=function(e,t){return Xd(e,Up(e),t)};var qp=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},Bp=wp(Object.getPrototypeOf,Object),Wp=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)qp(t,Up(e)),e=Bp(e);return t}:Lp;var Gp=function(e,t){return Xd(e,Wp(e),t)};var Vp=function(e,t,r){var n=t(e);return op(e)?n:qp(n,r(e))};var Hp=function(e){return Vp(e,Pp,Up)};var Jp=function(e){return Vp(e,xp,Wp)},Yp=kd(Kf,"DataView"),$p=kd(Kf,"Promise"),Kp=kd(Kf,"Set"),Xp=kd(Kf,"WeakMap"),Zp="[object Map]",Qp="[object Promise]",eh="[object Set]",th="[object WeakMap]",rh="[object DataView]",nh=hd(Yp),ih=hd(Ed),oh=hd($p),ah=hd(Kp),uh=hd(Xp),sh=ad;(Yp&&sh(new Yp(new ArrayBuffer(1)))!=rh||Ed&&sh(new Ed)!=Zp||$p&&sh($p.resolve())!=Qp||Kp&&sh(new Kp)!=eh||Xp&&sh(new Xp)!=th)&&(sh=function(e){var t=ad(e),r="[object Object]"==t?e.constructor:void 0,n=r?hd(r):"";if(n)switch(n){case nh:return rh;case ih:return Zp;case oh:return Qp;case ah:return eh;case uh:return th}return t});var ch=sh,lh=Object.prototype.hasOwnProperty;var fh=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&lh.call(e,"index")&&(r.index=e.index,r.input=e.input),r},dh=Kf.Uint8Array;var ph=function(e){var t=new e.constructor(e.byteLength);return new dh(t).set(new dh(e)),t};var hh=function(e,t){var r=t?ph(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},vh=/\w*$/;var gh=function(e){var t=new e.constructor(e.source,vh.exec(e));return t.lastIndex=e.lastIndex,t},mh=Xf?Xf.prototype:void 0,yh=mh?mh.valueOf:void 0;var bh=function(e){return yh?Object(yh.call(e)):{}};var _h=function(e,t){var r=t?ph(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var wh=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return ph(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return hh(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return _h(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return gh(e);case"[object Set]":return new n;case"[object Symbol]":return bh(e)}},Sh=Object.create,kh=function(){function r(){}return function(e){if(!ud(e))return{};if(Sh)return Sh(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();var Eh=function(e){return"function"!=typeof e.constructor||_p(e)?{}:kh(Bp(e))};var Th=function(e){return Qd(e)&&"[object Map]"==ch(e)},Ph=hp&&hp.isMap,Oh=Ph?pp(Ph):Th;var Ch=function(e){return Qd(e)&&"[object Set]"==ch(e)},Mh=hp&&hp.isSet,jh=Mh?pp(Mh):Ch,xh=1,Rh=2,Ah=4,Ih="[object Arguments]",Dh="[object Function]",Lh="[object GeneratorFunction]",Fh="[object Object]",Nh={};Nh[Ih]=Nh["[object Array]"]=Nh["[object ArrayBuffer]"]=Nh["[object DataView]"]=Nh["[object Boolean]"]=Nh["[object Date]"]=Nh["[object Float32Array]"]=Nh["[object Float64Array]"]=Nh["[object Int8Array]"]=Nh["[object Int16Array]"]=Nh["[object Int32Array]"]=Nh["[object Map]"]=Nh["[object Number]"]=Nh[Fh]=Nh["[object RegExp]"]=Nh["[object Set]"]=Nh["[object String]"]=Nh["[object Symbol]"]=Nh["[object Uint8Array]"]=Nh["[object Uint8ClampedArray]"]=Nh["[object Uint16Array]"]=Nh["[object Uint32Array]"]=!0,Nh["[object Error]"]=Nh[Dh]=Nh["[object WeakMap]"]=!1;var Uh=function r(n,i,o,e,t,a){var u,s=i&xh,c=i&Rh,l=i&Ah;if(o&&(u=t?o(n,e,t,a):o(n)),void 0!==u)return u;if(!ud(n))return n;var f=op(n);if(f){if(u=fh(n),!s)return Ip(n,u)}else{var d=ch(n),p=d==Dh||d==Lh;if(up(n))return Ap(n,s);if(d==Fh||d==Ih||p&&!t){if(u=c||p?{}:Eh(n),!s)return c?Gp(n,Rp(u,n)):zp(n,Op(u,n))}else{if(!Nh[d])return t?n:{};u=wh(n,d,s)}}a||(a=new Vd);var h=a.get(n);if(h)return h;if(a.set(n,u),jh(n))return n.forEach(function(e){u.add(r(e,i,o,e,n,a))}),u;if(Oh(n))return n.forEach(function(e,t){u.set(t,r(e,i,o,t,n,a))}),u;var v=l?c?Jp:Hp:c?keysIn:Pp,g=f?void 0:v(n);return Hd(g||n,function(e,t){g&&(e=n[t=e]),Kd(u,t,r(e,i,o,t,n,a))}),u};var zh=function(e){return"symbol"==typeof e||Qd(e)&&"[object Symbol]"==ad(e)},qh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bh=/^\w*$/;var Wh=function(e,t){if(op(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!zh(e))||Bh.test(e)||!qh.test(e)||null!=t&&e in Object(t)},Gh="Expected a function";function Vh(i,o){if("function"!=typeof i||null!=o&&"function"!=typeof o)throw new TypeError(Gh);var a=function(){var e=arguments,t=o?o.apply(this,e):e[0],r=a.cache;if(r.has(t))return r.get(t);var n=i.apply(this,e);return a.cache=r.set(t,n)||r,n};return a.cache=new(Vh.Cache||Bd),a}Vh.Cache=Bd;var Hh=Vh;var Jh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yh=/\\(\\)?/g,$h=function(e){var t=Hh(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(function(e){var i=[];return 46===e.charCodeAt(0)&&i.push(""),e.replace(Jh,function(e,t,r,n){i.push(r?n.replace(Yh,"$1"):t||e)}),i}),Kh=1/0,Xh=Xf?Xf.prototype:void 0,Zh=Xh?Xh.toString:void 0;var Qh=function e(t){if("string"==typeof t)return t;if(op(t))return Af(t,e)+"";if(zh(t))return Zh?Zh.call(t):"";var r=t+"";return"0"==r&&1/t==-Kh?"-0":r};var ev=function(e){return null==e?"":Qh(e)};var tv=function(e,t){return op(e)?e:Wh(e,t)?[e]:$h(ev(e))};var rv=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var nv=function(e){if("string"==typeof e||zh(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var iv=function(e,t){for(var r=0,n=(t=tv(t,e)).length;null!=e&&r<n;)e=e[nv(t[r++])];return r&&r==n?e:void 0};var ov=function(e,t,r){var n=-1,i=e.length;t<0&&(t=i<-t?0:i+t),(r=i<r?i:r)<0&&(r+=i),i=r<t?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o};var av=function(e,t){return t.length<2?e:iv(e,ov(t,0,-1))};var uv=function(e,t){return t=tv(t,e),null==(e=av(e,t))||delete e[nv(rv(t))]},sv=Function.prototype,cv=Object.prototype,lv=sv.toString,fv=cv.hasOwnProperty,dv=lv.call(Object);var pv=function(e){if(!Qd(e)||"[object Object]"!=ad(e))return!1;var t=Bp(e);if(null===t)return!0;var r=fv.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&lv.call(r)==dv};var hv=function(e){return pv(e)?void 0:e},vv=Xf?Xf.isConcatSpreadable:void 0;var gv=function(e){return op(e)||ip(e)||!!(vv&&e&&e[vv])};var mv=function e(t,r,n,i,o){var a=-1,u=t.length;for(n||(n=gv),o||(o=[]);++a<u;){var s=t[a];0<r&&n(s)?1<r?e(s,r-1,n,i,o):qp(o,s):i||(o[o.length]=s)}return o};var yv=function(e){return null!=e&&e.length?mv(e,1):[]};var bv=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},_v=Math.max;var wv=function(o,a,u){return a=_v(void 0===a?o.length-1:a,0),function(){for(var e=arguments,t=-1,r=_v(e.length-a,0),n=Array(r);++t<r;)n[t]=e[a+t];t=-1;for(var i=Array(a+1);++t<a;)i[t]=e[t];return i[a]=u(n),bv(o,this,i)}};var Sv=function(e){return function(){return e}};var kv=function(e){return e},Ev=Jd?function(e,t){return Jd(e,"toString",{configurable:!0,enumerable:!1,value:Sv(t),writable:!0})}:kv,Tv=Date.now;var Pv=function(r){var n=0,i=0;return function(){var e=Tv(),t=16-(e-i);if(i=e,0<t){if(800<=++n)return arguments[0]}else n=0;return r.apply(void 0,arguments)}},Ov=Pv(Ev);var Cv=function(e){return Ov(wv(e,void 0,yv),e+"")},Mv=Cv(function(t,e){var r={};if(null==t)return r;var n=!1;e=Af(e,function(e){return e=tv(e,t),n||(n=1<e.length),e}),Xd(t,Jp(t),r),n&&(r=Uh(r,7,hv));for(var i=e.length;i--;)uv(r,e[i]);return r}),jv=Object.prototype.hasOwnProperty;var xv=function(e){if(null==e)return!0;if(Tp(e)&&(op(e)||"string"==typeof e||"function"==typeof e.splice||up(e)||gp(e)||ip(e)))return!e.length;var t=ch(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(_p(e))return!Ep(e).length;for(var r in e)if(jv.call(e,r))return!1;return!0};var Rv=function(e){return Uh(e,5)};var Av=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function Iv(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function Dv(r,n,i,e){return n=n||"&",i=i||"=",null===r&&(r=void 0),"object"==typeof r?Lv(Fv(r),function(e){var t=encodeURIComponent(Iv(e))+i;return Av(r[e])?Lv(r[e],function(e){return t+encodeURIComponent(Iv(e))}).join(n):t+encodeURIComponent(Iv(r[e]))}).join(n):e?encodeURIComponent(Iv(e))+i+encodeURIComponent(Iv(r)):""}function Lv(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var Fv=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function Nv(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var u,s,c=e.length;0<a&&a<c&&(c=a);for(var l=0;l<c;++l){var f,d,p,h,v=e[l].replace(o,"%20"),g=v.indexOf(r);d=0<=g?(f=v.substr(0,g),v.substr(g+1)):(f=v,""),p=decodeURIComponent(f),h=decodeURIComponent(d),u=i,s=p,Object.prototype.hasOwnProperty.call(u,s)?Av(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i}var Uv={encode:Dv,stringify:Dv,decode:Nv,parse:Nv},zv=2147483647,qv=36,Bv=1,Wv=26,Gv=38,Vv=700,Hv=72,Jv=128,Yv="-",$v=/[^\x20-\x7E]/,Kv=/[\x2E\u3002\uFF0E\uFF61]/g,Xv={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Zv=qv-Bv,Qv=Math.floor,eg=String.fromCharCode;function tg(e){throw new RangeError(Xv[e])}function rg(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function ng(e,t,r){var n=0;for(e=r?Qv(e/Vv):e>>1,e+=Qv(e/t);Zv*Wv>>1<e;n+=qv)e=Qv(e/Zv);return Qv(n+(Zv+1)*e/(e+Gv))}function ig(e){return r=function(e){return $v.test(e)?"xn--"+function(e){var t,r,n,i,o,a,u,s,c,l,f,d,p,h,v,g=[];for(d=(e=function(e){for(var t,r,n=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}(e)).length,t=Jv,o=Hv,a=r=0;a<d;++a)(f=e[a])<128&&g.push(eg(f));for(n=i=g.length,i&&g.push(Yv);n<d;){for(u=zv,a=0;a<d;++a)t<=(f=e[a])&&f<u&&(u=f);for(u-t>Qv((zv-r)/(p=n+1))&&tg("overflow"),r+=(u-t)*p,t=u,a=0;a<d;++a)if((f=e[a])<t&&++r>zv&&tg("overflow"),f==t){for(s=r,c=qv;!(s<(l=c<=o?Bv:o+Wv<=c?Wv:c-o));c+=qv)v=s-l,h=qv-l,g.push(eg(rg(l+v%h,0))),s=Qv(v/h);g.push(eg(rg(s,0))),o=ng(r,p,n==i),r=0,++n}++r,++t}return g.join("")}(e):e},n=(t=e).split("@"),i="",1<n.length&&(i=n[0]+"@",t=n[1]),i+function(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}((t=t.replace(Kv,".")).split("."),r).join(".");var t,r,n,i}var og=[],ag=[],ug="undefined"!=typeof Uint8Array?Uint8Array:Array,sg=!1;function cg(){sg=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)og[t]=e[t],ag[e.charCodeAt(t)]=t;ag["-".charCodeAt(0)]=62,ag["_".charCodeAt(0)]=63}function lg(e,t,r){for(var n,i,o=[],a=t;a<r;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(og[(i=n)>>18&63]+og[i>>12&63]+og[i>>6&63]+og[63&i]);return o.join("")}function fg(e){var t;sg||cg();for(var r=e.length,n=r%3,i="",o=[],a=0,u=r-n;a<u;a+=16383)o.push(lg(e,a,u<a+16383?u:a+16383));return 1===n?(t=e[r-1],i+=og[t>>2],i+=og[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=og[t>>10],i+=og[t>>4&63],i+=og[t<<2&63],i+="="),o.push(i),o.join("")}function dg(e,t,r,n,i){var o,a,u=8*i-n-1,s=(1<<u)-1,c=s>>1,l=-7,f=r?i-1:0,d=r?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-l)-1,p>>=-l,l+=u;0<l;o=256*o+e[t+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;0<l;a=256*a+e[t+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)}function pg(e,t,r,n,i,o){var a,u,s,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,h=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),2<=(t+=1<=a+f?d/s:d*Math.pow(2,1-f))*s&&(a++,s/=2),l<=a+f?(u=0,a=l):1<=a+f?(u=(t*s-1)*Math.pow(2,i),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));8<=i;e[r+p]=255&u,p+=h,u/=256,i-=8);for(a=a<<i|u,c+=i;0<c;e[r+p]=255&a,p+=h,a/=256,c-=8);e[r+p-h]|=128*v}var hg={}.toString,vg=Array.isArray||function(e){return"[object Array]"==hg.call(e)};function gg(){return yg.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function mg(e,t){if(gg()<t)throw new RangeError("Invalid typed array length");return yg.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=yg.prototype:(null===e&&(e=new yg(t)),e.length=t),e}function yg(e,t,r){if(!(yg.TYPED_ARRAY_SUPPORT||this instanceof yg))return new yg(e,t,r);if("number"!=typeof e)return bg(this,e,t,r);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return wg(this,e)}function bg(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);yg.TYPED_ARRAY_SUPPORT?(e=t).__proto__=yg.prototype:e=Sg(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!yg.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|Tg(t,r),i=(e=mg(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(Eg(t)){var r=0|kg(t.length);return 0===(e=mg(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?mg(e,0):Sg(e,t);if("Buffer"===t.type&&vg(t.data))return Sg(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function _g(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function wg(e,t){if(_g(t),e=mg(e,t<0?0:0|kg(t)),!yg.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function Sg(e,t){var r=t.length<0?0:0|kg(t.length);e=mg(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function kg(e){if(e>=gg())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+gg().toString(16)+" bytes");return 0|e}function Eg(e){return!(null==e||!e._isBuffer)}function Tg(e,t){if(Eg(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Jg(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Yg(e).length;default:if(n)return Jg(e).length;t=(""+t).toLowerCase(),n=!0}}function Pg(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Og(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=yg.from(t,n)),Eg(t))return 0===t.length?-1:Cg(e,t,r,n,i);if("number"==typeof t)return t&=255,yg.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Cg(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Cg(e,t,r,n,i){var o,a=1,u=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;u/=a=2,s/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=r;o<u;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===s)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(u<r+s&&(r=u-s),o=r;0<=o;o--){for(var f=!0,d=0;d<s;d++)if(c(e,o+d)!==c(t,d)){f=!1;break}if(f)return o}return-1}function Mg(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?i<(n=Number(n))&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<n&&(n=o/2);for(var a=0;a<n;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[r+a]=u}return a}function jg(e,t,r,n){return $g(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function xg(e,t,r){return 0===t&&r===e.length?fg(e):fg(e.slice(t,r))}function Rg(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,u,s,c=e[i],l=null,f=239<c?4:223<c?3:191<c?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&127<(s=(31&c)<<6|63&o)&&(l=s);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(s=(15&c)<<12|(63&o)<<6|63&a)&&(s<55296||57343<s)&&(l=s);break;case 4:o=e[i+1],a=e[i+2],u=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&u)&&65535<(s=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&u)&&s<1114112&&(l=s)}null===l?(l=65533,f=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=Ag)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Ag));return r}(n)}yg.TYPED_ARRAY_SUPPORT=void 0===Ku.TYPED_ARRAY_SUPPORT||Ku.TYPED_ARRAY_SUPPORT,yg.poolSize=8192,yg._augment=function(e){return e.__proto__=yg.prototype,e},yg.from=function(e,t,r){return bg(null,e,t,r)},yg.TYPED_ARRAY_SUPPORT&&(yg.prototype.__proto__=Uint8Array.prototype,yg.__proto__=Uint8Array),yg.alloc=function(e,t,r){return n=null,o=t,a=r,_g(i=e),i<=0?mg(n,i):void 0!==o?"string"==typeof a?mg(n,i).fill(o,a):mg(n,i).fill(o):mg(n,i);var n,i,o,a},yg.allocUnsafe=function(e){return wg(null,e)},yg.allocUnsafeSlow=function(e){return wg(null,e)},yg.isBuffer=Kg,yg.compare=function(e,t){if(!Eg(e)||!Eg(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},yg.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},yg.concat=function(e,t){if(!vg(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return yg.alloc(0);var r;if(void 0===t)for(r=t=0;r<e.length;++r)t+=e[r].length;var n=yg.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!Eg(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},yg.byteLength=Tg,yg.prototype._isBuffer=!0,yg.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Pg(this,t,t+1);return this},yg.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Pg(this,t,t+3),Pg(this,t+1,t+2);return this},yg.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Pg(this,t,t+7),Pg(this,t+1,t+6),Pg(this,t+2,t+5),Pg(this,t+3,t+4);return this},yg.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Rg(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Lg(this,t,r);case"utf8":case"utf-8":return Rg(this,t,r);case"ascii":return Ig(this,t,r);case"latin1":case"binary":return Dg(this,t,r);case"base64":return xg(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fg(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},yg.prototype.equals=function(e){if(!Eg(e))throw new TypeError("Argument must be a Buffer");return this===e||0===yg.compare(this,e)},yg.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},yg.prototype.compare=function(e,t,r,n,i){if(!Eg(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),u=Math.min(o,a),s=this.slice(n,i),c=e.slice(t,r),l=0;l<u;++l)if(s[l]!==c[l]){o=s[l],a=c[l];break}return o<a?-1:a<o?1:0},yg.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},yg.prototype.indexOf=function(e,t,r){return Og(this,e,t,r,!0)},yg.prototype.lastIndexOf=function(e,t,r){return Og(this,e,t,r,!1)},yg.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o,a,u,s,c,l,f,d,p,h=!1;;)switch(n){case"hex":return Mg(this,e,t,r);case"utf8":case"utf-8":return d=t,p=r,$g(Jg(e,(f=this).length-d),f,d,p);case"ascii":return jg(this,e,t,r);case"latin1":case"binary":return jg(this,e,t,r);case"base64":return s=this,c=t,l=r,$g(Yg(e),s,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,u=r,$g(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,(o=this).length-a),o,a,u);default:if(h)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),h=!0}},yg.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ag=4096;function Ig(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function Dg(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function Lg(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||n<r)&&(r=n);for(var i="",o=t;o<r;++o)i+=Hg(e[o]);return i}function Fg(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function Ng(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function Ug(e,t,r,n,i,o){if(!Eg(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function zg(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function qg(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function Bg(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Wg(e,t,r,n,i){return i||Bg(e,0,r,4),pg(e,t,r,n,23,4),r+4}function Gg(e,t,r,n,i){return i||Bg(e,0,r,8),pg(e,t,r,n,52,8),r+8}yg.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),yg.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=yg.prototype;else{var i=t-e;r=new yg(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},yg.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||Ng(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},yg.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||Ng(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},yg.prototype.readUInt8=function(e,t){return t||Ng(e,1,this.length),this[e]},yg.prototype.readUInt16LE=function(e,t){return t||Ng(e,2,this.length),this[e]|this[e+1]<<8},yg.prototype.readUInt16BE=function(e,t){return t||Ng(e,2,this.length),this[e]<<8|this[e+1]},yg.prototype.readUInt32LE=function(e,t){return t||Ng(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},yg.prototype.readUInt32BE=function(e,t){return t||Ng(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},yg.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||Ng(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},yg.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||Ng(e,t,this.length);for(var n=t,i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},yg.prototype.readInt8=function(e,t){return t||Ng(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},yg.prototype.readInt16LE=function(e,t){t||Ng(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},yg.prototype.readInt16BE=function(e,t){t||Ng(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},yg.prototype.readInt32LE=function(e,t){return t||Ng(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},yg.prototype.readInt32BE=function(e,t){return t||Ng(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},yg.prototype.readFloatLE=function(e,t){return t||Ng(e,4,this.length),dg(this,e,!0,23,4)},yg.prototype.readFloatBE=function(e,t){return t||Ng(e,4,this.length),dg(this,e,!1,23,4)},yg.prototype.readDoubleLE=function(e,t){return t||Ng(e,8,this.length),dg(this,e,!0,52,8)},yg.prototype.readDoubleBE=function(e,t){return t||Ng(e,8,this.length),dg(this,e,!1,52,8)},yg.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||Ug(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},yg.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||Ug(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+r},yg.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||Ug(this,e,t,1,255,0),yg.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},yg.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||Ug(this,e,t,2,65535,0),yg.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):zg(this,e,t,!0),t+2},yg.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||Ug(this,e,t,2,65535,0),yg.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):zg(this,e,t,!1),t+2},yg.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||Ug(this,e,t,4,4294967295,0),yg.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):qg(this,e,t,!0),t+4},yg.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||Ug(this,e,t,4,4294967295,0),yg.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):qg(this,e,t,!1),t+4},yg.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Ug(this,e,t,r,i-1,-i)}var o=0,a=1,u=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+r},yg.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Ug(this,e,t,r,i-1,-i)}var o=r-1,a=1,u=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+r},yg.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||Ug(this,e,t,1,127,-128),yg.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},yg.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||Ug(this,e,t,2,32767,-32768),yg.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):zg(this,e,t,!0),t+2},yg.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||Ug(this,e,t,2,32767,-32768),yg.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):zg(this,e,t,!1),t+2},yg.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||Ug(this,e,t,4,2147483647,-2147483648),yg.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):qg(this,e,t,!0),t+4},yg.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||Ug(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),yg.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):qg(this,e,t,!1),t+4},yg.prototype.writeFloatLE=function(e,t,r){return Wg(this,e,t,!0,r)},yg.prototype.writeFloatBE=function(e,t,r){return Wg(this,e,t,!1,r)},yg.prototype.writeDoubleLE=function(e,t,r){return Gg(this,e,t,!0,r)},yg.prototype.writeDoubleBE=function(e,t,r){return Gg(this,e,t,!1,r)},yg.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;0<=i;--i)e[i+t]=this[i+r];else if(o<1e3||!yg.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},yg.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!yg.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=Eg(e)?e:Jg(new yg(e,n).toString()),u=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%u]}return this};var Vg=/[^+\/0-9A-Za-z-_]/g;function Hg(e){return e<16?"0"+e.toString(16):e.toString(16)}function Jg(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Yg(e){return function(e){var t,r,n,i,o,a;sg||cg();var u=e.length;if(0<u%4)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[u-2]?2:"="===e[u-1]?1:0,a=new ug(3*u/4-o),n=0<o?u-4:u;var s=0;for(r=t=0;t<n;t+=4,r+=3)i=ag[e.charCodeAt(t)]<<18|ag[e.charCodeAt(t+1)]<<12|ag[e.charCodeAt(t+2)]<<6|ag[e.charCodeAt(t+3)],a[s++]=i>>16&255,a[s++]=i>>8&255,a[s++]=255&i;return 2===o?(i=ag[e.charCodeAt(t)]<<2|ag[e.charCodeAt(t+1)]>>4,a[s++]=255&i):1===o&&(i=ag[e.charCodeAt(t)]<<10|ag[e.charCodeAt(t+1)]<<4|ag[e.charCodeAt(t+2)]>>2,a[s++]=i>>8&255,a[s++]=255&i),a}(function(e){var t;if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(Vg,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $g(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Kg(e){return null!=e&&(!!e._isBuffer||Xg(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&Xg(t.slice(0,0)));var t}function Xg(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var Zg="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},Qg=/%[sdj%]/g;function em(e){if(!gm(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(om(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(Qg,function(e){if("%%"===e)return"%";if(i<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<i;a=n[++r])pm(a)||!bm(a)?o+=" "+a:o+=" "+om(a);return o}function tm(e,t){if(mm(Ku.process))return function(){return tm(e,t).apply(this,arguments)};var r=!1;return function(){return r||(console.error(t),r=!0),e.apply(this,arguments)}}var rm,nm={};function im(t){if(mm(rm)&&(rm=""),t=t.toUpperCase(),!nm[t])if(new RegExp("\\b"+t+"\\b","i").test(rm)){nm[t]=function(){var e=em.apply(null,arguments);console.error("%s %d: %s",t,0,e)}}else nm[t]=function(){};return nm[t]}function om(e,t){var r={seen:[],stylize:um};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),dm(t)?r.showHidden=t:t&&Pm(r,t),mm(r.showHidden)&&(r.showHidden=!1),mm(r.depth)&&(r.depth=2),mm(r.colors)&&(r.colors=!1),mm(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=am),sm(r,e,r.depth)}function am(e,t){var r=om.styles[t];return r?"["+om.colors[r][0]+"m"+e+"["+om.colors[r][1]+"m":e}function um(e,t){return e}function sm(t,r,n){if(t.customInspect&&r&&Sm(r.inspect)&&r.inspect!==om&&(!r.constructor||r.constructor.prototype!==r)){var e=r.inspect(n,t);return gm(e)||(e=sm(t,e,n)),e}var i=function(e,t){if(mm(t))return e.stylize("undefined","undefined");if(gm(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(vm(t))return e.stylize(""+t,"number");if(dm(t))return e.stylize(""+t,"boolean");if(pm(t))return e.stylize("null","null")}(t,r);if(i)return i;var o,a=Object.keys(r),u=(o={},a.forEach(function(e,t){o[e]=!0}),o);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),wm(r)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return cm(r);if(0===a.length){if(Sm(r)){var s=r.name?": "+r.name:"";return t.stylize("[Function"+s+"]","special")}if(ym(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(_m(r))return t.stylize(Date.prototype.toString.call(r),"date");if(wm(r))return cm(r)}var c,l="",f=!1,d=["{","}"];(fm(r)&&(f=!0,d=["[","]"]),Sm(r))&&(l=" [Function"+(r.name?": "+r.name:"")+"]");return ym(r)&&(l=" "+RegExp.prototype.toString.call(r)),_m(r)&&(l=" "+Date.prototype.toUTCString.call(r)),wm(r)&&(l=" "+cm(r)),0!==a.length||f&&0!=r.length?n<0?ym(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=f?function(t,r,n,i,e){for(var o=[],a=0,u=r.length;a<u;++a)Om(r,String(a))?o.push(lm(t,r,n,i,String(a),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(lm(t,r,n,i,e,!0))}),o}(t,r,n,u,a):a.map(function(e){return lm(t,r,n,u,e,f)}),t.seen.pop(),function(e,t,r){if(60<e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,l,d)):d[0]+l+d[1]}function cm(e){return"["+Error.prototype.toString.call(e)+"]"}function lm(e,t,r,n,i,o){var a,u,s;if((s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(u=e.stylize("[Setter]","special")),Om(n,i)||(a="["+i+"]"),u||(e.seen.indexOf(s.value)<0?-1<(u=pm(r)?sm(e,s.value,null):sm(e,s.value,r-1)).indexOf("\n")&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),mm(a)){if(o&&i.match(/^\d+$/))return u;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+u}function fm(e){return Array.isArray(e)}function dm(e){return"boolean"==typeof e}function pm(e){return null===e}function hm(e){return null==e}function vm(e){return"number"==typeof e}function gm(e){return"string"==typeof e}function mm(e){return void 0===e}function ym(e){return bm(e)&&"[object RegExp]"===km(e)}function bm(e){return"object"==typeof e&&null!==e}function _m(e){return bm(e)&&"[object Date]"===km(e)}function wm(e){return bm(e)&&("[object Error]"===km(e)||e instanceof Error)}function Sm(e){return"function"==typeof e}function km(e){return Object.prototype.toString.call(e)}function Em(e){return e<10?"0"+e.toString(10):e.toString(10)}om.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},om.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Tm=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Pm(e,t){if(!t||!bm(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Om(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Cm={inherits:Zg,_extend:Pm,log:function(){var e,t;console.log("%s - %s",(e=new Date,t=[Em(e.getHours()),Em(e.getMinutes()),Em(e.getSeconds())].join(":"),[e.getDate(),Tm[e.getMonth()],t].join(" ")),em.apply(null,arguments))},isBuffer:function(e){return Kg(e)},isPrimitive:function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},isFunction:Sm,isError:wm,isDate:_m,isObject:bm,isRegExp:ym,isUndefined:mm,isSymbol:function(e){return"symbol"==typeof e},isString:gm,isNumber:vm,isNullOrUndefined:hm,isNull:pm,isBoolean:dm,isArray:fm,inspect:om,deprecate:tm,format:em,debuglog:im},Mm={parse:Gm,resolve:function(e,t){return Gm(e,!1,!0).resolve(t)},resolveObject:function(e,t){return e?Gm(e,!1,!0).resolveObject(t):t},format:function(e){gm(e)&&(e=Vm({},e));return Hm(e)},Url:jm};function jm(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var xm=/^([a-z0-9.+-]+:)/i,Rm=/:[0-9]*$/,Am=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Im=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Dm=["'"].concat(Im),Lm=["%","/","?",";","#"].concat(Dm),Fm=["/","?","#"],Nm=255,Um=/^[+a-z0-9A-Z_-]{0,63}$/,zm=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,qm={javascript:!0,"javascript:":!0},Bm={javascript:!0,"javascript:":!0},Wm={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Gm(e,t,r){if(e&&bm(e)&&e instanceof jm)return e;var n=new jm;return n.parse(e,t,r),n}function Vm(e,t,r,n){if(!gm(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=-1!==i&&i<t.indexOf("#")?"?":"#",a=t.split(o);a[0]=a[0].replace(/\\/g,"/");var u=t=a.join(o);if(u=u.trim(),!n&&1===t.split("#").length){var s=Am.exec(u);if(s)return e.path=u,e.href=u,e.pathname=s[1],s[2]?(e.search=s[2],e.query=r?Nv(e.search.substr(1)):e.search.substr(1)):r&&(e.search="",e.query={}),e}var c,l,f,d,p=xm.exec(u);if(p){var h=(p=p[0]).toLowerCase();e.protocol=h,u=u.substr(p.length)}if(n||p||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var v="//"===u.substr(0,2);!v||p&&Bm[p]||(u=u.substr(2),e.slashes=!0)}if(!Bm[p]&&(v||p&&!Wm[p])){var g,m,y=-1;for(c=0;c<Fm.length;c++)-1!==(l=u.indexOf(Fm[c]))&&(-1===y||l<y)&&(y=l);for(-1!==(m=-1===y?u.lastIndexOf("@"):u.lastIndexOf("@",y))&&(g=u.slice(0,m),u=u.slice(m+1),e.auth=decodeURIComponent(g)),y=-1,c=0;c<Lm.length;c++)-1!==(l=u.indexOf(Lm[c]))&&(-1===y||l<y)&&(y=l);-1===y&&(y=u.length),e.host=u.slice(0,y),u=u.slice(y),Jm(e),e.hostname=e.hostname||"";var b="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!b){var _=e.hostname.split(/\./);for(c=0,f=_.length;c<f;c++){var w=_[c];if(w&&!w.match(Um)){for(var S="",k=0,E=w.length;k<E;k++)127<w.charCodeAt(k)?S+="x":S+=w[k];if(!S.match(Um)){var T=_.slice(0,c),P=_.slice(c+1),O=w.match(zm);O&&(T.push(O[1]),P.unshift(O[2])),P.length&&(u="/"+P.join(".")+u),e.hostname=T.join(".");break}}}}e.hostname.length>Nm?e.hostname="":e.hostname=e.hostname.toLowerCase(),b||(e.hostname=ig(e.hostname)),d=e.port?":"+e.port:"";var C=e.hostname||"";e.host=C+d,e.href+=e.host,b&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!qm[h])for(c=0,f=Dm.length;c<f;c++){var M=Dm[c];if(-1!==u.indexOf(M)){var j=encodeURIComponent(M);j===M&&(j=escape(M)),u=u.split(M).join(j)}}var x=u.indexOf("#");-1!==x&&(e.hash=u.substr(x),u=u.slice(0,x));var R=u.indexOf("?");if(-1!==R?(e.search=u.substr(R),e.query=u.substr(R+1),r&&(e.query=Nv(e.query)),u=u.slice(0,R)):r&&(e.search="",e.query={}),u&&(e.pathname=u),Wm[h]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){d=e.pathname||"";var A=e.search||"";e.path=d+A}return e.href=Hm(e),e}function Hm(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",o=!1,a="";e.host?o=t+e.host:e.hostname&&(o=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&bm(e.query)&&Object.keys(e.query).length&&(a=Dv(e.query));var u=e.search||a&&"?"+a||"";return r&&":"!==r.substr(-1)&&(r+=":"),e.slashes||(!r||Wm[r])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),u&&"?"!==u.charAt(0)&&(u="?"+u),r+o+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(u=u.replace("#","%23"))+i}function Jm(e){var t=e.host,r=Rm.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}jm.prototype.parse=function(e,t,r){return Vm(this,e,t,r)},jm.prototype.format=function(){return Hm(this)},jm.prototype.resolve=function(e){return this.resolveObject(Gm(e,!1,!0)).format()},jm.prototype.resolveObject=function(e){if(gm(e)){var t=new jm;t.parse(e,!1,!0),e=t}for(var r,n=new jm,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),s=0;s<u.length;s++){var c=u[s];"protocol"!==c&&(n[c]=e[c])}return Wm[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!Wm[e.protocol]){for(var l=Object.keys(e),f=0;f<l.length;f++){var d=l[f];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||Bm[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",h=n.search||"";n.path=p+h}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v,g=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=m||g||n.host&&e.pathname,b=y,_=n.pathname&&n.pathname.split("/")||[],w=n.protocol&&!Wm[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],w&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),y=y&&(""===r[0]||""===_[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,_=r;else if(r.length)_||(_=[]),_.pop(),_=_.concat(r),n.search=e.search,n.query=e.query;else if(!hm(e.search))return w&&(n.hostname=n.host=_.shift(),(v=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),n.search=e.search,n.query=e.query,pm(n.pathname)&&pm(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=_.slice(-1)[0],k=(n.host||e.host||1<_.length)&&("."===S||".."===S)||""===S,E=0,T=_.length;0<=T;T--)"."===(S=_[T])?_.splice(T,1):".."===S?(_.splice(T,1),E++):E&&(_.splice(T,1),E--);if(!y&&!b)for(;E--;E)_.unshift("..");!y||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),k&&"/"!==_.join("/").substr(-1)&&_.push("");var P=""===_[0]||_[0]&&"/"===_[0].charAt(0);return w&&(n.hostname=n.host=P?"":_.length?_.shift():"",(v=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),(y=y||n.host&&_.length)&&!P&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),pm(n.pathname)&&pm(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},jm.prototype.parseHost=function(){return Jm(this)};var Ym={version:"1.0.0",encode:function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decode:function(e){return new yg(e=(e+=Array(5-e.length%4).join("=")).replace(/\-/g,"+").replace(/\_/g,"/"),"base64")},validate:function(e){return/^[A-Za-z0-9\-_]+$/.test(e)}},$m=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase64url=i,t.toBase64Url=o,t.encode=a,t.decode=u,t.validate=s;var r,n=(r=Ym)&&r.__esModule?r:{default:r};function i(e){return n.default.decode(e).toString()}function o(e){var t=e;return Kg(t)||(t=yg.from(t)),n.default.encode(t)}function a(e){return o(e)}function u(e){return i(e)}function s(e){return n.default.validate(e)}t.default={fromBase64url:i,toBase64Url:o,encode:a,decode:u,validate:s}});e($m);$m.fromBase64url,$m.toBase64Url,$m.encode,$m.decode,$m.validate;var Km=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,l=(r=Mf)&&r.__esModule?r:{default:r};t.default=function(e,t,r){if(!e)throw new Error("`fn` must be a function");if(!t)throw new Error("`wait` is required");if(!(r=r||{}).maxWait)throw new Error("`options.maxWait` is required");if(!r.maxCalls)throw new Error("`options.maxCalls` is required");var n=r,i=n.maxCalls,o=n.maxWait,a=0,u=void 0,s=void 0;return function(){a+=1,clearTimeout(s),s=setTimeout(function(){return c()},t),u||(u=setTimeout(function(){return c()},o)),i<=a&&(0,l.default)(c,this,[])};function c(){clearTimeout(s),s=null,clearTimeout(u),u=null,(a=0,l.default)(e,this,[])}}});e(Km);var Xm=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.forEach(function(e){if(!t[e])throw new Error("missing required property "+e+" from "+t)})}});e(Xm);var Zm=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};t.default=function(){var r=this;this.promise=new n.default(function(e,t){r.resolve=e,r.reject=t})}});e(Zm);var Qm=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,r){if(t&&r)return{dataType:{set:function(e){return e instanceof t?(e.parent=this,{val:e,type:r}):{val:e?new t(e,{parent:this}):void 0,type:r}},compare:function(e,t){return e===t},onChange:function(e,t,r){t&&this.stopListening(t,"all",this._getCachedEventBubblingHandler(r)),e&&this.listenTo(e,"all",this._getCachedEventBubblingHandler(r))}},prop:{test:function(e){return e&&(e.parent=this),!1},type:r}};throw new Error("missing parameter for makeStateDataType")}});e(Qm);var ey=t(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}});e(ey),Xs(Xs.S+Xs.F*!Is,"Object",{defineProperty:Js.f});var ty=Bs.Object,ry=function(e,t,r){return ty.defineProperty(e,t,r)},ny=t(function(e){e.exports={default:ry,__esModule:!0}});e(ny);var iy=t(function(e,t){t.__esModule=!0;var r,i=(r=ny)&&r.__esModule?r:{default:r};t.default=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}()});e(iy);var oy=Array.isArray||function(e){return"Array"==ks(e)},ay=Dc("species"),uy=function(e,t){return oy(r=e)&&("function"!=typeof(n=r.constructor)||n!==Array&&!oy(n.prototype)||(n=void 0),Ms(n)&&null===(n=n[ay])&&(n=void 0)),new(void 0===n?Array:n)(t);var r,n},sy=function(f,e){var d=1==f,p=2==f,h=3==f,v=4==f,g=6==f,m=5==f||g,y=e||uy;return function(e,t,r){for(var n,i,o=qc(e),a=Es(o),u=Gs(t,r,3),s=pc(a.length),c=0,l=d?y(e,s):p?y(e,0):void 0;c<s;c++)if((m||c in a)&&(i=u(n=a[c],c,o),f))if(d)l[c]=i;else if(i)switch(f){case 3:return!0;case 5:return n;case 6:return c;case 2:l.push(n)}else if(v)return!1;return g?-1:h||v?v:l}},cy=t(function(e){var r=bc("meta"),t=Js.f,n=0,i=Object.isExtensible||function(){return!0},o=!As(function(){return i(Object.preventExtensions({}))}),a=function(e){t(e,r,{value:{i:"O"+ ++n,w:{}}})},u=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!Ms(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Rs(e,r)){if(!i(e))return"F";if(!t)return"E";a(e)}return e[r].i},getWeak:function(e,t){if(!Rs(e,r)){if(!i(e))return!0;if(!t)return!1;a(e)}return e[r].w},onFreeze:function(e){return o&&u.NEED&&i(e)&&!Rs(e,r)&&a(e),e}}}),ly=(cy.KEY,cy.NEED,cy.fastKey,cy.getWeak,cy.onFreeze,function(e,t){if(!Ms(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}),fy=cy.getWeak,dy=sy(5),py=sy(6),hy=0,vy=function(e){return e._l||(e._l=new gy)},gy=function(){this.a=[]},my=function(e,t){return dy(e.a,function(e){return e[0]===t})};gy.prototype={get:function(e){var t=my(this,e);if(t)return t[1]},has:function(e){return!!my(this,e)},set:function(e,t){var r=my(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(t){var e=py(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var yy={getConstructor:function(e,r,n,i){var o=e(function(e,t){ll(e,o,r,"_i"),e._t=r,e._i=hy++,e._l=void 0,null!=t&&ml(t,n,e[i],e)});return Wl(o.prototype,{delete:function(e){if(!Ms(e))return!1;var t=fy(e);return!0===t?vy(ly(this,r)).delete(e):t&&Rs(t,this._i)&&delete t[this._i]},has:function(e){if(!Ms(e))return!1;var t=fy(e);return!0===t?vy(ly(this,r)).has(e):t&&Rs(t,this._i)}}),o},def:function(e,t,r){var n=fy(Vs(t),!0);return!0===n?vy(e).set(t,r):n[e._i]=r,e},ufstore:vy},by=Js.f,_y=sy(0),wy=function(r,e,t,n,i,o){var a=Ds[r],u=a,s=i?"set":"add",c=u&&u.prototype,l={};return Is&&"function"==typeof u&&(o||c.forEach&&!As(function(){(new u).entries().next()}))?(u=e(function(e,t){ll(e,u,r,"_c"),e._c=new a,null!=t&&ml(t,i,e[s],e)}),_y("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(n){var i="add"==n||"set"==n;n in c&&(!o||"clear"!=n)&&Ys(u.prototype,n,function(e,t){if(ll(this,u,n),!i&&o&&!Ms(e))return"get"==n&&void 0;var r=this._c[n](0===e?0:e,t);return i?this:r})}),o||by(u.prototype,"size",{get:function(){return this._c.size}})):(u=n.getConstructor(e,r,i,s),Wl(u.prototype,t),cy.NEED=!0),Nc(u,r),l[r]=u,Xs(Xs.G+Xs.W+Xs.F,l),o||n.setStrong(u,r,i),u},Sy=(t(function(e){var o,t=sy(0),r="WeakMap",n=cy.getWeak,a=Object.isExtensible,i=yy.ufstore,u={},s=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},c={get:function(e){if(Ms(e)){var t=n(e);return!0===t?i(ly(this,r)).get(e):t?t[this._i]:void 0}},set:function(e,t){return yy.def(ly(this,r),e,t)}},l=e.exports=wy(r,s,c,yy,!0,!0);As(function(){return 7!=(new l).set((Object.freeze||Object)(u),7).get(u)})&&(o=yy.getConstructor(s,r),kf(o.prototype,c),cy.NEED=!0,t(["delete","has","get","set"],function(n){var e=l.prototype,i=e[n];lc(e,n,function(e,t){if(!Ms(e)||a(e))return i.call(this,e,t);this._f||(this._f=new o);var r=this._f[n](e,t);return"set"==n?this:r})}))}),function(e){Xs(Xs.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})});Sy("WeakMap");var ky=function(e){Xs(Xs.S,e,{from:function(e){var t,r,n,i,o=arguments[1];return Ws(this),(t=void 0!==o)&&Ws(o),null==e?new this:(r=[],t?(n=0,i=Gs(o,arguments[2],2),ml(e,!1,function(e){r.push(i(e,n++))})):ml(e,!1,r.push,r),new this(r))}})};ky("WeakMap");var Ey=Bs.WeakMap,Ty=t(function(e){e.exports={default:Ey,__esModule:!0}});e(Ty);var Py=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(ey),l=r(iy),f=r(Ty),d=r(Cm);function r(e){return e&&e.__esModule?e:{default:e}}function p(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(e.add)e.add.apply(e,r);else if(e.set)e.set.apply(e,r);else{if(!e.push)throw new TypeError("Could not determine how to insert into the specified container");e.push.apply(e,r)}}t.default=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.shift(),u=new f.default,s=new f.default,c=1<r.length?e.apply(void 0,r):r[0],o="("+[i.name].concat(r.map(function(e){return e.name})).join(", ")+")";return function(){function n(){(0,a.default)(this,n);for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];u.set(this,new(Function.prototype.bind.apply(i,[null].concat(t)))),s.set(this,0)}return(0,l.default)(n,[{key:"add",value:function(){return this.set.apply(this,arguments)}},{key:"clear",value:function(){var e=u.get(this).clear();return s.set(this,0),e}},{key:"delete",value:function(e){for(var t=u.get(this),r=arguments.length,n=Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t.delete(e);var o=t.get(e);if(!o)return!1;var a=o.delete.apply(o,n);return a&&s.set(this,s.get(this)-1),0===o.size&&t.delete(e),a}},{key:"get",value:function(e){var t=u.get(this);if(!t.get)return t;for(var r=arguments.length,n=Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t.get(e);var o=t.get(e);return o?o.get?o.get.apply(o,n):o:void 0}},{key:"has",value:function(){return void 0!==this.get.apply(this,arguments)}},{key:"set",value:function(){for(var e=!1,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];this.has.apply(this,r)&&(e=!0);var i=u.get(this),o=r.shift();if(!i.get)return p.apply(void 0,[i,o].concat(r)),this;var a=i.get(o);if(!a){if(!c)return p.apply(void 0,[i,o].concat(r)),this;p(i,o,a=new c)}return p.apply(void 0,[a].concat(r)),e||s.set(this,s.get(this)+1),this}},{key:"inspect",value:function(){return"Container"+o+" {\n  "+d.default.inspect(u.get(this),{depth:null})+"\n}"}},{key:"size",get:function(){return s.get(this)}}]),n}()}});e(Py);var Oy={f:Dc},Cy=Oy.f("iterator"),My=t(function(e){e.exports={default:Cy,__esModule:!0}});e(My);var jy=Js.f,xy=function(e){var t=Bs.Symbol||(Bs.Symbol={});"_"==e.charAt(0)||e in t||jy(t,e,{value:Oy.f(e)})},Ry=Tc.concat("length","prototype"),Ay={f:Object.getOwnPropertyNames||function(e){return Ec(e,Ry)}},Iy=Ay.f,Dy={}.toString,Ly="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Fy={f:function(e){return Ly&&"[object Window]"==Dy.call(e)?function(e){try{return Iy(e)}catch(e){return Ly.slice()}}(e):Iy(Ps(e))}},Ny=cy.KEY,Uy=qs.f,zy=Js.f,qy=Fy.f,By=Ds.Symbol,Wy=Ds.JSON,Gy=Wy&&Wy.stringify,Vy="prototype",Hy=Dc("_hidden"),Jy=Dc("toPrimitive"),Yy={}.propertyIsEnumerable,$y=gc("symbol-registry"),Ky=gc("symbols"),Xy=gc("op-symbols"),Zy=Object[Vy],Qy="function"==typeof By,eb=Ds.QObject,tb=!eb||!eb[Vy]||!eb[Vy].findChild,rb=Is&&As(function(){return 7!=Ic(zy({},"a",{get:function(){return zy(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=Uy(Zy,t);n&&delete Zy[t],zy(e,t,r),n&&e!==Zy&&zy(Zy,t,n)}:zy,nb=function(e){var t=Ky[e]=Ic(By[Vy]);return t._k=e,t},ib=Qy&&"symbol"==typeof By.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof By},ob=function(e,t,r){return e===Zy&&ob(Xy,t,r),Vs(e),t=js(t,!0),Vs(r),Rs(Ky,t)?(r.enumerable?(Rs(e,Hy)&&e[Hy][t]&&(e[Hy][t]=!1),r=Ic(r,{enumerable:Cs(0,!1)})):(Rs(e,Hy)||zy(e,Hy,Cs(1,{})),e[Hy][t]=!0),rb(e,t,r)):zy(e,t,r)},ab=function(e,t){Vs(e);for(var r,n=function(e){var t=Pc(e),r=wf.f;if(r)for(var n,i=r(e),o=Os.f,a=0;i.length>a;)o.call(e,n=i[a++])&&t.push(n);return t}(t=Ps(t)),i=0,o=n.length;i<o;)ob(e,r=n[i++],t[r]);return e},ub=function(e){var t=Yy.call(this,e=js(e,!0));return!(this===Zy&&Rs(Ky,e)&&!Rs(Xy,e))&&(!(t||!Rs(this,e)||!Rs(Ky,e)||Rs(this,Hy)&&this[Hy][e])||t)},sb=function(e,t){if(e=Ps(e),t=js(t,!0),e!==Zy||!Rs(Ky,t)||Rs(Xy,t)){var r=Uy(e,t);return!r||!Rs(Ky,t)||Rs(e,Hy)&&e[Hy][t]||(r.enumerable=!0),r}},cb=function(e){for(var t,r=qy(Ps(e)),n=[],i=0;r.length>i;)Rs(Ky,t=r[i++])||t==Hy||t==Ny||n.push(t);return n},lb=function(e){for(var t,r=e===Zy,n=qy(r?Xy:Ps(e)),i=[],o=0;n.length>o;)!Rs(Ky,t=n[o++])||r&&!Rs(Zy,t)||i.push(Ky[t]);return i};Qy||(lc((By=function(){if(this instanceof By)throw TypeError("Symbol is not a constructor!");var t=bc(0<arguments.length?arguments[0]:void 0),r=function(e){this===Zy&&r.call(Xy,e),Rs(this,Hy)&&Rs(this[Hy],t)&&(this[Hy][t]=!1),rb(this,t,Cs(1,e))};return Is&&tb&&rb(Zy,t,{configurable:!0,set:r}),nb(t)})[Vy],"toString",function(){return this._k}),qs.f=sb,Js.f=ob,Ay.f=Fy.f=cb,Os.f=ub,wf.f=lb,Oy.f=function(e){return nb(Dc(e))}),Xs(Xs.G+Xs.W+Xs.F*!Qy,{Symbol:By});for(var fb="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),db=0;fb.length>db;)Dc(fb[db++]);for(var pb=Pc(Dc.store),hb=0;pb.length>hb;)xy(pb[hb++]);Xs(Xs.S+Xs.F*!Qy,"Symbol",{for:function(e){return Rs($y,e+="")?$y[e]:$y[e]=By(e)},keyFor:function(e){if(!ib(e))throw TypeError(e+" is not a symbol!");for(var t in $y)if($y[t]===e)return t},useSetter:function(){tb=!0},useSimple:function(){tb=!1}}),Xs(Xs.S+Xs.F*!Qy,"Object",{create:function(e,t){return void 0===t?Ic(e):ab(Ic(e),t)},defineProperty:ob,defineProperties:ab,getOwnPropertyDescriptor:sb,getOwnPropertyNames:cb,getOwnPropertySymbols:lb}),Wy&&Xs(Xs.S+Xs.F*(!Qy||As(function(){var e=By();return"[null]"!=Gy([e])||"{}"!=Gy({a:e})||"{}"!=Gy(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(Ms(t)||void 0!==e)&&!ib(e))return oy(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ib(t))return t}),n[1]=t,Gy.apply(Wy,n)}}),By[Vy][Jy]||Ys(By[Vy],Jy,By[Vy].valueOf),Nc(By,"Symbol"),Nc(Math,"Math",!0),Nc(Ds.JSON,"JSON",!0),xy("asyncIterator"),xy("observable");var vb=Bs.Symbol,gb=t(function(e){e.exports={default:vb,__esModule:!0}});e(gb);var mb=t(function(e,t){t.__esModule=!0;var r=o(My),n=o(gb),i="function"==typeof n.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof n.default&&"symbol"===i(r.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":void 0===e?"undefined":i(e)}});e(mb);var yb=Js.f,bb=cy.fastKey,_b=Is?"_s":"size",wb=function(e,t){var r,n=bb(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r},Sb={getConstructor:function(e,o,r,n){var i=e(function(e,t){ll(e,i,o,"_i"),e._t=o,e._i=Ic(null),e._f=void 0,e._l=void 0,e[_b]=0,null!=t&&ml(t,r,e[n],e)});return Wl(i.prototype,{clear:function(){for(var e=ly(this,o),t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e._f=e._l=void 0,e[_b]=0},delete:function(e){var t=ly(this,o),r=wb(t,e);if(r){var n=r.n,i=r.p;delete t._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),t._f==r&&(t._f=n),t._l==r&&(t._l=i),t[_b]--}return!!r},forEach:function(e){ly(this,o);for(var t,r=Gs(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!wb(ly(this,o),e)}}),Is&&yb(i.prototype,"size",{get:function(){return ly(this,o)[_b]}}),i},def:function(e,t,r){var n,i,o=wb(e,t);return o?o.v=r:(e._l=o={i:i=bb(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[_b]++,"F"!==i&&(e._i[i]=o)),e},getEntry:wb,setStrong:function(e,r,t){$c(e,r,function(e,t){this._t=ly(e,r),this._k=t,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?Xc(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,Xc(1))},t?"entries":"values",!t,!0),Vl(r)}},kb=(wy("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=Sb.getEntry(ly(this,"Map"),e);return t&&t.v},set:function(e,t){return Sb.def(ly(this,"Map"),0===e?0:e,t)}},Sb,!0),function(r){return function(){if(cl(this)!=r)throw TypeError(r+"#toJSON isn't generic");return ml(this,!(t=[]),t.push,t,e),t;var e,t}});Xs(Xs.P+Xs.R,"Map",{toJSON:kb("Map")}),Sy("Map"),ky("Map");var Eb=Bs.Map,Tb=t(function(e){e.exports={default:Eb,__esModule:!0}});e(Tb);var Pb=function(e){return"function"==typeof e?e:kv};var Ob=function(e,t){return Ov(wv(e,t,kv),e+"")},Cb=Xp&&new Xp,Mb=Cb?function(e,t){return Cb.set(e,t),e}:kv;var jb=function(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=kh(n.prototype),r=n.apply(t,e);return ud(r)?r:t}};var xb=function(t,e,r){var n=1&e,i=jb(t);return function e(){return(this&&this!==Kf&&this instanceof e?i:t).apply(n?r:this,arguments)}},Rb=Math.max;var Ab=function(e,t,r,n){for(var i=-1,o=e.length,a=r.length,u=-1,s=t.length,c=Rb(o-a,0),l=Array(s+c),f=!n;++u<s;)l[u]=t[u];for(;++i<a;)(f||i<o)&&(l[r[i]]=e[i]);for(;c--;)l[u++]=e[i++];return l},Ib=Math.max;var Db=function(e,t,r,n){for(var i=-1,o=e.length,a=-1,u=r.length,s=-1,c=t.length,l=Ib(o-u,0),f=Array(l+c),d=!n;++i<l;)f[i]=e[i];for(var p=i;++s<c;)f[p+s]=t[s];for(;++a<u;)(d||i<o)&&(f[p+r[a]]=e[i++]);return f};var Lb=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n};var Fb=function(){};function Nb(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}var Ub=(Nb.prototype=kh(Fb.prototype)).constructor=Nb;var zb=function(){},qb=Cb?function(e){return Cb.get(e)}:zb,Bb={},Wb=Object.prototype.hasOwnProperty;var Gb=function(e){for(var t=e.name+"",r=Bb[t],n=Wb.call(Bb,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t};function Vb(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var Hb=(Vb.prototype=kh(Fb.prototype)).constructor=Vb;var Jb=function(e){if(e instanceof Ub)return e.clone();var t=new Hb(e.__wrapped__,e.__chain__);return t.__actions__=Ip(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},Yb=Object.prototype.hasOwnProperty;function $b(e){if(Qd(e)&&!op(e)&&!(e instanceof Ub)){if(e instanceof Hb)return e;if(Yb.call(e,"__wrapped__"))return Jb(e)}return new Hb(e)}var Kb=($b.prototype=Fb.prototype).constructor=$b;var Xb=function(e){var t=Gb(e),r=Kb[t];if("function"!=typeof r||!(t in Ub.prototype))return!1;if(e===r)return!0;var n=qb(r);return!!n&&e===n[0]},Zb=Pv(Mb),Qb=/\{\n\/\* \[wrapped with (.+)\] \*/,e_=/,? & /;var t_=function(e){var t=e.match(Qb);return t?t[1].split(e_):[]},r_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var n_=function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(1<r?"& ":"")+t[n],t=t.join(2<r?", ":" "),e.replace(r_,"{\n/* [wrapped with "+t+"] */\n")};var i_=function(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1};var o_=function(e){return e!=e};var a_=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1};var u_=function(e,t,r){return t==t?a_(e,t,r):i_(e,o_,r)};var s_=function(e,t){return!(null==e||!e.length)&&-1<u_(e,t,0)},c_=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var l_=function(r,n){return Hd(c_,function(e){var t="_."+e[0];n&e[1]&&!s_(r,t)&&r.push(t)}),r.sort()};var f_=function(e,t,r){var n=t+"";return Ov(e,n_(n,l_(t_(n),r)))};var d_=function(e,t,r,n,i,o,a,u,s,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?o:void 0,l?a:void 0,l?void 0:o,l?void 0:a,u,s,c],d=r.apply(void 0,f);return Xb(e)&&Zb(d,f),d.placeholder=n,f_(d,e,t)};var p_=function(e){return e.placeholder},h_=Math.min;var v_=function(e,t){for(var r=e.length,n=h_(t.length,r),i=Ip(e);n--;){var o=t[n];e[n]=cp(o,r)?i[o]:void 0}return e},g_="__lodash_placeholder__";var m_=function(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r];a!==t&&a!==g_||(e[r]=g_,o[i++]=r)}return o},y_=1,b_=2,__=8,w_=16,S_=128,k_=512;function E_(c,l,f,d,p,h,v,g,m,y){var b=l&S_,_=l&y_,w=l&b_,S=l&(__|w_),k=l&k_,E=w?void 0:jb(c);return function e(){for(var t=arguments.length,r=Array(t),n=t;n--;)r[n]=arguments[n];if(S)var i=p_(e),o=Lb(r,i);if(d&&(r=Ab(r,d,p,S)),h&&(r=Db(r,h,v,S)),t-=o,S&&t<y){var a=m_(r,i);return d_(c,l,E_,e.placeholder,f,r,a,g,m,y-t)}var u=_?f:this,s=w?u[c]:c;return t=r.length,g?r=v_(r,g):k&&1<t&&r.reverse(),b&&m<t&&(r.length=m),this&&this!==Kf&&this instanceof e&&(s=E||jb(s)),s.apply(u,r)}}var T_=E_;var P_=function(a,u,s){var c=jb(a);return function e(){for(var t=arguments.length,r=Array(t),n=t,i=p_(e);n--;)r[n]=arguments[n];var o=t<3&&r[0]!==i&&r[t-1]!==i?[]:m_(r,i);return(t-=o.length)<s?d_(a,u,T_,e.placeholder,void 0,r,o,void 0,void 0,s-t):bv(this&&this!==Kf&&this instanceof e?c:a,this,r)}};var O_=function(u,e,s,c){var l=1&e,f=jb(u);return function e(){for(var t=-1,r=arguments.length,n=-1,i=c.length,o=Array(i+r),a=this&&this!==Kf&&this instanceof e?f:u;++n<i;)o[n]=c[n];for(;r--;)o[n++]=arguments[++t];return bv(a,l?s:this,o)}},C_="__lodash_placeholder__",M_=Math.min;var j_=function(e,t){var r=e[1],n=t[1],i=r|n,o=i<131,a=128==n&&8==r||128==n&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!o&&!a)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var u=t[3];if(u){var s=e[3];e[3]=s?Ab(s,u,t[4]):u,e[4]=s?m_(e[3],C_):t[4]}return(u=t[5])&&(s=e[5],e[5]=s?Db(s,u,t[6]):u,e[6]=s?m_(e[5],C_):t[6]),(u=t[7])&&(e[7]=u),128&n&&(e[8]=null==e[8]?t[8]:M_(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e},x_=/^\s+|\s+$/g,R_=/^[-+]0x[0-9a-f]+$/i,A_=/^0b[01]+$/i,I_=/^0o[0-7]+$/i,D_=parseInt;var L_=function(e){if("number"==typeof e)return e;if(zh(e))return NaN;if(ud(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ud(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(x_,"");var r=A_.test(e);return r||I_.test(e)?D_(e.slice(2),r?2:8):R_.test(e)?NaN:+e};var F_=function(e){return e?(e=L_(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0};var N_=function(e){var t=F_(e),r=t%1;return t==t?r?t-r:t:0},U_=Math.max;var z_=function(e,t,r,n,i,o,a,u){var s=2&t;if(!s&&"function"!=typeof e)throw new TypeError("Expected a function");var c=n?n.length:0;if(c||(t&=-97,n=i=void 0),a=void 0===a?a:U_(N_(a),0),u=void 0===u?u:N_(u),c-=i?i.length:0,64&t){var l=n,f=i;n=i=void 0}var d=s?void 0:qb(e),p=[e,t,r,n,i,l,f,o,a,u];if(d&&j_(p,d),e=p[0],t=p[1],r=p[2],n=p[3],i=p[4],!(u=p[9]=void 0===p[9]?s?0:e.length:U_(p[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)h=8==t||16==t?P_(e,t,u):32!=t&&33!=t||i.length?T_.apply(void 0,p):O_(e,t,r,n);else var h=xb(e,t,r);return f_((d?Mb:Zb)(h,p),e,t)},q_=Ob(function(e,t){var r=m_(t,p_(q_));return z_(e,32,void 0,t,r)});q_.placeholder={};var B_=q_;var W_=function(e,t){return B_(Pb(t),e)},G_=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=u(mb),d=u(_f),p=u(Mf),r=u(Tb),n=u(Ty),a=u(W_);t.default=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(3===t.length)return(0,p.default)(i,null,t);var n=t[0]||{},c=n.cacheFailures,l=n.cacheSuccesses,f=n.keyFactory;return i;function i(u,e,t){var s=e;return t.value=(0,a.default)(t.value,function(e){for(var t=this,r=s,n=arguments.length,i=Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];f&&(r=r+"_"+f.apply(void 0,i));var a=h.get(this,u,r);return a||(a=(0,p.default)(e,this,i),!c&&a&&a.catch&&(a=a.catch(function(e){return h.delete(t,u,r),d.default.reject(e)})),!l&&a&&a.then&&(a=a.then(function(e){return h.delete(t,u,r),e})),h.set(this,u,r,a),a)}),"object"!==(void 0===u?"undefined":(0,o.default)(u))||u.prototype||(u[e]=t.value),t}};var i=u(Py);function u(e){return e&&e.__esModule?e:{default:e}}var s=n.default,c=r.default,h=new((0,i.default)(s,c,c))});e(G_);var V_=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={email:/^[^\s]+?@[^\s]+?$/,uuid:/^[a-f\d]{8}(?:-[a-f\d]{4}){3}-[a-f\d]{12}$/,execEmail:/[^\s]+?@[^\s]+?/,execUuid:/[a-f\d]{8}(?:-[a-f\d]{4}){3}-[a-f\d]{12}/}});e(V_);var H_=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=n(Mf),r=n(op);function n(e){return e&&e.__esModule?e:{default:e}}t.proxyEvents=function(t,r){return["on","once"].forEach(function(e){r[e]=function(){return t[e].apply(t,arguments),r}}),t},t.transferEvents=function(e,t,i){(e=(0,r.default)(e)?e:[e]).forEach(function(n){t.on&&t.on(n,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var t=e.trigger||e.emit;if(!t)throw new Error("count not determine emit method");for(var r=arguments.length,n=Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(0,o.default)(t,e,n)}.apply(void 0,[i,n].concat(t))})})}});e(H_);H_.proxyEvents,H_.transferEvents;var J_=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};t.default=function(e){return function(){return n.default.resolve(e)}}});e(J_);var Y_=function(e,t,r){if(!ud(r))return!1;var n=typeof t;return!!("number"==n?Tp(r)&&cp(t,r.length):"string"==n&&t in r)&&Df(r[t],e)},$_=Object.prototype,K_=$_.hasOwnProperty,X_=Ob(function(e,t){e=Object(e);var r=-1,n=t.length,i=2<n?t[2]:void 0;for(i&&Y_(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],a=xp(o),u=-1,s=a.length;++u<s;){var c=a[u],l=e[c];(void 0===l||Df(l,$_[c])&&!K_.call(e,c))&&(e[c]=o[c])}return e});function Z_(){}function Q_(){Q_.init.call(this)}function ew(e){return void 0===e._maxListeners?Q_.defaultMaxListeners:e._maxListeners}function tw(e,t,r,n){var i,o,a,u;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]):(o=e._events=new Z_,e._eventsCount=0),a){if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),!a.warned&&(i=ew(e))&&0<i&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,u=s,"function"==typeof console.warn?console.warn(u):console.log(u)}}else a=o[t]=r,++e._eventsCount;return e}function rw(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function nw(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function iw(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function ow(e){Error.call(this,e),this.message=e}function aw(e){Error.call(this,e),this.message=e}Z_.prototype=Object.create(null),(Q_.EventEmitter=Q_).usingDomains=!1,Q_.prototype.domain=void 0,Q_.prototype._events=void 0,Q_.prototype._maxListeners=void 0,Q_.defaultMaxListeners=10,Q_.init=function(){this.domain=null,Q_.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Z_,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Q_.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Q_.prototype.getMaxListeners=function(){return ew(this)},Q_.prototype.emit=function(e){var t,r,n,i,o,a,u,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(u=this.domain,s){if(t=arguments[1],u)return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=u,t.domainThrown=!1,u.emit("error",t),!1;if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(!(r=a[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var n=e.length,i=iw(e,n),o=0;o<n;++o)i[o].call(r)}(r,l,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=iw(e,i),a=0;a<i;++a)o[a].call(r,n)}(r,l,this,arguments[1]);break;case 3:!function(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,a=iw(e,o),u=0;u<o;++u)a[u].call(r,n,i)}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var a=e.length,u=iw(e,a),s=0;s<a;++s)u[s].call(r,n,i,o)}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=iw(e,i),a=0;a<i;++a)o[a].apply(r,n)}(r,l,this,i)}return!0},Q_.prototype.on=Q_.prototype.addListener=function(e,t){return tw(this,e,t,!1)},Q_.prototype.prependListener=function(e,t){return tw(this,e,t,!0)},Q_.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,rw(this,e,t)),this},Q_.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,rw(this,e,t)),this},Q_.prototype.removeListener=function(e,t){var r,n,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new Z_:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length;0<o--;)if(r[o]===t||r[o].listener&&r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new Z_,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,a||t)}return this},Q_.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new Z_,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new Z_:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new Z_,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(;this.removeListener(e,t[t.length-1]),t[0];);return this},Q_.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},Q_.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):nw.call(e,t)},Q_.prototype.listenerCount=nw,Q_.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]},Cm.inherits(ow,Error),ow.prototype.name="IllegalArgumentError",Cm.inherits(aw,Error),aw.prototype.name="IllegalStateError";var uw={IllegalStateError:aw,IllegalArgumentError:ow},sw=t(function(e){var o=e.exports=uw;function a(e,t,r,n){r=r||"";var i=new e(Cm.format.apply(this,[r].concat(n)));throw Error.captureStackTrace(i,t),i}function i(e,t,r){a(o.IllegalArgumentError,e,t,r)}function u(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function t(n){return function(e,t){var r=u(e);if(r==n)return e;i(arguments.callee,t||'Expected "'+n+'" but got "'+r+'".',Array.prototype.slice.call(arguments,2))}}e.exports.checkArgument=function(e,t){e||i(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkState=function(e,t){var r,n,i;e||(r=arguments.callee,n=t,i=Array.prototype.slice.call(arguments,2),a(o.IllegalStateError,r,n,i))},e.exports.checkIsDef=function(e,t){if(void 0!==e)return e;i(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},e.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;i(arguments.callee,t||'Expected value to be defined and not null but got "'+u(e)+'".',Array.prototype.slice.call(arguments,2))},e.exports.checkIsString=t("string"),e.exports.checkIsArray=t("array"),e.exports.checkIsNumber=t("number"),e.exports.checkIsBoolean=t("boolean"),e.exports.checkIsFunction=t("function"),e.exports.checkIsObject=t("object")}),cw=(sw.checkArgument,sw.checkState,sw.checkIsDef,sw.checkIsDefAndNotNull,sw.checkIsString,sw.checkIsArray,sw.checkIsNumber,sw.checkIsBoolean,sw.checkIsFunction,sw.checkIsObject,sw);function lw(e){Q_.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}Cm.inherits(lw,Q_.EventEmitter),lw.prototype.failAfter=function(e){cw.checkArgument(0<e,"Expected a maximum number of retry greater than 0 but got %s.",e),this.maxNumberOfRetry_=e},lw.prototype.backoff=function(e){cw.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},lw.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},lw.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1};var fw=lw;function dw(e){return null!=e}function pw(e){if(dw((e=e||{}).initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(dw(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(dw(e.randomisationFactor)&&(e.randomisationFactor<0||1<e.randomisationFactor))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}pw.prototype.getMaxDelay=function(){return this.maxDelay_},pw.prototype.getInitialDelay=function(){return this.initialDelay_},pw.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},pw.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},pw.prototype.reset=function(){this.reset_()},pw.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")};var hw=pw;function vw(e){hw.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=vw.DEFAULT_FACTOR,e&&void 0!==e.factor&&(cw.checkArgument(1<e.factor,"Exponential factor should be greater than 1 but got %s.",e.factor),this.factor_=e.factor)}Cm.inherits(vw,hw),vw.DEFAULT_FACTOR=2,vw.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},vw.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()};var gw=vw;function mw(e){hw.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}Cm.inherits(mw,hw),mw.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e},mw.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0};var yw=mw;function bw(e,t,r){Q_.EventEmitter.call(this),cw.checkIsFunction(e,"Expected fn to be a function."),cw.checkIsArray(t,"Expected args to be an array."),cw.checkIsFunction(r,"Expected callback to be a function."),this.function_=e,this.arguments_=t,this.callback_=r,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=bw.DEFAULT_RETRY_PREDICATE_,this.state_=bw.State_.PENDING}Cm.inherits(bw,Q_.EventEmitter),bw.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},bw.DEFAULT_RETRY_PREDICATE_=function(e){return!0},bw.prototype.isPending=function(){return this.state_==bw.State_.PENDING},bw.prototype.isRunning=function(){return this.state_==bw.State_.RUNNING},bw.prototype.isCompleted=function(){return this.state_==bw.State_.COMPLETED},bw.prototype.isAborted=function(){return this.state_==bw.State_.ABORTED},bw.prototype.setStrategy=function(e){return cw.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=e,this},bw.prototype.retryIf=function(e){return cw.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=e,this},bw.prototype.getLastResult=function(){return this.lastResult_.concat()},bw.prototype.getNumRetries=function(){return this.numRetries_},bw.prototype.failAfter=function(e){return cw.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=e,this},bw.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=bw.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},bw.prototype.start=function(e){cw.checkState(!this.isAborted(),"FunctionCall is aborted."),cw.checkState(this.isPending(),"FunctionCall already started.");var t=this.strategy_||new yw;this.backoff_=e?e(t):new fw(t),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),0<this.failAfter_&&this.backoff_.failAfter(this.failAfter_),this.state_=bw.State_.RUNNING,this.doCall_(!1)},bw.prototype.doCall_=function(e){e&&this.numRetries_++;var t=["call"].concat(this.arguments_);Q_.EventEmitter.prototype.emit.apply(this,t);var r=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(r))},bw.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},bw.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.lastResult_=e,Q_.EventEmitter.prototype.emit.apply(this,["callback"].concat(e));var t=e[0];t&&this.retryPredicate_(t)?this.backoff_.backoff(t):(this.state_=bw.State_.COMPLETED,this.doCallback_())}},bw.prototype.handleBackoff_=function(e,t,r){this.emit("backoff",e,t,r)};var _w=bw,ww={Backoff:fw,FunctionCall:_w,FibonacciStrategy:yw,ExponentialStrategy:gw,fibonacci:function(e){return new fw(new yw(e))},exponential:function(e){return new fw(new gw(e))},call:function(e,t,r){var n=Array.prototype.slice.call(arguments);return e=n[0],t=n.slice(1,n.length-1),r=n[n.length-1],new _w(e,t,r)}},Sw=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=r(mb),l=r(_f),f=r(Mf),o=r(Tf),a=r(W_),d=r(cd),u=r(X_);t.default=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=t[0]||{};s=(0,o.default)({},s),(0,u.default)(s,{backoff:!0,delay:1,maxAttempts:3});var c=void 0;c=s.backoff?{initialDelay:s.delay,maxDelay:s.maxDelay}:{initialDelay:1,maxDelay:1};return 3!==t.length?n:(0,f.default)(n,null,t);function n(e,t,r){return r.value=(0,a.default)(r.value,function(i){for(var o=this,e=arguments.length,a=Array(1<e?e-1:0),t=1;t<e;t++)a[t-1]=arguments[t];var u=new Q_.EventEmitter,r=new l.default(function(r,n){var e=p.default.call(function(t){var e=(0,f.default)(i,o,a);return(0,d.default)(e.on)&&(e.on("progress",u.emit.bind(u,"progress")),e.on("upload-progress",u.emit.bind(u,"upload-progress")),e.on("download-progress",u.emit.bind(u,"download-progress"))),e.then(function(e){t(null,e)}).catch(function(e){e||(e=new Error("retryable method failed without providing an error object")),t(e)})},function(e,t){return e?n(e):r(t)});e.setStrategy(new p.default.ExponentialStrategy(c)),s.maxAttempts&&e.failAfter(s.maxAttempts-1),e.start()});return r.on=function(e,t){return u.on(e,t),r},r}),"object"!==(void 0===e?"undefined":(0,i.default)(e))||e.prototype||(e[t]=r.value),r}};var p=r(ww);function r(e){return e&&e.__esModule?e:{default:e}}});e(Sw);var kw=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};t.default=function(r){return function(t){return new n.default(function(e){e(r(t))}).then(function(){return t}).catch(function(){return t})}}});e(kw);var Ew=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var a=r(Mf),u=r(_f),n=r(W_);t.default=function(o){return function(e,t,r){r.value=(0,n.default)(r.value,function(t){for(var r=this,e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return new u.default(function(e){r[o]=!0,e((0,a.default)(t,r,n).then((0,s.default)(function(){r[o]=!1})).catch(function(e){return r[o]=!1,u.default.reject(e)}))})})}};var s=r(kw);function r(e){return e&&e.__esModule?e:{default:e}}});e(Ew),Xs(Xs.S,"Object",{create:Ic});var Tw=Bs.Object,Pw=function(e,t){return Tw.create(e,t)},Ow=t(function(e){e.exports={default:Pw,__esModule:!0}});e(Ow);var Cw=function(e,t){if(Vs(e),!Ms(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},Mw={set:Object.setPrototypeOf||("__proto__"in{}?function(e,r,n){try{(n=Gs(Function.call,qs.f(Object.prototype,"__proto__").set,2))(e,[]),r=!(e instanceof Array)}catch(e){r=!0}return function(e,t){return Cw(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:Cw};Xs(Xs.S,"Object",{setPrototypeOf:Mw.set});var jw=Bs.Object.setPrototypeOf,xw=t(function(e){e.exports={default:jw,__esModule:!0}});e(xw);var Rw=function(e,t,r){t in e?Js.f(e,t,Cs(0,r)):e[t]=r};Xs(Xs.S+Xs.F*!Zl(function(e){}),"Array",{from:function(e){var t,r,n,i,o=qc(e),a="function"==typeof this?this:Array,u=arguments.length,s=1<u?arguments[1]:void 0,c=void 0!==s,l=0,f=gl(o);if(c&&(s=Gs(s,2<u?arguments[2]:void 0,2)),null==f||a==Array&&hl(f))for(r=new a(t=pc(o.length));l<t;l++)Rw(r,l,c?s(o[l],l):o[l]);else for(i=f.call(o),r=new a;!(n=i.next()).done;l++)Rw(r,l,c?fl(i,s,[n.value,l],!0):n.value);return r.length=l,r}});var Aw=Bs.Array.from,Iw=t(function(e){e.exports={default:Aw,__esModule:!0}});e(Iw);var Dw=[].slice,Lw={},Fw=Function.bind||function(t){var r=Ws(this),n=Dw.call(arguments,1),i=function(){var e=n.concat(Dw.call(arguments));return this instanceof i?function(e,t,r){if(!(t in Lw)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";Lw[t]=Function("F,a","return new F("+n.join(",")+")")}return Lw[t](e,r)}(r,e.length,e):_l(r,e,t)};return Ms(r.prototype)&&(i.prototype=r.prototype),i},Nw=(Ds.Reflect||{}).construct,Uw=As(function(){function e(){}return!(Nw(function(){},[],e)instanceof e)}),zw=!As(function(){Nw(function(){})});Xs(Xs.S+Xs.F*(Uw||zw),"Reflect",{construct:function(e,t){Ws(e),Vs(t);var r=arguments.length<3?e:Ws(arguments[2]);if(zw&&!Uw)return Nw(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(Fw.apply(e,n))}var i=r.prototype,o=Ic(Ms(i)?i:Object.prototype),a=Function.apply.call(e,o,t);return Ms(a)?a:o}});var qw=Bs.Reflect.construct,Bw=t(function(e){e.exports={default:qw,__esModule:!0}});e(Bw),Zs("getPrototypeOf",function(){return function(e){return Gc(qc(e))}});var Ww=Bs.Object.getPrototypeOf,Gw=t(function(e){e.exports={default:Ww,__esModule:!0}});e(Gw);var Vw=t(function(e,t){t.__esModule=!0;var r,n=(r=mb)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n.default)(t))&&"function"!=typeof t?e:t}});e(Vw);var Hw=t(function(e,t){t.__esModule=!0;var r=o(xw),n=o(Ow),i=o(mb);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,i.default)(t)));e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}});e(Hw);var Jw=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=p(Ow),o=p(xw),a=p(Iw),u=p(Bw),s=p(Gw),c=p(ey),l=p(iy),f=p(Vw),d=p(Hw);function p(e){return e&&e.__esModule?e:{default:e}}var h=(n=r=function(e){function u(){var e;(0,c.default)(this,u);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=(0,f.default)(this,(e=u.__proto__||(0,s.default)(u)).call.apply(e,[this].concat(r))),o=void 0;if(i.parse)o=i.parse.apply(i,r);else if(i.constructor.parse){var a;o=(a=i.constructor).parse.apply(a,r)}return o||(o=i.constructor.defaultMessage),i.name=i.constructor.name,i.message=o,i}return(0,d.default)(u,e),(0,l.default)(u,null,[{key:"parse",value:function(){return arguments.length<=0?void 0:arguments[0]}}]),u}(function(t){function e(){var e=(0,u.default)(t,(0,a.default)(arguments));return(0,o.default)(e,(0,s.default)(this)),e}return e.prototype=(0,i.default)(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o.default?(0,o.default)(e,t):e.__proto__=t,e}(Error)),r.defaultMessage="An error occurred",n);t.default=h});e(Jw);var Yw=Object.defineProperty;function $w(t,r,e){var n=e.configurable,i=e.enumerable,o=e.initializer,a=e.value;return{configurable:n,enumerable:i,get:function(){if(this!==t){var e=o?o.call(this):a;return Yw(this,r,{configurable:n,enumerable:i,writable:!0,value:e}),e}},set:mS(r)}}function Kw(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS($w,t)}var Xw,Zw,Qw,eS,tS,rS,nS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function iS(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function oS(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}function aS(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var uS=Object.defineProperty,sS=Object.getOwnPropertyDescriptor,cS=Object.getOwnPropertyNames,lS=Object.getOwnPropertySymbols;function fS(e,t){return function(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],r=0,n=t.length;r<n;r++)if(e.hasOwnProperty(t[r]))return!0;return!1}(t[t.length-1])?e.apply(void 0,aS(t).concat([[]])):function(){return e.apply(void 0,aS(Array.prototype.slice.call(arguments)).concat([t]))}}var dS=(Zw=oS((Xw=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),iS(this,"debounceTimeoutIds",Zw,this),iS(this,"throttleTimeoutIds",Qw,this),iS(this,"throttlePreviousTimestamps",eS,this),iS(this,"throttleTrailingArgs",tS,this),iS(this,"profileLastRan",rS,this)}).prototype,"debounceTimeoutIds",[Kw],{enumerable:!0,initializer:function(){return{}}}),Qw=oS(Xw.prototype,"throttleTimeoutIds",[Kw],{enumerable:!0,initializer:function(){return{}}}),eS=oS(Xw.prototype,"throttlePreviousTimestamps",[Kw],{enumerable:!0,initializer:function(){return{}}}),tS=oS(Xw.prototype,"throttleTrailingArgs",[Kw],{enumerable:!0,initializer:function(){return null}}),rS=oS(Xw.prototype,"profileLastRan",[Kw],{enumerable:!0,initializer:function(){return null}}),Xw),pS="function"==typeof Symbol?Symbol("__core_decorators__"):"__core_decorators__";function hS(e){return!1===e.hasOwnProperty(pS)&&uS(e,pS,{value:new dS}),e[pS]}var vS=lS?function(e){return cS(e).concat(lS(e))}:cS;function gS(t){var r={};return vS(t).forEach(function(e){return r[e]=sS(t,e)}),r}function mS(t){return function(e){return Object.defineProperty(this,t,{configurable:!0,writable:!0,enumerable:!0,value:e}),e}}function yS(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}}var bS="object"===("undefined"==typeof console?"undefined":nS(console))&&console&&"function"==typeof console.warn?yS(console.warn,console):function(){},_S={};function wS(e){!0!==_S[e]&&(_S[e]=!0,bS("DEPRECATION: "+e))}var SS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kS=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var ES=/^function ([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?(\([^\)]*\))[\s\S]+$/,TS=function(){function i(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.parentKlass=e,this.childKlass=t,this.parentDescriptor=r,this.childDescriptor=n}return kS(i,[{key:"_getTopic",value:function(e){return void 0===e?null:"value"in e?e.value:"get"in e?e.get:"set"in e?e.set:void 0}},{key:"_extractTopicSignature",value:function(e){switch(void 0===e?"undefined":SS(e)){case"function":return this._extractFunctionSignature(e);default:return this.key}}},{key:"_extractFunctionSignature",value:function(e){var t=this;return e.toString().replace(ES,function(e){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:t.key)+arguments[2]})}},{key:"key",get:function(){return this.childDescriptor.key}},{key:"parentNotation",get:function(){return this.parentKlass.constructor.name+"#"+this.parentPropertySignature}},{key:"childNotation",get:function(){return this.childKlass.constructor.name+"#"+this.childPropertySignature}},{key:"parentTopic",get:function(){return this._getTopic(this.parentDescriptor)}},{key:"childTopic",get:function(){return this._getTopic(this.childDescriptor)}},{key:"parentPropertySignature",get:function(){return this._extractTopicSignature(this.parentTopic)}},{key:"childPropertySignature",get:function(){return this._extractTopicSignature(this.childTopic)}}]),kS(i,[{key:"assert",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";!0!==e&&this.error("{child} does not properly override {parent}"+t)}},{key:"error",value:function(e){var t=this;throw e=e.replace("{parent}",function(e){return t.parentNotation}).replace("{child}",function(e){return t.childNotation}),new SyntaxError(e)}}]),i}();function PS(e){return e.hasOwnProperty("value")?"data":e.hasOwnProperty("get")||e.hasOwnProperty("set")?"accessor":"data"}function OS(e,t,r){r.assert(e.length===t.length)}function CS(e,t,r){var n,i,o,a,u,s,c,l=PS(e),f=PS(t);switch(l!==f&&r.error('descriptor types do not match. {parent} is "'+l+'", {child} is "'+f+'"'),f){case"data":!function(e,t,r){var n=SS(e.value),i=SS(t.value);switch("undefined"===n&&"undefined"===i&&r.error("descriptor values are both undefined. (class properties are are not currently supported)'"),n!==i&&("function"===i&&void 0===n||void 0!==n)&&r.error('value types do not match. {parent} is "'+n+'", {child} is "'+i+'"'),i){case"function":OS(e.value,t.value,r);break;default:r.error('Unexpected error. Please file a bug with: {parent} is "'+n+'", {child} is "'+i+'"')}}(e,t,r);break;case"accessor":i=t,o=r,a="function"==typeof(n=e).get,u="function"==typeof i.get,s="function"==typeof n.set,c="function"==typeof i.set,(a||u)&&(!a&&s&&o.error("{parent} is setter but {child} is getter"),!u&&c&&o.error("{parent} is getter but {child} is setter"),OS(n.get,i.get,o)),(s||c)&&(!s&&a&&o.error("{parent} is getter but {child} is setter"),!c&&u&&o.error("{parent} is setter but {child} is getter"),OS(n.set,i.set,o))}}var MS=[function(e){return e.toLowerCase()},function(e){return e.toUpperCase()},function(e){return e+"s"},function(e){return e.slice(0,-1)},function(e){return e.slice(1,e.length)}];function jS(e,t,r){r.key=t;var n=Object.getPrototypeOf(e),i=Object.getOwnPropertyDescriptor(n,t),o=new TS(n,e,i,r);if(void 0===i){var a=function(e,t){for(var r=0,n=MS.length;r<n;r++){var i=(0,MS[r])(t);if(i in e)return i}return null}(n,t),u=a?'\n\n  Did you mean "'+a+'"?':"";o.error("No descriptor matching {child} was found on the prototype chain."+u)}return CS(i,r,o),r}var xS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RS=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},AS="This function will be removed in future versions.";function IS(e,t,r,n){var i=RS(n,2),o=i[0],a=void 0===o?AS:o,u=i[1],s=void 0===u?{}:u;if("function"!=typeof r.value)throw new SyntaxError("Only functions can be marked as deprecated");var c=e.constructor.name+"#"+t;return s.url&&(a+="\n\n    See "+s.url+" for more details.\n\n"),xS({},r,{value:function(){return bS("DEPRECATION "+c+": "+a),r.value.apply(this,arguments)}})}function DS(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(IS,t)}var LS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function NS(){}function US(e,t,r){return LS({},r,{value:function(){return function(e,t,r){if("object"!==("undefined"==typeof console?"undefined":FS(console)))return t.apply(e,r);var n=console.warn;console.warn=NS;var i=t.apply(e,r);return console.warn=n,i}(this,r.value,arguments)}})}var zS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function qS(e,t,r){var n,i,o,a,u,s,c=(o=i=void 0,(n=r).value?(i=n.value,o="value"):n.get?(i=n.get,o="get"):n.set&&(i=n.set,o="set"),{fn:i,wrapKey:o}),g=c.fn,l=c.wrapKey,m=new WeakMap,y=Object.create(null),b=Object.create(null),_=0;return zS({},r,(s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n,i,o,a,u,s,c,l="0",f=0,d=t.length;f<d;f++){var p=t[f],h=(n=b,(i=p)===Object(i)?i:n[i]||(n[i]={})),v=m.get(h);void 0===v&&(v=++_,m.set(h,v)),l+=v}return y[l]||(o=this,a=arguments,u=y,s=l,c=g.apply(o,a),u[s]=c)},(u=l)in(a={})?Object.defineProperty(a,u,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[u]=s,a))}function BS(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var WS=Object.defineProperty,GS=Object.getPrototypeOf,VS=void 0;function HS(t,r,e){var n=e.value,i=e.configurable,o=e.enumerable;if("function"!=typeof n)throw new SyntaxError("@autobind can only be used on functions, not: "+n);var a=t.constructor;return{configurable:i,enumerable:o,get:function(){if(this===t)return n;if(this.constructor!==a&&GS(this).constructor===a)return n;if(this.constructor!==a&&r in this.constructor.prototype)return function(e,t){if("undefined"==typeof WeakMap)throw new Error("Using @autobind on "+t.name+"() requires WeakMap support due to its use of super."+t.name+"()\n      See https://github.com/jayphelps/core-decorators.js/issues/20");VS||(VS=new WeakMap),!1===VS.has(e)&&VS.set(e,new WeakMap);var r=VS.get(e);return!1===r.has(t)&&r.set(t,yS(t,e)),r.get(t)}(this,n);var e=yS(n,this);return WS(this,r,{configurable:!0,writable:!0,enumerable:!1,value:e}),e},set:mS(r)}}function JS(e){return 1===e.length?function(e){for(var t=gS(e.prototype),r=vS(t),n=0,i=r.length;n<i;n++){var o=r[n],a=t[o];"function"==typeof a.value&&"constructor"!==o&&WS(e.prototype,o,HS(e.prototype,o,a))}}.apply(void 0,BS(e)):HS.apply(void 0,BS(e))}function YS(e,t,r){return r.writable=!1,r}function $S(e,t,r){return r.enumerable=!0,r}function KS(e,t,r){return r.enumerable=!1,r}function XS(e,t,r){return r.configurable=!1,r}var ZS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QS=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ek=300;function tk(e,o,t,r){var n=QS(r,2),i=n[0],a=void 0===i?ek:i,u=n[1],s=void 0!==u&&u,c=t.value;if("function"!=typeof c)throw new SyntaxError("Only functions can be debounced");return ZS({},t,{value:function(){var e=this,t=hS(this).debounceTimeoutIds,r=t[o],n=s&&!r,i=arguments;clearTimeout(r),t[o]=setTimeout(function(){delete t[o],s||c.apply(e,i)},a),n&&c.apply(this,i)}})}var rk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nk=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ik=300;function ok(e,s,t,r){var n=nk(r,2),i=n[0],c=void 0===i?ik:i,o=n[1],l=void 0===o?{}:o,f=t.value;if("function"!=typeof f)throw new SyntaxError("Only functions can be throttled");return!1!==l.leading&&(l.leading=!0),!1!==l.trailing&&(l.trailing=!0),rk({},t,{value:function(){var e=this,t=hS(this),r=t.throttleTimeoutIds,n=t.throttlePreviousTimestamps,i=r[s],o=n[s]||0,a=Date.now();l.trailing&&(t.throttleTrailingArgs=arguments),o||!1!==l.leading||(o=a);var u=c-(a-o);u<=0?(clearTimeout(i),delete r[s],n[s]=a,f.apply(this,arguments)):!i&&l.trailing&&(r[s]=setTimeout(function(){n[s]=!1===l.leading?0:Date.now(),delete r[s],f.apply(e,t.throttleTrailingArgs),t.throttleTrailingArgs=null},u))}})}var ak=Object.defineProperty;function uk(e,n,t,r){var i,o=(i=r,Array.isArray(i)?i:Array.from(i)),a=o[0],u=o.slice(1),s=t.configurable,c=t.enumerable,l=t.writable,f=t.get,d=t.set,p=t.value,h=!!f;return{configurable:s,enumerable:c,get:function(){var e=h?f.call(this):p,t=a.call.apply(a,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(u)));if(h)return t;var r={configurable:s,enumerable:c};return r.value=t,r.writable=l,ak(this,n,r),t},set:h?d:mS()}}var sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ck=Object.defineProperty,lk=Object.getPrototypeOf;function fk(e,t){if(r=e,"[object Symbol]"!==Object.prototype.toString.call(r)||"object"!==(void 0===r?"undefined":sk(r)))return e in t;do{if(t===Object.prototype)return void 0!==t[e];if(t.hasOwnProperty(e))return!0}while(t=lk(t));return!1;var r}function dk(e,t){if(!t.length)throw new SyntaxError("@mixin() class "+e.name+" requires at least one mixin as an argument");for(var r=0,n=t.length;r<n;r++)for(var i=gS(t[r]),o=vS(i),a=0,u=o.length;a<u;a++){var s=o[a];fk(s,e.prototype)||ck(e.prototype,s,i[s])}}function pk(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return wS("@mixin is deprecated and will be removed shortly. Use @mixin from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators"),"function"==typeof t[0]?dk(t[0],[]):function(e){return dk(e,t)}}var hk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vk=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},gk={},mk={time:console.time?console.time.bind(console):function(e){gk[e]=new Date},timeEnd:console.timeEnd?console.timeEnd.bind(console):function(e){var t=new Date-gk[e];delete gk[e],console.log(e+": "+t+"ms")}},yk=0;function bk(e,t,r,n){var i=vk(n,2),o=i[0],a=void 0===o?null:o,u=i[1],s=void 0===u?mk:u,c=r.value;if(null===a&&(a=e.constructor.name+"."+t),"function"!=typeof c)throw new SyntaxError("@time can only be used on functions, not: "+c);return hk({},r,{value:function(){var e=a+"-"+yk;yk++,s.time(e);try{return c.apply(this,arguments)}finally{s.timeEnd(e)}}})}var _k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wk=Object.getPrototypeOf,Sk=Object.getOwnPropertyDescriptor;function kk(e,t,r){var n=wk(e),i=Sk(n,t);return _k({},i,{value:r.value,initializer:r.initializer,get:r.get||i.get,set:r.set||i.set})}var Ek=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tk=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Pk={profile:console.profile?yS(console.profile,console):function(){},profileEnd:console.profileEnd?yS(console.profileEnd,console):function(){},warn:bS};function Ok(e,t,r,n){var i=Tk(n,3),o=i[0],a=void 0===o?null:o,u=i[1],s=void 0!==u&&u,c=i[2],l=void 0===c?Pk:c;if(!Ck.__enabled)return Ck.__warned||(l.warn("console.profile is not supported. All @profile decorators are disabled."),Ck.__warned=!0),r;var f=r.value;if(null===a&&(a=e.constructor.name+"."+t),"function"!=typeof f)throw new SyntaxError("@profile can only be used on functions, not: "+f);return Ek({},r,{value:function(){var e=Date.now(),t=hS(this);(!0===s&&!t.profileLastRan||!1===s||"number"==typeof s&&e-t.profileLastRan>s||"function"==typeof s&&s.apply(this,arguments))&&(l.profile(a),t.profileLastRan=e);try{return f.apply(this,arguments)}finally{l.profileEnd(a)}}})}function Ck(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(Ok,t)}Ck.__enabled=!!console.profile,Ck.__warned=!1;var Mk=Object.defineProperty,jk=Object.getOwnPropertyDescriptor;var xk=Object.freeze({override:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(jS,t)},deprecate:DS,deprecated:DS,suppressWarnings:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(US,t)},memoize:function(){wS("@memoize is deprecated and will be removed shortly. Use @memoize from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(qS,t)},autobind:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(){return JS(arguments)}:JS(t)},readonly:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(YS,t)},enumerable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS($S,t)},nonenumerable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(KS,t)},nonconfigurable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(XS,t)},debounce:function(){wS("@debounce is deprecated and will be removed shortly. Use @debounce from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(tk,t)},throttle:function(){wS("@throttle is deprecated and will be removed shortly. Use @throttle from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(ok,t)},decorate:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(uk,t)},mixin:pk,mixins:pk,lazyInitialize:Kw,time:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(bk,t)},extendDescriptor:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fS(kk,t)},profile:Ck,applyDecorators:function(e,t){var r=e.prototype;for(var n in t)for(var i=t[n],o=0,a=i.length;o<a;o++){var u=i[o];Mk(r,n,u(r,n,jk(r,n)))}return e}}),Rk=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=xk.deprecated;t.default=r});e(Rk);var Ak=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=!0});e(Ak);var Ik=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=Ak,e&&e.__esModule?e:{default:e}).default;var e}})});e(Ik);var Dk=t(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"base64",{enumerable:!0,get:function(){return r($m).default}}),Object.defineProperty(t,"cappedDebounce",{enumerable:!0,get:function(){return r(Km).default}}),Object.defineProperty(t,"checkRequired",{enumerable:!0,get:function(){return r(Xm).default}}),Object.defineProperty(t,"Defer",{enumerable:!0,get:function(){return r(Zm).default}}),Object.defineProperty(t,"makeStateDataType",{enumerable:!0,get:function(){return r(Qm).default}}),Object.defineProperty(t,"make",{enumerable:!0,get:function(){return r(Py).default}}),Object.defineProperty(t,"oneFlight",{enumerable:!0,get:function(){return r(G_).default}}),Object.defineProperty(t,"patterns",{enumerable:!0,get:function(){return r(V_).default}}),Object.defineProperty(t,"proxyEvents",{enumerable:!0,get:function(){return H_.proxyEvents}}),Object.defineProperty(t,"transferEvents",{enumerable:!0,get:function(){return H_.transferEvents}}),Object.defineProperty(t,"resolveWith",{enumerable:!0,get:function(){return r(J_).default}}),Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return r(Sw).default}}),Object.defineProperty(t,"tap",{enumerable:!0,get:function(){return r(kw).default}}),Object.defineProperty(t,"whileInFlight",{enumerable:!0,get:function(){return r(Ew).default}}),Object.defineProperty(t,"Exception",{enumerable:!0,get:function(){return r(Jw).default}}),Object.defineProperty(t,"deprecated",{enumerable:!0,get:function(){return r(Rk).default}}),Object.defineProperty(t,"inBrowser",{enumerable:!0,get:function(){return r(Ik).default}})});e(Dk),Zs("keys",function(){return function(e){return Pc(qc(e))}});var Lk=Bs.Object.keys,Fk=t(function(e){e.exports={default:Lk,__esModule:!0}});e(Fk);var Nk=function(e){return Uh(e,4)},Uk=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.safeSetTimeout=function(){var e=setTimeout.apply(void 0,arguments);e.unref&&e.unref();return e},t.safeSetInterval=function(){var e=setInterval.apply(void 0,arguments);e.unref&&e.unref();return e}});e(Uk);Uk.safeSetTimeout,Uk.safeSetInterval;var zk=0;var qk=function(e){var t=++zk;return ev(e)+t};var Bk=function(u){return Ob(function(e,t){var r=-1,n=t.length,i=1<n?t[n-1]:void 0,o=2<n?t[2]:void 0;for(i=3<u.length&&"function"==typeof i?(n--,i):void 0,o&&Y_(t[0],t[1],o)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var a=t[r];a&&u(e,a,r,i)}return e})},Wk=Object.prototype.hasOwnProperty,Gk=Bk(function(e,t){if(_p(t)||Tp(t))Xd(t,Pp(t),e);else for(var r in t)Wk.call(t,r)&&Kd(e,r,t[r])});var Vk=function(t){return function(e){return null==t?void 0:t[e]}},Hk=Vk({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Jk=/[&<>"']/g,Yk=RegExp(Jk.source);var $k=function(e){return(e=ev(e))&&Yk.test(e)?e.replace(Jk,Hk):e};var Kk=function(s){return function(e,t,r){for(var n=-1,i=Object(e),o=r(e),a=o.length;a--;){var u=o[s?a:++n];if(!1===t(i[u],u,i))break}return e}},Xk=Kk();var Zk=function(e,t){return e&&Xk(e,t,Pp)};var Qk=function(e,t){return e&&Zk(e,Pb(t))};var eE=function(e){return"string"==typeof e||!op(e)&&Qd(e)&&"[object String]"==ad(e)};var tE=function(t,e){return Af(e,function(e){return t[e]})};var rE=function(e){return null==e?[]:tE(e,Pp(e))},nE=Math.max;var iE=function(e,t,r,n){e=Tp(e)?e:rE(e),r=r&&!n?N_(r):0;var i=e.length;return r<0&&(r=nE(i+r,0)),eE(e)?r<=i&&-1<e.indexOf(t,r):!!i&&-1<u_(e,t,r)};var oE=function(e){return Qd(e)&&"[object Date]"==ad(e)},aE=hp&&hp.isDate,uE=aE?pp(aE):oE;var sE=function(e){return this.__data__.has(e)};function cE(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Bd;++t<r;)this.add(e[t])}cE.prototype.add=cE.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},cE.prototype.has=sE;var lE=cE;var fE=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var dE=function(e,t){return e.has(t)};var pE=function(e,t,r,n,i,o){var a=1&r,u=e.length,s=t.length;if(u!=s&&!(a&&u<s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,f=!0,d=2&r?new lE:void 0;for(o.set(e,t),o.set(t,e);++l<u;){var p=e[l],h=t[l];if(n)var v=a?n(h,p,l,t,e,o):n(p,h,l,e,t,o);if(void 0!==v){if(v)continue;f=!1;break}if(d){if(!fE(t,function(e,t){if(!dE(d,t)&&(p===e||i(p,e,r,n,o)))return d.push(t)})){f=!1;break}}else if(p!==h&&!i(p,h,r,n,o)){f=!1;break}}return o.delete(e),o.delete(t),f};var hE=function(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n};var vE=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},gE=Xf?Xf.prototype:void 0,mE=gE?gE.valueOf:void 0;var yE=function(e,t,r,n,i,o,a){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new dh(e),new dh(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Df(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var u=hE;case"[object Set]":var s=1&n;if(u||(u=vE),e.size!=t.size&&!s)return!1;var c=a.get(e);if(c)return c==t;n|=2,a.set(e,t);var l=pE(u(e),u(t),n,i,o,a);return a.delete(e),l;case"[object Symbol]":if(mE)return mE.call(e)==mE.call(t)}return!1},bE=Object.prototype.hasOwnProperty;var _E=function(e,t,r,n,i,o){var a=1&r,u=Hp(e),s=u.length;if(s!=Hp(t).length&&!a)return!1;for(var c=s;c--;){var l=u[c];if(!(a?l in t:bE.call(t,l)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var d=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<s;){var h=e[l=u[c]],v=t[l];if(n)var g=a?n(v,h,l,t,e,o):n(h,v,l,e,t,o);if(!(void 0===g?h===v||i(h,v,r,n,o):g)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var m=e.constructor,y=t.constructor;m!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(d=!1)}return o.delete(e),o.delete(t),d},wE="[object Arguments]",SE="[object Array]",kE="[object Object]",EE=Object.prototype.hasOwnProperty;var TE=function(e,t,r,n,i,o){var a=op(e),u=op(t),s=a?SE:ch(e),c=u?SE:ch(t),l=(s=s==wE?kE:s)==kE,f=(c=c==wE?kE:c)==kE,d=s==c;if(d&&up(e)){if(!up(t))return!1;l=!(a=!0)}if(d&&!l)return o||(o=new Vd),a||gp(e)?pE(e,t,r,n,i,o):yE(e,t,s,r,n,i,o);if(!(1&r)){var p=l&&EE.call(e,"__wrapped__"),h=f&&EE.call(t,"__wrapped__");if(p||h){var v=p?e.value():e,g=h?t.value():t;return o||(o=new Vd),i(v,g,r,n,o)}}return!!d&&(o||(o=new Vd),_E(e,t,r,n,i,o))};var PE=function e(t,r,n,i,o){return t===r||(null==t||null==r||!Qd(t)&&!Qd(r)?t!=t&&r!=r:TE(t,r,n,i,e,o))};var OE=function(e,t){return PE(e,t)},CE=Object.prototype.hasOwnProperty;var ME=function(e,t){return null!=e&&CE.call(e,t)};var jE=function(e,t,r){for(var n=-1,i=(t=tv(t,e)).length,o=!1;++n<i;){var a=nv(t[n]);if(!(o=null!=e&&r(e,a)))break;e=e[a]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&lp(i)&&cp(a,i)&&(op(e)||ip(e))};var xE=function(e,t){return null!=e&&jE(e,t,ME)};var RE=function(e,t,r){var n=-1,i=(t=tv(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var o=null==e?void 0:e[nv(t[n])];void 0===o&&(n=i,o=r),e=cd(o)?o.call(e):o}return e};var AE=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1},IE=Kp&&1/vE(new Kp([,-0]))[1]==1/0?function(e){return new Kp(e)}:zb;var DE=function(e,t,r){var n=-1,i=s_,o=e.length,a=!0,u=[],s=u;if(r)a=!1,i=AE;else if(200<=o){var c=t?null:IE(e);if(c)return vE(c);a=!1,i=dE,s=new lE}else s=t?[]:u;e:for(;++n<o;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,a&&f==f){for(var d=s.length;d--;)if(s[d]===f)continue e;t&&s.push(f),u.push(l)}else i(s,f,r)||(s!==u&&s.push(f),u.push(l))}return u};var LE=function(e){return Qd(e)&&Tp(e)},FE=Ob(function(e){return DE(mv(e,1,LE,!0))});var NE=function(e,t){var r;if("function"!=typeof t)throw new TypeError("Expected a function");return e=N_(e),function(){return 0<--e&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}};var UE=function(e){return NE(2,e)};var zE=function(o,a){return function(e,t){if(null==e)return e;if(!Tp(e))return o(e,t);for(var r=e.length,n=a?r:-1,i=Object(e);(a?n--:++n<r)&&!1!==t(i[n],n,i););return e}},qE=zE(Zk);var BE=function(e,t){return(op(e)?Hd:qE)(e,Pb(t))},WE=/\s+/,GE=function(e,t){var r,n=-1,i=e.length,o=t[0],a=t[1],u=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o,a);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o,a,u);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t);return}},VE=function(e,t,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(WE.test(r)){for(var o=r.split(WE),a=0,u=o.length;a<u;a++)e[t].apply(e,[o[a]].concat(n));return!1}return!0},HE=function(i){return function(e,t,r){if(!e)throw new Error("Trying to listenTo event: '"+t+"' but the target object is undefined");var n=this._listeningTo||(this._listeningTo={});if(r||"object"!=typeof t||(r=this),"function"!=typeof(n[e._listenId||(e._listenId=qk("l"))]=e)[i])throw new Error("Trying to listenTo event: '"+t+"' on object: "+e.toString()+" but it does not have an 'on' method so is unbindable");return e[i](t,r,this),this}},JE=Array.prototype.slice,YE={on:function(e,t,r){return VE(this,"on",e,[t,r])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this})),this},once:function(e,t,r){if(!VE(this,"once",e,[t,r])||!t)return this;var n=this,i=UE(function(){n.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,r)},off:function(e,t,r){var n,i,o,a,u,s,c,l;if(!this._events||!VE(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(u=0,s=(a=e?[e]:Pp(this._events)).length;u<s;u++)if(e=a[u],o=this._events[e]){if(this._events[e]=n=[],t||r)for(c=0,l=o.length;c<l;c++)i=o[c],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=JE.call(arguments,1);if(!VE(this,"trigger",e,t))return this;var r=this._events[e],n=this._events.all;return r&&GE(r,t),n&&GE(n,arguments),this},stopListening:function(e,r,n){var t=this._listeningTo;if(!t)return this;var i=!r&&!n;n||"object"!=typeof r||(n=this),e&&((t={})[e._listenId]=e);var o=this;return BE(t,function(e,t){e.off(r,n,o),(i||xv(e._events))&&delete o._listeningTo[t]}),this},createEmitter:function(e){return Gk(e||{},YE)},listenTo:HE("on"),listenToOnce:HE("once"),listenToAndRun:function(e,t,r){return this.listenTo.apply(this,arguments),r||"object"!=typeof t||(r=this),r.apply(this),this}};YE.bind=YE.on,YE.unbind=YE.off,YE.removeListener=YE.off,YE.removeAllListeners=YE.off,YE.emit=YE.trigger;var $E=YE,KE=Array.prototype.slice;function XE(e){if("object"!=typeof(e=e||{}))throw new TypeError("Options must be an object");this.storage={},this.separator=e.separator||"."}XE.prototype.add=function(e,t){(this.storage[e]||(this.storage[e]=[])).push(t)},XE.prototype.remove=function(r){var e,n;for(e in this.storage)(n=this.storage[e]).some(function(e,t){if(e===r)return n.splice(t,1),!0})},XE.prototype.get=function(e){var t,r=[];for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(r=r.concat(this.storage[t]));return r},XE.prototype.getGrouped=function(e){var t,r={};for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(r[t]=KE.call(this.storage[t]));return r},XE.prototype.getAll=function(e){var t,r={};for(t in this.storage)e!==t&&0!==t.indexOf(e+this.separator)||(r[t]=KE.call(this.storage[t]));return r},XE.prototype.run=function(e,t){var r=KE.call(arguments,2);this.get(e).forEach(function(e){e.apply(t||this,r)})};var ZE=XE,QE=function(e){return Gk({},e)},eT=/^change:/,tT=function(){};function rT(e,t){t||(t={}),this.cid||(this.cid=qk("state")),this._events={},this._values={},this._eventBubblingHandlerCache={},this._definition=Object.create(this._definition),t.parse&&(e=this.parse(e,t)),this.parent=t.parent,this.collection=t.collection,this._keyTree=new ZE,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},e&&this.set(e,Gk({silent:!0,initial:!0},t)),this._changed={},this._derived&&this._initDerived(),!1!==t.init&&this.initialize.apply(this,arguments)}function nT(e,n,t,r){var i,o,a=e._definition[n]={};if(eE(t))(i=e._ensureValidType(t))&&(a.type=i);else{if(Array.isArray(t)&&(t={type:(o=t)[0],required:o[1],default:o[2]}),(i=e._ensureValidType(t.type))&&(a.type=i),t.required&&(a.required=!0),t.default&&"object"==typeof t.default)throw new TypeError("The default value for "+n+" cannot be an object/array, must be a value or a function which returns a value/object/array");a.default=t.default,a.allowNull=!!t.allowNull&&t.allowNull,t.setOnce&&(a.setOnce=!0),a.required&&void 0===a.default&&!a.setOnce&&(a.default=e._getDefaultForType(i)),a.test=t.test,a.values=t.values}return r&&(a.session=!0),i||(i=eE(t)?t:t.type,console.warn("Invalid data type of `"+i+"` for `"+n+"` property. Use one of the default types or define your own")),Object.defineProperty(e,n,{set:function(e){this.set(n,e)},get:function(){if(!this._values)throw Error('You may be trying to `extend` a state object with "'+n+'" which has been defined in `props` on the object being extended');var e=this._values[n],t=this._dataTypes[a.type];if(void 0!==e)return t&&t.get&&(e=t.get(e)),e;var r=RE(a,"default");void 0!==(this._values[n]=r)&&this._getOnChangeForType(a.type)(r,e,n);return r}}),a}Gk(rT.prototype,$E,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(e){return $k(this.get(e))},isValid:function(e){return this._validate({},Gk(e||{},{validate:!0}))},parse:function(e,t){return e},serialize:function(e){var t=Gk({props:!0},e),r=this.getAttributes(t,!0),n=function(e,t){r[t]=this[t].serialize()}.bind(this);return Qk(this._children,n),Qk(this._collections,n),r},set:function(e,t,r){var n,i,o,a,u,s,c,l,f,d,p,h,v,g,m,y,b,_=this,w=this.extraProperties;if(ud(e)||null===e?(f=e,r=t):(f={})[e]=t,r=r||{},!this._validate(f,r))return!1;h=r.unset,p=r.silent,g=r.initial,n=this._changing,this._changing=!0,i=[],g?this._previousAttributes={}:n||(this._previousAttributes=this.attributes,this._changed={});for(var S=0,k=Object.keys(f),E=k.length;S<E;S++){if(o=typeof(a=f[l=k[S]]),v=this._values[l],!(u=this._definition[l])){if(this._children[l]||this._collections[l]){ud(a)||(a={}),this[l].set(a,r);continue}if("ignore"===w)continue;if("reject"===w)throw new TypeError('No "'+l+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===w)u=this._createPropertyDefinition(l,"any");else if(w)throw new TypeError('Invalid value for extraProperties: "'+w+'"')}if(y=this._getCompareForType(u.type),b=this._getOnChangeForType(u.type),(d=this._dataTypes[u.type])&&d.set&&(a=(s=d.set(a)).val,o=s.type),u.test&&(c=u.test.call(this,a,o)))throw new TypeError("Property '"+l+"' failed validation with error: "+c);if(void 0===a&&u.required)throw new TypeError("Required property '"+l+"' must be of type "+u.type+". Tried to set "+a);if(null===a&&u.required&&!u.allowNull)throw new TypeError("Property '"+l+"' must be of type "+u.type+" (cannot be null). Tried to set "+a);if(u.type&&"any"!==u.type&&u.type!==o&&null!=a)throw new TypeError("Property '"+l+"' must be of type "+u.type+". Tried to set "+a);if(u.values&&!iE(u.values,a)){var T=RE(u,"default");if(h&&void 0!==T)a=T;else if(!h||h&&void 0!==a)throw new TypeError("Property '"+l+"' must be one of values: "+u.values.join(", ")+". Tried to set "+a)}if(m=g||!y(v,a,l),u.setOnce&&void 0!==v&&m)throw new TypeError("Property '"+l+"' can only be set once.");m?(b(a,v,l),g||(this._changed[l]=a,this._previousAttributes[l]=v,h&&delete this._values[l],p||i.push({prev:v,val:a,key:l})),h||(this._values[l]=a)):delete this._changed[l]}if(i.length&&(this._pending=!0),i.forEach(function(e){_.trigger("change:"+e.key,_,e.val,r)}),n)return this;for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},get:function(e){return this[e]},toggle:function(e){var t,r,n,i,o=this._definition[e];if("boolean"===o.type)this[e]=!this[e];else{if(!o||!o.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[e]=(t=o.values,r=this[e],n=t.length,i=t.indexOf(r)+1,n-1<i&&(i=0),t[i])}return this},previousAttributes:function(){return QE(this._previousAttributes)},hasChanged:function(e){return null==e?!!Object.keys(this._changed).length:xE(this._derived,e)?this._derived[e].depList.some(function(e){return this.hasChanged(e)},this):xE(this._changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&QE(this._changed);var t,r,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in e)(r=this._definition[o])&&(this._getCompareForType(r.type)(i[o],t=e[o])||((n||(n={}))[o]=t));return n},toJSON:function(){return this.serialize()},unset:function(e,n){var i=this;(e=Array.isArray(e)?e:[e]).forEach(function(e){var t,r=i._definition[e];if(r)return r.required?(t=RE(r,"default"),i.set(e,t,n)):i.set(e,t,Gk({},n,{unset:!0}))})},clear:function(t){var r=this;return Object.keys(this.attributes).forEach(function(e){r.unset(e,t)}),this},previous:function(e){return null!=e&&Object.keys(this._previousAttributes).length?this._previousAttributes[e]:null},_getDefaultForType:function(e){var t=this._dataTypes[e];return t&&t.default},_getCompareForType:function(e){var t=this._dataTypes[e];return t&&t.compare?t.compare.bind(this):OE},_getOnChangeForType:function(e){var t=this._dataTypes[e];return t&&t.onChange?t.onChange.bind(this):tT},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=Gk({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,Gk(t||{},{validationError:r})),!1)},_createPropertyDefinition:function(e,t,r){return nT(this,e,t,r)},_ensureValidType:function(e){return iE(["string","number","boolean","array","object","date","state","any"].concat(Object.keys(this._dataTypes)),e)?e:void 0},getAttributes:function(e,t){e=Gk({session:!1,props:!1,derived:!1},e||{});var r,n,i={};for(var o in this._definition)n=this._definition[o],(e.session&&n.session||e.props&&!n.session)&&(r=t?this._values[o]:this[o],t&&r&&cd(r.serialize)&&(r=r.serialize()),void 0===r&&(r=RE(n,"default")),void 0!==r&&(i[o]=r));if(e.derived)for(var a in this._derived)i[a]=this[a];return i},_initDerived:function(){var i=this;Qk(this._derived,function(e,t){var r=i._derived[t];r.deps=r.depList;var n=function(){var e=r.fn.call(i);i._cache[t]===e&&r.cache||(r.cache&&(i._previousAttributes[t]=i._cache[t]),i._cache[t]=e,i.trigger("change:"+t,i,i._cache[t]))};r.deps.forEach(function(e){i._keyTree.add(e,n)})}),this.on("all",function(e){eT.test(e)&&i._keyTree.get(e.split(":")[1]).forEach(function(e){e()})},this)},_getDerivedProperty:function(e,t){return this._derived[e].cache?(!t&&this._cache.hasOwnProperty(e)||(this._cache[e]=this._derived[e].fn.apply(this)),this._cache[e]):this._derived[e].fn.apply(this)},_initCollections:function(){var e;if(this._collections)for(e in this._collections)this._safeSet(e,new this._collections[e](null,{parent:this}))},_initChildren:function(){var e;if(this._children)for(e in this._children)this._safeSet(e,new this._children[e]({},{parent:this})),this.listenTo(this[e],"all",this._getCachedEventBubblingHandler(e))},_getCachedEventBubblingHandler:function(n){return this._eventBubblingHandlerCache[n]||(this._eventBubblingHandlerCache[n]=function(e,t,r){eT.test(e)?this.trigger("change:"+n+"."+e.split(":")[1],t,r):"change"===e&&this.trigger("change",this)}.bind(this)),this._eventBubblingHandlerCache[n]},_verifyRequired:function(){var e=this.attributes;for(var t in this._definition)if(this._definition[t].required&&void 0===e[t])return!1;return!0},_safeSet:function(e,t){if(e in this)throw new Error("Encountered namespace collision while setting instance property `"+e+"`");return this[e]=t,this}}),Object.defineProperties(rT.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var iT={string:{default:function(){return""}},date:{set:function(e){var t;if(null==e)t="object";else if(uE(e))t="date",e=e.valueOf();else{var r=null,n=new Date(e).valueOf();isNaN(n)&&(n=new Date(parseInt(e,10)).valueOf(),isNaN(n)&&(r=!0)),e=n,t="date",r&&(t=typeof e)}return{val:e,type:t}},get:function(e){return null==e?e:new Date(e)},default:function(){return new Date}},array:{set:function(e){return{val:e,type:Array.isArray(e)?"array":typeof e}},default:function(){return[]}},object:{set:function(e){var t=typeof e;return"object"!==t&&void 0===e&&(e=null,t="object"),{val:e,type:t}},default:function(){return{}}},state:{set:function(e){return e instanceof rT||e&&e.isState?{val:e,type:"state"}:{val:e,type:typeof e}},compare:function(e,t){return e===t},onChange:function(e,t,r){t&&this.stopListening(t,"all",this._getCachedEventBubblingHandler(r)),null!=e&&this.listenTo(e,"all",this._getCachedEventBubblingHandler(r))}}};rT.extend=function(e){var o,t=this;o=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},Gk(o,t);var r=function(){this.constructor=o};if(r.prototype=t.prototype,o.prototype=new r,o.prototype._derived=Gk({},t.prototype._derived),o.prototype._deps=Gk({},t.prototype._deps),o.prototype._definition=Gk({},t.prototype._definition),o.prototype._collections=Gk({},t.prototype._collections),o.prototype._children=Gk({},t.prototype._children),o.prototype._dataTypes=Gk({},t.prototype._dataTypes||iT),e)for(var n=["dataTypes","props","session","derived","collections","children"],i=0;i<arguments.length;i++){var a=arguments[i];a.dataTypes&&Qk(a.dataTypes,function(e,t){o.prototype._dataTypes[t]=e}),a.props&&Qk(a.props,function(e,t){nT(o.prototype,t,e)}),a.session&&Qk(a.session,function(e,t){nT(o.prototype,t,e,!0)}),a.derived&&Qk(a.derived,function(e,t){var r,n,i;r=o.prototype,n=t,i=e,(r._derived[n]={fn:cd(i)?i:i.fn,cache:!1!==i.cache,depList:i.deps||[]}).depList.forEach(function(e){r._deps[e]=FE(r._deps[e]||[],[n])}),Object.defineProperty(r,n,{get:function(){return this._getDerivedProperty(n)},set:function(){throw new TypeError("`"+n+"` is a derived property, it can't be set directly.")}})}),a.collections&&Qk(a.collections,function(e,t){o.prototype._collections[t]=e}),a.children&&Qk(a.children,function(e,t){o.prototype._children[t]=e}),Gk(o.prototype,Mv(a,n))}return o.__super__=t.prototype,o};var oT=rT,aT=t(function(e,t){t.__esModule=!0;var r,n=(r=ny)&&r.__esModule?r:{default:r};t.default=function(e,t,r){return t in e?(0,n.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}});e(aT);var uT=t(function(e,t){t.__esModule=!0;var r,n=(r=Iw)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,n.default)(e)}});e(uT);wy("Set",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return Sb.def(ly(this,"Set"),e=0===e?0:e,e)}},Sb);Xs(Xs.P+Xs.R,"Set",{toJSON:kb("Set")}),Sy("Set"),ky("Set");var sT=Bs.Set,cT=t(function(e){e.exports={default:sT,__esModule:!0}});e(cT);var lT=function(){return Kf.Date.now()},fT=Math.max,dT=Math.min;var pT=function(n,i,e){var o,a,u,s,c,l,f=0,d=!1,p=!1,t=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function h(e){var t=o,r=a;return o=a=void 0,f=e,s=n.apply(r,t)}function v(e){var t=e-l;return void 0===l||i<=t||t<0||p&&u<=e-f}function g(){var e,t,r=lT();if(v(r))return m(r);c=setTimeout(g,(t=i-((e=r)-l),p?dT(t,u-(e-f)):t))}function m(e){return c=void 0,t&&o?h(e):(o=a=void 0,s)}function r(){var e,t=lT(),r=v(t);if(o=arguments,a=this,l=t,r){if(void 0===c)return f=e=l,c=setTimeout(g,i),d?h(e):s;if(p)return c=setTimeout(g,i),h(l)}return void 0===c&&(c=setTimeout(g,i)),s}return i=L_(i)||0,ud(e)&&(d=!!e.leading,u=(p="maxWait"in e)?fT(L_(e.maxWait)||0,i):u,t="trailing"in e?!!e.trailing:t),r.cancel=function(){void 0!==c&&clearTimeout(c),o=l=a=c=void(f=0)},r.flush=function(){return void 0===c?s:m(lT())},r},hT=8;function vT(e,t,r){var n=z_(e,hT,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=vT.placeholder,n}vT.placeholder={};var gT=vT,mT=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundError=t.StorageError=void 0;var r=a(Gw),n=a(ey),i=a(Vw),o=a(Hw);function a(e){return e&&e.__esModule?e:{default:e}}var u=t.StorageError=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(Dk.Exception);t.NotFoundError=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(u)});e(mT);mT.NotFoundError,mT.StorageError;var yT=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var p=o(aT),r=o(mb),s=o(uT),n=o(cT),i=o(Tb),h=o(_f),v=o(Mf),g=o(W_),m=o(RE),a=o(kv),c=o(pT),y=o(gT);function o(e){return e&&e.__esModule?e:{default:e}}t.persist=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(3===r.length)return e("@").apply(void 0,r);var u=r[0],s=r[1];return function(e,t,r){if("initialize"!==t)throw new TypeError("@persist can only currently be applied to AmpersandState objects or their derivatives and must be applied to the initialize method");r.value=(0,g.default)(r.value,function(e){for(var t=this,r=arguments.length,n=Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=(0,v.default)(e,this,n),a="@"===u?"change":"change:"+u;return this.on(a,(0,c.default)(function(){var e=!s||v.default.apply(Reflect,[s,t].concat(n));return e?"@"===u?t.boundedStorage.put(u,t):t.boundedStorage.put(u,t[u]):h.default.resolve()},0)),o}),f(e,t)}},t.waitForValue=function(t){if(t)return function(a,u,e){return b.add(a,u,t),e.value=(0,g.default)(e.value,function(e){for(var t=this,r=arguments.length,n=Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=b.get(a,u);return h.default.all([].concat((0,s.default)(o)).map(function(e){return t.boundedStorage.waitFor(e)})).then(function(){return(0,v.default)(e,t,n)})}),"object"!==(void 0===a?"undefined":(0,r.default)(a))||a.prototype||(a[u]=e.value),f(a,u),e};throw new Error("`key` is required")};var u=i.default,l=n.default,b=new((0,Dk.make)(u,u,l));var _=new n.default;var w=new n.default;function f(f,d){var e,t=(e=f).namespace?e.namespace:e;if(!_.has(t)){if(_.add(t),f.initialize)return void(f.initialize=(0,g.default)(f.initialize,function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=(0,v.default)(e,this,r);return(0,v.default)(o,this,r),i}));f.initialize=o}function o(){var c=this,l=this.getNamespace();this.spark.initialize=(0,g.default)(this.spark.initialize||a.default,function(e){var r=this;w.add(l);for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];(0,v.default)(e,this,n);var o=(0,y.default)(function(e,t){r.logger.debug("storage:("+l+"): got `"+e+"` for first time"),"@"===e?c.parent.set((0,p.default)({},l.toLowerCase(),t)):(0,m.default)(c[e],"isState")?c[e].set(t):c.set(e,t),r.logger.debug("storage:("+l+"): set `"+e+"` for first time")}),a=(0,y.default)(function(e,t){return t instanceof mT.NotFoundError||t.toString().includes("MockNotFoundError")?(r.logger.debug("storage("+l+"): no data for `"+e+"`, continuing"),h.default.resolve()):(r.logger.error("storage("+l+"): failed to init `"+e+"`",t),h.default.reject(t))}),u=b.get(f,d),s=[];u.forEach(function(e){s.push(r.boundedStorage.get(l,e).then(o(e)).catch(a(e)))}),h.default.all(s).then(function(){w.delete(l),0===w.size&&(r.loaded=!0)})})}}});e(yT);yT.persist,yT.waitForValue;var bT=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=n(Tf),a=n(rc),u=n(_f),s=n(Tb),c=n(ey),l=n(iy),r=n(Ty);t.default=function(t,i){var e,r,n=(e=(0,Dk.oneFlight)({keyFactory:function(e){return e}}),function(r,n,e,t,i){var o={};Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0);o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0);void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null)}((r=function(){function e(){(0,c.default)(this,e),i.logger.debug("spark-store: constructing "+t+"Storage"),d.set(this,new s.default)}return(0,l.default)(e,[{key:"clear",value:function(){var t=[];return this.bindings.forEach(function(e){t.push(e.clear())}),u.default.all(t)}},{key:"del",value:function(e,t){return i.logger.debug("spark-store: removing "+e+":"+t),this._getBinding(e).then(function(e){return e.del(t)})}},{key:"get",value:function(e,t){return i.logger.debug("spark-store: retrieving "+e+":"+t),this._getBinding(e).then(function(e){return e.get(t)})}},{key:"put",value:function(e,t,r){return void 0===r?this.del(e,t):(i.logger.debug("spark-store: setting "+e+":"+t),this._getBinding(e).then(function(e){return e.put(t,r.serialize?r.serialize():r)}).then(function(){return r}))}},{key:"_getBinding",value:function(r){var n=this;return new u.default(function(e){i.logger.debug("storage: getting binding for `"+r+"`");var t=n.bindings.get(r);return t?(i.logger.debug("storage: found binding for `"+r+"`"),e(t)):e(n.adapter.bind(r,{logger:i.logger}).then(function(e){return i.logger.debug("storage: made binding for `"+r+"`"),n.bindings.set(r,e),e}))})}},{key:"adapter",get:function(){return i.config.storage[t+"Adapter"]}},{key:"bindings",get:function(){return d.get(this)}}]),e}()).prototype,"_getBinding",[e],(0,a.default)(r.prototype,"_getBinding"),r.prototype),r);return(0,o.default)(n.prototype,f.default),new n};var f=n($E);function n(e){return e&&e.__esModule?e:{default:e}}var d=new r.default});e(bT);var _T=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=f(rc),n=f(Tb),a=f(ey),u=f(iy),i=f(Fk),o=f(Ty),s=f(RE),c=f(ud),l=f(op);function f(e){return e&&e.__esModule?e:{default:e}}t.default=function(i,o){var e,t;return e=(0,Dk.oneFlight)({keyFactory:function(e){return"initValue-"+e}}),function(r,n,e,t,i){var o={};Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0);o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0);void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null)}((t=function(){function e(){(0,a.default)(this,e),d.set(this,new n.default)}return(0,u.default)(e,[{key:"clear",value:function(){return o.spark[i+"Storage"].del(o.getNamespace())}},{key:"del",value:function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.spark[i+"Storage"]).del.apply(e,[o.getNamespace()].concat(r))}},{key:"get",value:function(e){var t=d.get(this).get(e);return t||(t=new Dk.Defer,d.get(this).set(e,t)),o.spark[i+"Storage"].get(o.getNamespace(),e).then(function(e){return t.resolve(),e})}},{key:"put",value:function(e,t){return o.spark[i+"Storage"].put(o.getNamespace(),e,p(t))}},{key:"waitFor",value:function(e){o.logger.debug("plugin-storage("+o.getNamespace()+"): waiting to init key `"+e+"`");var t=d.get(this).get(e);return t?(o.logger.debug("plugin-storage("+o.getNamespace()+"): already inited `"+e+"`"),t.promise):(o.logger.debug("plugin-storage("+o.getNamespace()+"): initing `"+e+"`"),this.initValue(e))}},{key:"initValue",value:function(t){var r=new Dk.Defer;return d.get(this).set(t,r),o.spark[i+"Storage"].get(o.getNamespace(),t).then(function(e){o.logger.debug("plugin-storage("+o.getNamespace()+"): got `"+t+"` for first time"),"@"===t?o.parent.set(e):(0,s.default)(o[t],"isState")?o[t].set(e):o.set(t,e),o.logger.debug("plugin-storage("+o.getNamespace()+"): set `"+t+"` for first time"),r.resolve(),o.logger.debug("plugin-storage("+o.getNamespace()+"): inited `"+t+"`")}).catch(function(e){return e instanceof mT.NotFoundError||e.toString().includes("MockNotFoundError")?(o.logger.debug("plugin-storage("+o.getNamespace()+"): no data for `"+t+"`, continuing"),r.resolve()):(o.logger.warn("plugin-storage("+o.getNamespace()+"): failed to init `"+t+"`",e),r.reject(e))}),r.promise}}]),e}()).prototype,"initValue",[e],(0,r.default)(t.prototype,"initValue"),t.prototype),new t};var d=new o.default;function p(e){if(!(0,c.default)(e))return e;var r=e.serialize?e.serialize():e;return(0,i.default)(r).forEach(function(e){var t=r[e];(0,l.default)(t)?0===t.length?r[e]=void 0:r[e]=t.map(p):(0,c.default)(t)&&(0,i.default)(t).forEach(function(e){t[e]=p(t[e])})}),(0,i.default)(r).reduce(function(e,t){return e&&!r[t]},!0)?void 0:r}});e(_T);var wT=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=r(Fk),o=r(Tb),a=r(_f);function r(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t=t||{},!e)return a.default.reject(new Error("`namespace` is required"));if(!t.logger)return a.default.reject(new Error("`options.logger` is required"));var r=t.logger,n=new o.default;return t.data&&(0,i.default)(t.data).forEach(function(e){n.set(e,t.data[e])}),r.debug("memory-store-adapter: returning binding"),a.default.resolve({clear:function(){return r.debug("memory-store-adapter: clearing the binding"),a.default.resolve(n.clear())},del:function(e){return r.debug("memory-store-adapter: deleting `"+e+"`"),a.default.resolve(n.delete(e))},get:function(e){r.debug("memory-store-adapter: reading `"+e+"`");var t=n.get(e);return void 0===t?a.default.reject(new mT.NotFoundError):a.default.resolve(t)},put:function(e,t){return r.debug("memory-store-adapter: writing `"+e+"`"),a.default.resolve(n.set(e,t))}})}t.default={bind:n,preload:function(r){return{bind:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return r[e]&&(t.data=r[e]),n(e,t)}}}}});e(wT);var ST=t(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"persist",{enumerable:!0,get:function(){return yT.persist}}),Object.defineProperty(t,"waitForValue",{enumerable:!0,get:function(){return yT.waitForValue}}),Object.defineProperty(t,"makeSparkStore",{enumerable:!0,get:function(){return r(bT).default}}),Object.defineProperty(t,"makeSparkPluginStore",{enumerable:!0,get:function(){return r(_T).default}}),Object.defineProperty(t,"MemoryStoreAdapter",{enumerable:!0,get:function(){return r(wT).default}}),Object.defineProperty(t,"StorageError",{enumerable:!0,get:function(){return mT.StorageError}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return mT.NotFoundError}})});e(ST);var kT=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=l(_f),i=l(Mf),a=l(Fk),r=l(Mv),u=l(ud),s=l(Rv),n=l(Cm),c=l(oT);function l(e){return e&&e.__esModule?e:{default:e}}var f=c.default.extend({derived:{boundedStorage:{deps:[],fn:function(){return(0,ST.makeSparkPluginStore)("bounded",this)}},unboundedStorage:{deps:[],fn:function(){return(0,ST.makeSparkPluginStore)("unbounded",this)}},config:{cache:!1,deps:["spark","spark.config"],fn:function(){if(this.spark&&this.spark.config){var e=this.getNamespace();return e?this.spark.config[e.toLowerCase()]:this.spark.config}return{}}},logger:{deps:["spark","spark.logger"],fn:function(){return this.spark.logger||console}},spark:{deps:["parent"],fn:function(){if(!this.parent&&!this.collection)throw new Error("Cannot determine `this.spark` without `this.parent` or `this.collection`. Please initialize `this` via `children` or `collection` or set `this.parent` manually");for(var e=this;e.parent||e.collection;)e=e.parent||e.collection;return e}}},session:{parent:{type:"any"},ready:{default:!0,type:"boolean"}},clear:function(t){var r=this;return(0,a.default)(this.attributes).forEach(function(e){"parent"!==e&&r.unset(e,t)}),(0,a.default)(this._children).forEach(function(e){r[e].clear()}),(0,a.default)(this._collections).forEach(function(e){r[e].reset()}),this},initialize:function(){for(var r=this,e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];(0,i.default)(c.default.prototype.initialize,this,t),this._dataTypes=(0,s.default)(this._dataTypes),(0,a.default)(this._dataTypes).forEach(function(e){r._dataTypes[e].set&&(r._dataTypes[e].set=r._dataTypes[e].set.bind(r))}),this.on("change",function(e,t){r.parent&&r.parent.trigger("change:"+r.getNamespace().toLowerCase(),r.parent,r,t)})},inspect:function(e){return n.default.inspect((0,r.default)(this.serialize({props:!0,session:!0,derived:!0}),"boundedStorage","unboundedStorage","config","logger","spark","parent"),{depth:e})},request:function(){var e;return(e=this.spark).request.apply(e,arguments)},upload:function(){var e;return(e=this.spark).upload.apply(e,arguments)},when:function(e){for(var t=this,r=arguments.length,n=Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(n&&0<n.length)throw new Error("#when() does not accept a callback, you must attach to its promise");return new o.default(function(n){t.once(e,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t)})})},_filterSetParameters:function(e,t,r){var n=void 0;return(0,u.default)(e)||null===e?(n=e,r=t):(n={})[e]=t,[n,r=r||{}]}});t.default=f});e(kT),Xs(Xs.S+Xs.F*!Is,"Object",{defineProperties:Oc});var ET=Bs.Object,TT=function(e,t){return ET.defineProperties(e,t)},PT=t(function(e){e.exports={default:TT,__esModule:!0}});e(PT);var OT=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthError=void 0;var r=s(PT),n=s(Gw),i=s(ey),o=s(iy),a=s(Vw),u=s(Hw);function s(e){return e&&e.__esModule?e:{default:e}}var c=t.OAuthError=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"parse",value:function(e){var t=e.body||e;return(0,r.default)(this,{error:{enumerable:!0,value:t.error},errorDescription:{enumerable:!0,value:t.error_description},errorUri:{enumerable:!0,value:t.error_uri},res:{enumerable:!1,value:e}}),this.errorDescription}}]),t}(Dk.Exception),l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),d=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),p=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),h=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),v=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(c),g={OAuthError:c,InvalidRequestError:l,InvalidClientError:f,InvalidGrantError:d,UnauthorizedClientError:p,UnsupportGrantTypeError:h,InvalidScopeError:v,invalid_request:l,invalid_client:f,invalid_grant:d,unauthorized_client:p,unsupported_grant_type:h,invalid_scope:v,select:function(e){return g[e]||c}};t.default=g});e(OT);OT.OAuthError;var CT=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sortScope=function(e){return e?e.split(" ").sort().join(" "):""},t.filterScope=function(t,e){return e?e.split(" ").filter(function(e){return e!==t}).sort().join(" "):""}});e(CT);CT.sortScope,CT.filterScope;var MT=Dc("iterator"),jT=Bs.isIterable=function(e){var t=Object(e);return void 0!==t[MT]||"@@iterator"in t||fc.hasOwnProperty(cl(t))},xT=t(function(e){e.exports={default:jT,__esModule:!0}});e(xT);var RT=Bs.getIterator=function(e){var t=gl(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return Vs(t.call(e))},AT=t(function(e){e.exports={default:RT,__esModule:!0}});e(AT);var IT=t(function(e,t){t.__esModule=!0;var r=n(xT),s=n(AT);function n(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}});e(IT);var DT=function(e,t,r,n){if(!ud(e))return e;for(var i=-1,o=(t=tv(t,e)).length,a=o-1,u=e;null!=u&&++i<o;){var s=nv(t[i]),c=r;if(i!=a){var l=u[s];void 0===(c=n?n(l,s,u):void 0)&&(c=ud(l)?l:cp(t[i+1])?[]:{})}Kd(u,s,c),u=u[s]}return e};var LT=function(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],u=iv(e,a);r(u,a)&&DT(o,tv(a,e),u)}return o};var FT=function(e,t){return null!=e&&t in Object(e)};var NT=function(e,t){return null!=e&&jE(e,t,FT)};var UT=function(r,e){return LT(r,e,function(e,t){return NT(r,t)})},zT=Cv(function(e,t){return null==e?{}:UT(e,t)});Xs(Xs.S+Xs.F*As(function(){Reflect.defineProperty(Js.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){Vs(e),t=js(t,!0),Vs(r);try{return Js.f(e,t,r),!0}catch(e){return!1}}});var qT=Bs.Reflect.defineProperty,BT=t(function(e){e.exports={default:qT,__esModule:!0}});e(BT),Xs(Xs.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return qs.f(Vs(e),t)}});var WT=Bs.Reflect.getOwnPropertyDescriptor,GT=t(function(e){e.exports={default:WT,__esModule:!0}});e(GT),Xs(Xs.S,"Number",{isNaN:function(e){return e!=e}});var VT=Bs.Number.isNaN,HT=t(function(e){e.exports={default:VT,__esModule:!0}});e(HT);var JT=function(e){return"number"==typeof e||Qd(e)&&"[object Number]"==ad(e)},YT=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(HT),n=o(PT),i=o(JT);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){(0,n.default)(this,{loaded:{enumerable:!0,value:e,writable:!1},total:{enumerable:!0,value:t,writable:!1},lengthComputable:{enumerable:!0,value:(0,i.default)(e)&&!(0,r.default)(e)&&(0,i.default)(t)&&!(0,r.default)(t)&&0<t,writable:!1}})}});e(YT);var $T=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(_f),i=u(BT),o=u(Fk),a=u(ey),n=u(iy);function u(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(r){var n=this;(0,a.default)(this,e),r&&(0,o.default)(r).forEach(function(e){var t=r[e];(0,i.default)(n,e,{enumerable:!0,value:t})})}return(0,n.default)(e,[{key:"onRequest",value:function(e){return r.default.resolve(e)}},{key:"onRequestError",value:function(e,t){return r.default.reject(t)}},{key:"onResponse",value:function(e,t){return r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){return r.default.reject(t)}}],[{key:"create",value:function(){throw new Error("`Interceptor.create()` must be defined")}}]),e}();t.default=s});e($T);var KT=Os.f,XT=function(u){return function(e){for(var t,r=Ps(e),n=Pc(r),i=n.length,o=0,a=[];o<i;)KT.call(r,t=n[o++])&&a.push(u?[t,r[t]]:r[t]);return a}},ZT=XT(!1);Xs(Xs.S,"Object",{values:function(e){return ZT(e)}});var QT=Bs.Object.values,eP=t(function(e){e.exports={default:QT,__esModule:!0}});e(eP);var tP=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var O=r(Tf),C=r(Gw),M=r(ey),j=r(Vw),x=r(Hw);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(r){var e=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(r),t=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(r),n=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),i=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),o=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),a=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),u=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),s=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),c=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),l=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),f=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),d=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),p=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),h=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),v=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),g=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),m=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),y=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),b=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),_=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(t),w=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(r),S=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(w),k=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(w),E=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(w),T=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(w),P=function(e){function t(){return(0,M.default)(this,t),(0,j.default)(this,(t.__proto__||(0,C.default)(t)).apply(this,arguments))}return(0,x.default)(t,e),t}(w);(0,O.default)(r,{0:e,NetworkOrCORSError:e,400:t,BadRequest:t,401:n,Unauthorized:n,402:i,PaymentRequired:i,403:o,Forbidden:o,404:a,NotFound:a,405:u,MethodNotAllowed:u,406:s,NotAcceptable:s,407:c,ProxyAuthenticationRequired:c,408:l,RequestTimeout:l,409:f,Conflict:f,410:d,Gone:d,411:p,LengthRequired:p,412:h,PreconditionFailed:h,413:v,RequestEntityTooLarge:v,414:g,RequestUriTooLong:g,415:m,UnsupportedMediaType:m,416:y,RequestRangeNotSatisfiable:y,417:b,ExpectationFailed:b,429:_,TooManyRequests:_,500:w,InternalServerError:w,501:S,NotImplemented:S,502:k,BadGateway:k,503:E,ServiceUnavailable:E,504:T,GatewayTimeout:T,505:P,HttpVersionNotSupported:P,select:function(e){if(null==e)return r;e=e.statusCode||e;var t=r[e];return t||(e=e.toString().split("").shift()+"00",e=parseInt(e,10),r[e]||r)}})}});e(tP);var rP=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=v(Rf),o=v(eP),a=v(PT),u=v(mb),s=v(Gw),c=v(ey),l=v(iy),f=v(Vw),d=v(Hw),p=v(zT),h=v(tP);function v(e){return e&&e.__esModule?e:{default:e}}var g=(n=r=function(e){function n(){return(0,c.default)(this,n),(0,f.default)(this,(n.__proto__||(0,s.default)(n)).apply(this,arguments))}return(0,d.default)(n,e),(0,l.default)(n,[{key:"parse",value:function(e){var t=e.body,r=void 0;switch(void 0===t?"undefined":(0,u.default)(t)){case"string":try{t=JSON.parse(t),r=this.parseObject(t)}catch(e){r=t}break;case"object":r=this.parseObject(t)}return r||(r=this.defaultMessage),(0,a.default)(this,{body:{enumerable:!1,value:t},httpVersion:{enumerable:!1,value:e.httpVersion},headers:{enumerable:!1,value:e.headers||{}},rawHeaders:{enumerable:!1,value:e.rawHeaders||[]},trailers:{enumerable:!1,value:e.trailers||{}},rawTrailers:{enumerable:!1,value:e.rawTrailers||[]},method:{enumerable:!1,value:e.method},url:{enumerable:!1,value:e.url},statusCode:{enumerable:!1,value:e.statusCode},statusMessage:{enumerable:!1,value:e.statusMessage},socket:{enumerable:!1,value:e.socket},_res:{enumerable:!1,value:e}}),r}},{key:"parseObject",value:function(e){var t=(0,o.default)((0,p.default)(e,n.errorKeys));if(0===t.length)return(0,i.default)(e,null,2);var r=t[0];return"object"===(void 0===r?"undefined":(0,u.default)(r))?this.parseObject(r):r}}]),n}(Dk.Exception),r.errorKeys=["error","errorString","response","errorResponse","message","msg"],r.defaultMessage="An error was received while trying to fulfill the request",n);t.default=g,(0,h.default)(g),g.makeSubTypes=h.default});e(rP);var nP=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(_f),o=f(PT),a=f(Gw),u=f(ey),n=f(iy),s=f(Vw),c=f(Hw),l=f(rP),i=f($T);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function i(e,t){(0,u.default)(this,i);var r=(0,s.default)(this,(i.__proto__||(0,a.default)(i)).call(this,e)),n=t&&(t.error||t.ErrorConstructor)||l.default;return(0,o.default)(r,{ErrorConstructor:{value:n}}),r}return(0,c.default)(i,e),(0,n.default)(i,[{key:"onResponse",value:function(e,t){if(t.statusCode){if(t.statusCode<400)return r.default.resolve(t);if(404===t.statusCode&&t.body&&2000002===t.body.errorCode)return r.default.resolve(t)}return r.default.reject(new(this.ErrorConstructor.select(t.statusCode))(t))}}],[{key:"create",value:function(e){return new i(this,e)}}]),i}(i.default);t.default=d});e(nP);var iP=function(e){return e&&1<e.length?255===e[0]&&216===e[1]&&255===e[2]?{ext:"jpg",mime:"image/jpeg"}:137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]?{ext:"png",mime:"image/png"}:71===e[0]&&73===e[1]&&70===e[2]?{ext:"gif",mime:"image/gif"}:87===e[8]&&69===e[9]&&66===e[10]&&80===e[11]?{ext:"webp",mime:"image/webp"}:70===e[0]&&76===e[1]&&73===e[2]&&70===e[3]?{ext:"flif",mime:"image/flif"}:(73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3])&&67===e[8]&&82===e[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3]?{ext:"tif",mime:"image/tiff"}:66===e[0]&&77===e[1]?{ext:"bmp",mime:"image/bmp"}:73===e[0]&&73===e[1]&&188===e[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===e[0]&&66===e[1]&&80===e[2]&&83===e[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&109===e[30]&&105===e[31]&&109===e[32]&&101===e[33]&&116===e[34]&&121===e[35]&&112===e[36]&&101===e[37]&&97===e[38]&&112===e[39]&&112===e[40]&&108===e[41]&&105===e[42]&&99===e[43]&&97===e[44]&&116===e[45]&&105===e[46]&&111===e[47]&&110===e[48]&&47===e[49]&&101===e[50]&&112===e[51]&&117===e[52]&&98===e[53]&&43===e[54]&&122===e[55]&&105===e[56]&&112===e[57]?{ext:"epub",mime:"application/epub+zip"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&77===e[30]&&69===e[31]&&84===e[32]&&65===e[33]&&45===e[34]&&73===e[35]&&78===e[36]&&70===e[37]&&47===e[38]&&109===e[39]&&111===e[40]&&122===e[41]&&105===e[42]&&108===e[43]&&108===e[44]&&97===e[45]&&46===e[46]&&114===e[47]&&115===e[48]&&97===e[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80!==e[0]||75!==e[1]||3!==e[2]&&5!==e[2]&&7!==e[2]||4!==e[3]&&6!==e[3]&&8!==e[3]?117===e[257]&&115===e[258]&&116===e[259]&&97===e[260]&&114===e[261]?{ext:"tar",mime:"application/x-tar"}:82!==e[0]||97!==e[1]||114!==e[2]||33!==e[3]||26!==e[4]||7!==e[5]||0!==e[6]&&1!==e[6]?31===e[0]&&139===e[1]&&8===e[2]?{ext:"gz",mime:"application/gzip"}:66===e[0]&&90===e[1]&&104===e[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===e[0]&&122===e[1]&&188===e[2]&&175===e[3]&&39===e[4]&&28===e[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===e[0]&&1===e[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===e[0]&&0===e[1]&&0===e[2]&&(24===e[3]||32===e[3])&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]||51===e[0]&&103===e[1]&&112===e[2]&&53===e[3]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&109===e[16]&&112===e[17]&&52===e[18]&&49===e[19]&&109===e[20]&&112===e[21]&&52===e[22]&&50===e[23]&&105===e[24]&&115===e[25]&&111===e[26]&&109===e[27]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&105===e[8]&&115===e[9]&&111===e[10]&&109===e[11]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&0===e[15]?{ext:"mp4",mime:"video/mp4"}:0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&86===e[10]?{ext:"m4v",mime:"video/x-m4v"}:77===e[0]&&84===e[1]&&104===e[2]&&100===e[3]?{ext:"mid",mime:"audio/midi"}:109===e[31]&&97===e[32]&&116===e[33]&&114===e[34]&&111===e[35]&&115===e[36]&&107===e[37]&&97===e[38]?{ext:"mkv",mime:"video/x-matroska"}:26===e[0]&&69===e[1]&&223===e[2]&&163===e[3]?{ext:"webm",mime:"video/webm"}:0===e[0]&&0===e[1]&&0===e[2]&&20===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]?{ext:"mov",mime:"video/quicktime"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&65===e[8]&&86===e[9]&&73===e[10]?{ext:"avi",mime:"video/x-msvideo"}:48===e[0]&&38===e[1]&&178===e[2]&&117===e[3]&&142===e[4]&&102===e[5]&&207===e[6]&&17===e[7]&&166===e[8]&&217===e[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===e[0]&&0===e[1]&&1===e[2]&&"b"===e[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===e[0]&&68===e[1]&&51===e[2]||255===e[0]&&251===e[1]?{ext:"mp3",mime:"audio/mpeg"}:102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&65===e[10]||77===e[0]&&52===e[1]&&65===e[2]&&32===e[3]?{ext:"m4a",mime:"audio/m4a"}:79===e[28]&&112===e[29]&&117===e[30]&&115===e[31]&&72===e[32]&&101===e[33]&&97===e[34]&&100===e[35]?{ext:"opus",mime:"audio/opus"}:79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]?{ext:"ogg",mime:"audio/ogg"}:102===e[0]&&76===e[1]&&97===e[2]&&67===e[3]?{ext:"flac",mime:"audio/x-flac"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&87===e[8]&&65===e[9]&&86===e[10]&&69===e[11]?{ext:"wav",mime:"audio/x-wav"}:35===e[0]&&33===e[1]&&65===e[2]&&77===e[3]&&82===e[4]&&10===e[5]?{ext:"amr",mime:"audio/amr"}:37===e[0]&&80===e[1]&&68===e[2]&&70===e[3]?{ext:"pdf",mime:"application/pdf"}:77===e[0]&&90===e[1]?{ext:"exe",mime:"application/x-msdownload"}:67!==e[0]&&70!==e[0]||87!==e[1]||83!==e[2]?123===e[0]&&92===e[1]&&114===e[2]&&116===e[3]&&102===e[4]?{ext:"rtf",mime:"application/rtf"}:119===e[0]&&79===e[1]&&70===e[2]&&70===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff",mime:"application/font-woff"}:119===e[0]&&79===e[1]&&70===e[2]&&50===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff2",mime:"application/font-woff"}:76===e[34]&&80===e[35]&&(0===e[8]&&0===e[9]&&1===e[10]||1===e[8]&&0===e[9]&&2===e[10]||2===e[8]&&0===e[9]&&2===e[10])?{ext:"eot",mime:"application/octet-stream"}:0===e[0]&&1===e[1]&&0===e[2]&&0===e[3]&&0===e[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===e[0]&&84===e[1]&&84===e[2]&&79===e[3]&&0===e[4]?{ext:"otf",mime:"application/font-sfnt"}:0===e[0]&&0===e[1]&&1===e[2]&&0===e[3]?{ext:"ico",mime:"image/x-icon"}:70===e[0]&&76===e[1]&&86===e[2]&&1===e[3]?{ext:"flv",mime:"video/x-flv"}:37===e[0]&&33===e[1]?{ext:"ps",mime:"application/postscript"}:253===e[0]&&55===e[1]&&122===e[2]&&88===e[3]&&90===e[4]&&0===e[5]?{ext:"xz",mime:"application/x-xz"}:83===e[0]&&81===e[1]&&76===e[2]&&105===e[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===e[0]&&69===e[1]&&83===e[2]&&26===e[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===e[0]&&114===e[1]&&50===e[2]&&52===e[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===e[0]&&83===e[1]&&67===e[2]&&70===e[3]||73===e[0]&&83===e[1]&&99===e[2]&&40===e[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]&&10===e[7]&&100===e[8]&&101===e[9]&&98===e[10]&&105===e[11]&&97===e[12]&&110===e[13]&&45===e[14]&&98===e[15]&&105===e[16]&&110===e[17]&&97===e[18]&&114===e[19]&&121===e[20]?{ext:"deb",mime:"application/x-deb"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===e[0]&&171===e[1]&&238===e[2]&&219===e[3]?{ext:"rpm",mime:"application/x-rpm"}:31===e[0]&&160===e[1]||31===e[0]&&157===e[1]?{ext:"Z",mime:"application/x-compress"}:76===e[0]&&90===e[1]&&73===e[2]&&80===e[3]?{ext:"lz",mime:"application/x-lzip"}:208===e[0]&&207===e[1]&&17===e[2]&&224===e[3]&&161===e[4]&&177===e[5]&&26===e[6]&&225===e[7]?{ext:"msi",mime:"application/x-msi"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}:{ext:"rar",mime:"application/x-rar-compressed"}:{ext:"zip",mime:"application/zip"}:null},oP=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.detect=void 0;var r=i(_f);t.default=o,t.detectSync=a;var n=i(iP);function i(e){return e&&e.__esModule?e:{default:e}}function o(t){return new r.default(function(e){e(a(t))})}function a(e){var t=e;if(Dk.inBrowser){if(e instanceof Blob)return e.type;if(e instanceof ArrayBuffer)t=new Uint8Array(e);else if(!(e instanceof Uint8Array))throw new Error("`detect` requires a buffer of type Blob, ArrayBuffer, or Uint8Array")}var r=(0,n.default)(t);return r?r.mime:"application/octet-stream"}t.detect=o});e(oP);oP.detect,oP.detectSync;var aP=Object.prototype.hasOwnProperty,uP=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),sP=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},cP={arrayToObject:sP,assign:function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],o=i.obj[i.prop],a=Object.keys(o),u=0;u<a.length;++u){var s=a[u],c=o[s];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:o,prop:s}),r.push(c))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],i=0;i<t.length;++i)void 0!==t[i]&&n.push(t[i]);r.obj[r.prop]=n}}return t}(t)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var i=t.charCodeAt(n);45===i||46===i||95===i||126===i||48<=i&&i<=57||65<=i&&i<=90||97<=i&&i<=122?r+=t.charAt(n):i<128?r+=uP[i]:i<2048?r+=uP[192|i>>6]+uP[128|63&i]:i<55296||57344<=i?r+=uP[224|i>>12]+uP[128|i>>6&63]+uP[128|63&i]:(n+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),r+=uP[240|i>>18]+uP[128|i>>12&63]+uP[128|i>>6&63]+uP[128|63&i])}return r},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function n(r,i,o){if(!i)return r;if("object"!=typeof i){if(Array.isArray(r))r.push(i);else{if("object"!=typeof r)return[r,i];(o.plainObjects||o.allowPrototypes||!aP.call(Object.prototype,i))&&(r[i]=!0)}return r}if("object"!=typeof r)return[r].concat(i);var e=r;return Array.isArray(r)&&!Array.isArray(i)&&(e=sP(r,o)),Array.isArray(r)&&Array.isArray(i)?(i.forEach(function(e,t){aP.call(r,t)?r[t]&&"object"==typeof r[t]?r[t]=n(r[t],e,o):r.push(e):r[t]=e}),r):Object.keys(i).reduce(function(e,t){var r=i[t];return aP.call(e,t)?e[t]=n(e[t],r,o):e[t]=r,e},e)}},lP=String.prototype.replace,fP=/%20/g,dP={default:"RFC3986",formatters:{RFC1738:function(e){return lP.call(e,fP,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},pP={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},hP=Date.prototype.toISOString,vP={delimiter:"&",encode:!0,encoder:cP.encode,encodeValuesOnly:!1,serializeDate:function(e){return hP.call(e)},skipNulls:!1,strictNullHandling:!1},gP=function e(t,r,n,i,o,a,u,s,c,l,f,d){var p=t;if("function"==typeof u)p=u(r,p);else if(p instanceof Date)p=l(p);else if(null===p){if(i)return a&&!d?a(r,vP.encoder):r;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||cP.isBuffer(p))return a?[f(d?r:a(r,vP.encoder))+"="+f(a(p,vP.encoder))]:[f(r)+"="+f(String(p))];var h,v=[];if(void 0===p)return v;if(Array.isArray(u))h=u;else{var g=Object.keys(p);h=s?g.sort(s):g}for(var m=0;m<h.length;++m){var y=h[m];o&&null===p[y]||(v=Array.isArray(p)?v.concat(e(p[y],n(r,y),n,i,o,a,u,s,c,l,f,d)):v.concat(e(p[y],r+(c?"."+y:"["+y+"]"),n,i,o,a,u,s,c,l,f,d)))}return v},mP=Object.prototype.hasOwnProperty,yP={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:cP.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},bP=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(n),a=o?n.slice(0,o.index):n,u=[];if(a){if(!r.plainObjects&&mP.call(Object.prototype,a)&&!r.allowPrototypes)return;u.push(a)}for(var s=0;null!==(o=i.exec(n))&&s<r.depth;){if(s+=1,!r.plainObjects&&mP.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(o[1])}return o&&u.push("["+n.slice(o.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;0<=i;--i){var o,a=e[i];if("[]"===a)o=(o=[]).concat(n);else{o=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,s=parseInt(u,10);!isNaN(s)&&a!==u&&String(s)===u&&0<=s&&r.parseArrays&&s<=r.arrayLimit?(o=[])[s]=n:o[u]=n}n=o}return n}(u,t,r)}},_P={formats:dP,parse:function(e,t){var r=t?cP.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||cP.isRegExp(r.delimiter)?r.delimiter:yP.delimiter,r.depth="number"==typeof r.depth?r.depth:yP.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:yP.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:yP.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:yP.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:yP.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:yP.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:yP.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:yP.strictNullHandling,""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,o=n.split(t.delimiter,i),a=0;a<o.length;++a){var u,s,c=o[a],l=c.indexOf("]="),f=-1===l?c.indexOf("="):l+1;s=-1===f?(u=t.decoder(c,yP.decoder),t.strictNullHandling?null:""):(u=t.decoder(c.slice(0,f),yP.decoder),t.decoder(c.slice(f+1),yP.decoder)),mP.call(r,u)?r[u]=[].concat(r[u]).concat(s):r[u]=s}return r}(e,r):e,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),a=0;a<o.length;++a){var u=o[a],s=bP(u,n[u],r);i=cP.merge(i,s,r)}return cP.compact(i)},stringify:function(e,t){var r=e,n=t?cP.assign({},t):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var i=void 0===n.delimiter?vP.delimiter:n.delimiter,o="boolean"==typeof n.strictNullHandling?n.strictNullHandling:vP.strictNullHandling,a="boolean"==typeof n.skipNulls?n.skipNulls:vP.skipNulls,u="boolean"==typeof n.encode?n.encode:vP.encode,s="function"==typeof n.encoder?n.encoder:vP.encoder,c="function"==typeof n.sort?n.sort:null,l=void 0!==n.allowDots&&n.allowDots,f="function"==typeof n.serializeDate?n.serializeDate:vP.serializeDate,d="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:vP.encodeValuesOnly;if(void 0===n.format)n.format=dP.default;else if(!Object.prototype.hasOwnProperty.call(dP.formatters,n.format))throw new TypeError("Unknown format option provided.");var p,h,v=dP.formatters[n.format];"function"==typeof n.filter?r=(h=n.filter)("",r):Array.isArray(n.filter)&&(p=h=n.filter);var g,m=[];if("object"!=typeof r||null===r)return"";g=n.arrayFormat in pP?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var y=pP[g];p||(p=Object.keys(r)),c&&p.sort(c);for(var b=0;b<p.length;++b){var _=p[b];a&&null===r[_]||(m=m.concat(gP(r[_],_,y,o,a,u?s:null,h,c,l,f,v,d)))}var w=m.join(i),S=!0===n.addQueryPrefix?"?":"";return 0<w.length?S+w:""}},wP="undefined"!=typeof window?window:void 0!==K?K:"undefined"!=typeof self?self:{},SP=function(e){var t=kP.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},kP=Object.prototype.toString;var EP=t(function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),TP=(EP.left,EP.right,Function.prototype.toString),PP=/^\s*class\b/,OP=function(e){try{var t=TP.call(e);return PP.test(t)}catch(e){return!1}},CP=Object.prototype.toString,MP="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,jP=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(MP)return function(e){try{return!OP(e)&&(TP.call(e),!0)}catch(e){return!1}}(e);if(OP(e))return!1;var t=CP.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},xP=Object.prototype.toString,RP=Object.prototype.hasOwnProperty,AP=function(e,t,r){if(!jP(t))throw new TypeError("iterator must be a function");var n;3<=arguments.length&&(n=r),"[object Array]"===xP.call(e)?function(e,t,r){for(var n=0,i=e.length;n<i;n++)RP.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,n):"string"==typeof e?function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(e,t,n):function(e,t,r){for(var n in e)RP.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,n)},IP=function(e){if(!e)return{};var o={};return AP(EP(e).split("\n"),function(e){var t,r=e.indexOf(":"),n=EP(e.slice(0,r)).toLowerCase(),i=EP(e.slice(r+1));void 0===o[n]?o[n]=i:(t=o[n],"[object Array]"===Object.prototype.toString.call(t)?o[n].push(i):o[n]=[o[n],i])}),o},DP=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)LP.call(r,n)&&(e[n]=r[n])}return e},LP=Object.prototype.hasOwnProperty;var FP=t(function(e){var t,g=(t=Rf)&&t.__esModule?t:{default:t};function i(e,t,r){var n=e;return SP(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=DP(t,{uri:e}),n.callback=r,n}function m(e,t,r){return o(t=i(e,t,r))}function o(n){if(void 0===n.callback)throw new Error("callback argument missing");var i=!1,o=function(e,t,r){i||(i=!0,n.callback(e,t,r))};function t(e){return clearTimeout(s),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,o(e,v)}function e(){if(!a){var e;clearTimeout(s),e=n.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var t=v,r=null;return 0!==e?(t={body:function(){var e=void 0;if(e=u.response?u.response:u.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}(u),h)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:l,headers:{},url:c,rawRequest:u},u.getAllResponseHeaders&&(t.headers=IP(u.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),o(r,t,t.body)}}var r,a,u=n.xhr||null;u||(u=n.cors||n.useXDR?new m.XDomainRequest:new m.XMLHttpRequest);var s,c=n.uri||n.url,l=n.method||"GET",f=n.body||n.data,d=n.headers||{},p=!!n.sync,h=!1,v={body:void 0,headers:{},statusCode:0,method:l,url:c,rawRequest:u};if("json"in n&&!1!==n.json&&(h=!0,d.accept||d.Accept||(d.Accept="application/json"),"GET"!==l&&"HEAD"!==l&&(d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json"),f=(0,g.default)(!0===n.json?f:n.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(e,0)},u.onload=e,u.onerror=t,u.onprogress=function(){},u.onabort=function(){a=!0},u.ontimeout=t,u.open(l,c,!p,n.username,n.password),p||(u.withCredentials=!!n.withCredentials),!p&&0<n.timeout&&(s=setTimeout(function(){if(!a){a=!0,u.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},n.timeout)),u.setRequestHeader)for(r in d)d.hasOwnProperty(r)&&u.setRequestHeader(r,d[r]);else if(n.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(u.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(u),u.send(f||null),u}(e.exports=m).XMLHttpRequest=wP.XMLHttpRequest||function(){},m.XDomainRequest="withCredentials"in new m.XMLHttpRequest?m.XMLHttpRequest:wP.XDomainRequest,function(e,t){for(var r=0;r<e.length;r+=1)t(e[r])}(["get","put","post","patch","head","delete"],function(n){m["delete"===n?"del":n]=function(e,t,r){return(t=i(e,t,r)).method=n.toUpperCase(),o(t)}})});e(FP);var NP=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var y=n(mb),b=n(oc),_=n(AT),w=n(Fk),r=n(_f),S=n(zT),k=n(op),E=n(X_);t.default=function(g){return new r.default(function(r){var e,t,n,i,o,a,u,s,c,l,f,d,p,h=(0,S.default)(g,"method","uri","withCredentials","headers","timeout","responseType");h.response=!0,t=g,(e=h).method&&["PATCH","POST","PUT"].includes(e.method.toUpperCase())&&(e.xhr=new XMLHttpRequest,e.xhr.upload.onprogress=t.upload.emit.bind(t.upload,"progress")),function(e,t){if(t.auth)if(t.auth.bearer)e.headers.authorization="Bearer "+t.auth.bearer;else{var r=t.auth.user||t.auth.username,n=t.auth.pass||t.auth.password,i=btoa(r+":"+n);e.headers.authorization="Basic "+i}}(h,g),n=h,g.jar&&(n.withCredentials=!0),i=h,o=g,a={cors:!0,withCredentials:!1,timeout:0},(0,E.default)(i,(0,S.default)(o,(0,w.default)(a)),a),u=h,"buffer"===g.responseType&&(u.responseType="arraybuffer"),s=h,((c=g).body instanceof Blob||c.body instanceof ArrayBuffer)&&(c.json=s.json=!1,s.headers["content-type"]=s.headers["content-type"]||(0,oP.detectSync)(c.body)),l=h,"json"in(f=g)&&!0!==f.json||!f.body?f.form?(l.headers["Content-Type"]="application/x-www-form-urlencoded",l.body=T.default.stringify(f.form),(0,b.default)(l,"json")):f.formData?l.body=(0,w.default)(f.formData).reduce(function(e,t){var r=f.formData[t];return function e(t,r,n){if((0,k.default)(n)){var i=!0,o=!1,a=void 0;try{for(var u,s=(0,_.default)(n);!(i=(u=s.next()).done);i=!0){var c=u.value;e(t,r,c)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}}else(n=m(n)).name?(n.filename=n.name,t.append(r,n,n.name)):t.append(r,n)}(e,t,r),e},new FormData):(l.body=f.body,(0,b.default)(l,"json")):l.json=f.body,d=h,(p=g).qs&&(d.uri+="?"+T.default.stringify(p.qs));var v=(0,P.default)(h,function(e,t){e&&g.logger.warn(e),t?(t.options=g,function(e,t){if(!t.json&&"object"!==(0,y.default)(e.body))try{e.body=JSON.parse(e.body)}catch(e){}}(t,h),r(t)):r({statusCode:0,options:g,headers:g.headers,method:g.method,url:g.uri,body:e})});v.onprogress=g.download.emit.bind(g.download,"progress")}).catch(function(e){return{statusCode:0,options:g,headers:g.headers,method:g.method,url:g.uri,body:e}});function m(e){if(e instanceof ArrayBuffer){var t=e.type?new Blob([e],{type:e.type}):new Blob([e]);return t.filename=e.filename||e.name||"untitled",t}return e}};var T=n(_P),P=n(FP);function n(e){return e&&e.__esModule?e:{default:e}}});e(NP);var UP=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var a=r(_f);t.default=function(o){o.url&&(o.uri=o.url,o.url=null);o.headers=o.headers||{},Dk.inBrowser||o.headers["user-agent"]||(o.headers["user-agent"]="@ciscospark/http-core");return o.download=new Q_.EventEmitter,o.upload=new Q_.EventEmitter,n(o.interceptors,"Request").then(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.default.apply(void 0,[o].concat(t))}).then(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[o.interceptors.slice().reverse(),"Response"].concat(t))});function n(e,t,r){var n="on"+t,i="on"+t+"Error";return e.reduce(function(e,t){return e.then(function(e){return t[n]?t[n](o,e):a.default.resolve(e)},function(e){return t[i]?t[i](o,e):a.default.reject(e)})},a.default.resolve(r))}};var i=r(NP);function r(e){return e&&e.__esModule?e:{default:e}}});e(UP);var zP=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.detectSync=t.detect=t.HttpStatusInterceptor=t.HttpError=t.Interceptor=t.ProgressEvent=t.request=t.defaults=void 0;var n=f(oc),i=f(BT),o=f(GT),a=f(eE),u=f(X_),r=f(gT),s=f(Gk);Object.defineProperty(t,"ProgressEvent",{enumerable:!0,get:function(){return f(YT).default}}),Object.defineProperty(t,"Interceptor",{enumerable:!0,get:function(){return f($T).default}}),Object.defineProperty(t,"HttpError",{enumerable:!0,get:function(){return f(rP).default}}),Object.defineProperty(t,"HttpStatusInterceptor",{enumerable:!0,get:function(){return f(nP).default}}),Object.defineProperty(t,"detect",{enumerable:!0,get:function(){return oP.detect}}),Object.defineProperty(t,"detectSync",{enumerable:!0,get:function(){return oP.detectSync}});var c=f(nP),l=f(UP);function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,r.default)(function(e,r){if((0,a.default)(r)){var t=r;(r=arguments[2]||{}).uri=t}return["download","interceptors","logger","upload"].forEach(function(e){var t=(0,o.default)(r,e);t=(0,s.default)({},t,{enumerable:!1,writable:!0}),(0,i.default)(r,e,t)}),(0,u.default)(r,e),r.json||(0,n.default)(r,"json"),r.logger=r.logger||console,(0,l.default)(r)}),p={json:!0,interceptors:[c.default.create()]};t.defaults=d,t.request=d(p)});e(zP);zP.detectSync,zP.detect,zP.HttpStatusInterceptor,zP.HttpError,zP.Interceptor,zP.ProgressEvent,zP.request,zP.defaults;var qP=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(BT),n=c(Mf),i=c(Gw),o=c(ey),a=c(iy),u=c(Vw),s=c(Hw);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"parse",value:function(e){var t=(0,n.default)(zP.HttpError.prototype.parse,this,[e]);return(0,r.default)(this,"options",{enumerable:!1,value:e.options}),this.options.url?t+="\n"+this.options.method+" "+this.options.url:this.options.uri?t+="\n"+this.options.method+" "+this.options.uri:t+="\n"+this.options.method+" "+this.options.service.toUpperCase()+"/"+this.options.resource,t+="\nWEBEX_TRACKING_ID: "+this.options.headers.trackingid,this.options.headers&&this.options.headers["x-trans-id"]&&(t+="\nX-Trans-Id: "+this.options.headers["x-trans-id"]),this.headers["retry-after"]&&((0,r.default)(this,"retryAfter",{enumerable:!0,value:this.headers["retry-after"],writeable:!1}),t+="\nRETRY-AFTER: "+this.retryAfter),t+="\n"}}]),t}(zP.HttpError);t.default=l,zP.HttpError.makeSubTypes(l);var f=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(zP.HttpError.BadRequest);zP.HttpError[429]=f,zP.HttpError.TooManyRequests=f});e(qP);var BP=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=s(rc),c=s(IT),l=s(Mf),f=s(Tf),i=s(_f),o=s(zT),a=s(qP),d=s(kT),u=s(OT);function s(e){return e&&e.__esModule?e:{default:e}}function p(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}function h(e){if(400!==e.statusCode)return i.default.reject(e);var t=u.default.select(e.body.error);return t===OT.OAuthError&&e instanceof a.default?i.default.reject(e):t?i.default.reject(new t(e._res||e)):i.default.reject(e)}var v=d.default.extend((p(r={derived:{canAuthorize:{deps:["access_token","isExpired"],fn:function(){return!!this.access_token&&!this.isExpired}},canDownscope:{deps:["canAuthorize"],fn:function(){return this.canAuthorize&&!!this.config.client_id}},canRefresh:{deps:["refresh_token"],fn:function(){return Dk.inBrowser?!!this.refresh_token&&!!this.config.refreshCallback:!!this.refresh_token&&!!this.config.client_secret}},isExpired:{deps:["expires","_isExpired"],fn:function(){return!!this.expires&&this._isExpired}},_string:{deps:["access_token","token_type"],fn:function(){return this.access_token&&this.token_type?this.token_type+" "+this.access_token:""}}},namespace:"Credentials",props:{scope:"string",access_token:"string",expires:"number",expires_in:"number",refresh_token:"string",refresh_token_expires:"number",refresh_token_expires_in:"number",token_type:{default:"Bearer",type:"string"}},session:{_isExpired:{default:!1,type:"boolean"},previousToken:{type:"state"}},downscope:function(t){var r=this;return this.logger.info("token: downscoping token to "+t),this.isExpired?(this.logger.info("token: request received to downscope expired access_token"),i.default.reject(new Error("cannot downscope expired access token"))):this.canDownscope?(t&&(t=(0,CT.sortScope)(t)),t===(0,CT.sortScope)(this.config.scope)?i.default.reject(new Error("token: scope reduction requires a reduced scope")):this.spark.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"urn:cisco:oauth:grant-type:scope-reduction",token:this.access_token,scope:t,client_id:this.config.client_id}}).then(function(e){return r.logger.info("token: downscoped token to "+t),new v((0,f.default)(e.body,{scope:t}),{parent:r.parent})})):(this.config.client_id?this.logger.info("token: request received to downscope invalid access_token"):this.logger.warn("token: cannot downscope without client_id"),i.default.reject(new Error("cannot downscope access token")))},initialize:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if((0,l.default)(d.default.prototype.initialize,this,[t,r]),"string"==typeof t&&(this.access_token=t),!this.access_token)throw new Error("`access_token` is required");this.expires&&(this.expires<Date.now()?this._isExpired=!0:(0,Uk.safeSetTimeout)(function(){e._isExpired=!0},this.expires-Date.now()))},refresh:function(){var t=this;if(!this.canRefresh)throw new Error("Not enough information available to refresh this access token");var e=void 0;if(Dk.inBrowser){if(!this.config.refreshCallback)throw new Error("Cannot refresh access token without refreshCallback");e=i.default.resolve(this.config.refreshCallback(this.spark,this))}return(e||this.spark.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"refresh_token",redirect_uri:this.config.redirect_uri,refresh_token:this.refresh_token},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(e){return e.body})).then(function(e){if(!e)throw new Error("token: refreshCallback() did not produce an object");return e.refresh_token||(0,f.default)(e,(0,o.default)(t,"refresh_token","refresh_token_expires","refresh_token_expires_in")),t.access_token===e.access_token?(t.logger.error("token: new token matches current token"),t.logger.error("token: current token:",t.access_token),t.logger.error("token: new token:",e.access_token),i.default.reject(new Error("new token matches current token"))):(t.previousToken&&(t.previousToken.revoke(),t.unset("previousToken")),e.previousToken=t,e.scope=t.scope,new v(e,{parent:t.parent}))}).catch(h)},revoke:function(){var e=this;return this.isExpired?(this.logger.info("token: already expired, not making making revocation request"),i.default.resolve()):this.canAuthorize?this.config.client_secret?(this.logger.info("token: revoking access token"),this.spark.request({method:"POST",uri:this.config.revokeUrl,form:{token:this.access_token,token_type_hint:"access_token"},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(){e.unset(["access_token","expires","expires_in","token_type"]),e.logger.info("token: access token revoked")}).catch(h)):(this.logger.info("token: no client secret available, not making revocation request"),i.default.resolve()):(this.logger.info("token: no longer valid, not making revocation request"),i.default.resolve())},set:function(){var e=this._filterSetParameters.apply(this,arguments),t=(0,c.default)(e,2),r=t[0],n=t[1];if(!r.token_type&&r.access_token&&r.access_token.includes(" ")){var i=r.access_token.split(" "),o=(0,c.default)(i,2),a=o[0],u=o[1];r=(0,f.default)({},r,{access_token:u,token_type:a})}var s=Date.now();return!r.expires&&r.expires_in&&(r.expires=s+1e3*r.expires_in),!r.refresh_token_expires&&r.refresh_token_expires_in&&(r.refresh_token_expires=s+1e3*r.refresh_token_expires_in),r.scope&&(r.scope=(0,CT.sortScope)(r.scope)),(0,l.default)(d.default.prototype.set,this,[r,n])},toString:function(){if(!this._string)throw new Error("cannot stringify Token");return this._string},validate:function(){var t=this;return this.spark.request({method:"POST",service:"conversation",resource:"users/validateAuthToken",body:{token:this.access_token}}).catch(function(e){if("statusCode"in e)return i.default.reject(e);t.logger.info("REMINDER: If you're investigating a network error here, it's normal");return t.spark.request({method:"POST",uri:"https://conv-a.wbx2.com/conversation/api/v1/users/validateAuthToken",body:{token:t.access_token},headers:{authorization:"Bearer "+t.access_token}})}).then(function(e){return e.body})},version:"1.43.2"},"downscope",[(0,Dk.oneFlight)({keyFactory:function(e){return e}})],(0,n.default)(r,"downscope"),r),p(r,"refresh",[Dk.oneFlight],(0,n.default)(r,"refresh"),r),p(r,"revoke",[Dk.oneFlight],(0,n.default)(r,"revoke"),r),r));t.default=v});e(BP);var WP=function(e){var t,r=this,n=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return r.apply(this,arguments)},Gk(t,r);var i=function(){this.constructor=t};return i.prototype=r.prototype,t.prototype=new i,e&&(n.unshift(t.prototype),Gk.apply(null,n)),t.__super__=r.prototype,t},GP=Ob(function(e,t,r){var n=1;if(r.length){var i=m_(r,p_(GP));n|=32}return z_(e,n,t,r,i)});GP.placeholder={};var VP=GP,HP=[].slice;function JP(e,t){if(t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),t.parent&&(this.parent=t.parent),!this.mainIndex){var r=this.model&&this.model.prototype&&this.model.prototype.idAttribute;this.mainIndex=r||"id"}this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,Gk({silent:!0},t))}Gk(JP.prototype,$E,{initialize:function(){},isModel:function(e){return this.model&&e instanceof this.model},add:function(e,t){return this.set(e,Gk({merge:!1,add:!0,remove:!1},t))},parse:function(e,t){return e},serialize:function(){return this.map(function(e){if(e.serialize)return e.serialize();var t={};return Gk(t,e),delete t.collection,t})},toJSON:function(){return this.serialize()},set:function(e,t){(t=Gk({add:!0,remove:!0,merge:!0},t)).parse&&(e=this.parse(e,t));var r,n,i,o,a,u,s,c=!op(e);e=c?e?[e]:[]:e.slice();var l=t.at,f=this.comparator&&null==l&&!1!==t.sort,d="string"==typeof this.comparator?this.comparator:null,p=[],h=[],v={},g=t.add,m=t.merge,y=t.remove,b=!(f||!g||!y)&&[],_=this.model&&this.model.prototype||Object.prototype;for(u=0,s=e.length;u<s;u++){if(i=e[u]||{},this.isModel(i)?r=n=i:_.generateId?r=_.generateId(i):void 0===(r=i[this.mainIndex])&&this._isDerivedIndex(_)&&(r=_._derived[this.mainIndex].fn.call(i)),o=this.get(r))y&&(v[o.cid||o[this.mainIndex]]=!0),m&&(i=i===n?n.attributes:i,t.parse&&(i=o.parse(i,t)),o.set?(o.set(i,t),f&&!a&&o.hasChanged(d)&&(a=!0)):Gk(o,i)),e[u]=o;else if(g){if(!(n=e[u]=this._prepareModel(i,t)))continue;p.push(n),this._addReference(n,t)}(n=o||n)&&(b&&(n.isNew&&n.isNew()||!n[this.mainIndex]||!v[n.cid||n[this.mainIndex]])&&b.push(n),v[n[this.mainIndex]]=!0)}if(y){for(u=0,s=this.length;u<s;u++)v[(n=this.models[u]).cid||n[this.mainIndex]]||h.push(n);for(h.length&&this.remove(h,t),u=0,s=p.length;u<s;u++)this._index(p[u])}if(p.length||b&&b.length)if(f&&(a=!0),null!=l)for(u=0,s=p.length;u<s;u++)this.models.splice(l+u,0,p[u]);else{var w=b||p;for(u=0,s=w.length;u<s;u++)this.models.push(w[u])}if(a&&this.sort({silent:!0}),!t.silent){for(u=0,s=p.length;u<s;u++)(n=p[u]).trigger?n.trigger("add",n,this,t):this.trigger("add",n,this,t);(a||b&&b.length)&&this.trigger("sort",this,t)}return c?e[0]:e},get:function(e,t){if(null!=e){var r=this.mainIndex,n=this._indexes[t||r];return n&&(n[e]||void 0!==e[r]&&n[e[r]])||this._indexes.cid[e]||this._indexes.cid[e.cid]}},at:function(e){return this.models[e]},remove:function(e,t){var r,n,i,o,a=!op(e);for(t||(t={}),r=0,n=(e=a?[e]:HP.call(e)).length;r<n;r++)(i=e[r]=this.get(e[r]))&&(this._deIndex(i),o=this.models.indexOf(i),this.models.splice(o,1),t.silent||(t.index=o,i.trigger?i.trigger("remove",i,this,t):this.trigger("remove",i,this,t)),this._removeReference(i,t));return a?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,n=this.models.length;r<n;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,Gk({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},sort:function(e){var r=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),"string"==typeof this.comparator?this.models.sort(function(e,t){return(t=e.get?(e=e.get(r.comparator),t.get(r.comparator)):(e=e[r.comparator],t[r.comparator]))<e||void 0===e?1:e<t||void 0===t?-1:0}):1===this.comparator.length?this.models.sort(function(e,t){return e=r.comparator(e),(t=r.comparator(t))<e||void 0===e?1:e<t||void 0===t?-1:0}):this.models.sort(VP(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},_reset:function(){var e=HP.call(this.indexes||[]),t=0;e.push(this.mainIndex),e.push("cid");var r=e.length;for(this.models=[],this._indexes={};t<r;t++)this._indexes[e[t]]={}},_prepareModel:function(e,t){if(!this.model)return e;if(this.isModel(e))return e.collection||(e.collection=this),e;var r=new(((t=t?Gk({},t):{}).collection=this).model)(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_deIndex:function(e,t,r){var n;if(void 0===t)for(var i in this._indexes)n=e.hasOwnProperty(i)?e[i]:e.get&&e.get(i),delete this._indexes[i][n];else{if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");delete this._indexes[t][r]}},_index:function(e,t){var r;if(void 0===t)for(var n in this._indexes)null!=(r=e.hasOwnProperty(n)?e[n]:e.get&&e.get(n))&&(this._indexes[n][r]=e);else{if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");(r=e[t]||e.get&&e.get(t))&&(this._indexes[t][r]=e)}},_isDerivedIndex:function(e){return!(!e||"object"!=typeof e._derived)&&0<=Object.keys(e._derived).indexOf(this.mainIndex)},_addReference:function(e,t){this._index(e),e.collection||(e.collection=this),e.on&&e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,this._deIndex(e),e.off&&e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){var i=e.split(":")[0],o=e.split(":")[1];("add"!==i&&"remove"!==i||r===this)&&("destroy"===i&&this.remove(t,n),t&&"change"===i&&o&&this._indexes[o]&&(this._deIndex(t,o,t.previousAttributes()[o]),this._index(t,o)),this.trigger.apply(this,arguments))}}),Object.defineProperties(JP.prototype,{length:{get:function(){return this.models.length}},isCollection:{get:function(){return!0}}});["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"].forEach(function(e){JP.prototype[e]=function(){return this.models[e].apply(this.models,arguments)}}),JP.prototype.each=JP.prototype.forEach,JP.extend=WP;var YP=JP,$P=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(YP),n=i(BP);function i(e){return e&&e.__esModule?e:{default:e}}var o=r.default.extend({mainIndex:"scope",model:n.default,namespace:"Credentials"});t.default=o});e($P);var KP=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o,a,u,s,c=P(rc),l=P(_f),f=P(Mf),d=P(Fk),p=P(Tf),h=P(Rf),v=P(oc),g=P(xv),m=P(ud),y=P(Rv),b=P(Nk),_=P(Uv),w=P(Mm),S=P(kT),k=P(OT),E=P(BP),T=P($P);function P(e){return e&&e.__esModule?e:{default:e}}function O(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}var C=S.default.extend((r=(0,Dk.oneFlight)({keyFactory:function(e){return e}}),n=(0,yT.waitForValue)("@"),i=(0,yT.persist)("@"),o=(0,yT.waitForValue)("@"),a=(0,Dk.whileInFlight)("isRefreshing"),u=(0,yT.waitForValue)("@"),O(s={collections:{userTokens:T.default},dataTypes:{token:(0,Dk.makeStateDataType)(E.default,"token").dataType},derived:{canAuthorize:{deps:["supertoken","supertoken.canAuthorize","canRefresh"],fn:function(){return Boolean(this.supertoken&&this.supertoken.canAuthorize||this.canRefresh)}},canRefresh:{deps:["supertoken","supertoken.canRefresh"],fn:function(){return!!this.config.jwtRefreshCallback||Boolean(this.supertoken&&this.supertoken.canRefresh)}}},props:{supertoken:(0,Dk.makeStateDataType)(E.default,"token").prop},namespace:"Credentials",session:{isRefreshing:{default:!1,type:"boolean"},ready:{default:!1,type:"boolean"},refreshTimer:{default:void 0,type:"any"}},buildLoginUrl:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{clientType:"public"};if(e.state&&!(0,m.default)(e.state))throw new Error("if specified, `options.state` must be an object");return e.client_id=this.config.client_id,e.redirect_uri=this.config.redirect_uri,e.scope=this.config.scope,(e=(0,y.default)(e)).response_type||(e.response_type="public"===e.clientType?"token":"code"),(0,v.default)(e,"clientType"),e.state&&((0,g.default)(e.state)?delete e.state:e.state=Dk.base64.toBase64Url((0,h.default)(e.state))),this.config.authorizeUrl+"?"+_.default.stringify(e)},buildLogoutUrl:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.config.logoutUrl+"?"+_.default.stringify((0,p.default)({cisService:this.config.service,goto:this.config.redirect_uri},e))},calcRefreshTimeout:function(e){return Math.floor((Math.floor(4*Math.random())+6)/10*e)},constructor:function(){var t=this;this._dataTypes=(0,y.default)(this._dataTypes),(0,d.default)(this._dataTypes).forEach(function(e){t._dataTypes[e].set&&(t._dataTypes[e].set=t._dataTypes[e].set.bind(t))});for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];(0,f.default)(S.default,this,r)},downscope:function(t){var r=this;return this.supertoken.downscope(t).catch(function(e){return r.logger.error("credentials: failed to downscope supertoken to "+t,e),r.logger.error("credentials: falling back to supertoken for "+t),l.default.resolve(new E.default((0,p.default)({scope:t},r.supertoken.serialize())),{parent:r})})},getClientToken:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.logger.info("credentials: requesting client credentials grant"),(e=e||{}).scope=e.scope||"webexsquare:admin",this.spark.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"client_credentials",scope:e.scope,self_contained_token:!0},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(e){return new E.default(e.body,{parent:t})}).catch(function(e){if(400!==e.statusCode)return l.default.reject(e);var t=k.default.select(e.body.error);return l.default.reject(new t(e._res||e))})},getUserToken:function(t){var r=this;return l.default.resolve(!this.isRefreshing||new l.default(function(e){r.logger.info("credentials: token refresh inflight; delaying getUserToken until refresh completes"),r.once("change:isRefreshing",function(){r.logger.info("credentials: token refresh complete; reinvoking getUserToken"),e()})})).then(function(){if(!r.canAuthorize)return r.logger.info("credentials: cannot produce an access token from current state"),l.default.reject(new Error("Current state cannot produce an access token"));if(t||(t=(0,CT.filterScope)("spark:kms",r.config.scope)),(t=(0,CT.sortScope)(t))===(0,CT.sortScope)(r.config.scope))return l.default.resolve(r.supertoken);var e=r.userTokens.get(t);return e&&e.access_token?l.default.resolve(e):r.downscope(t).then((0,Dk.tap)(function(e){return r.userTokens.add(e)}))})},initialize:function(e,t){var r=this;e&&("string"==typeof e&&(this.supertoken=e),e.access_token&&(this.supertoken=e),e.authorization&&(e.authorization.supertoken?this.supertoken=e.authorization.supertoken:this.supertoken=e.authorization),this.supertoken&&this.supertoken.expires&&this.scheduleRefresh(this.supertoken.expires)),(0,f.default)(S.default.prototype.initialize,this,[e,t]),this.listenToOnce(this.parent,"change:config",function(){if(r.config.authorizationString){var e=w.default.parse(r.config.authorizationString,!0);r.config.client_id=e.query.client_id,r.config.redirect_uri=e.query.redirect_uri,r.config.scope=e.query.scope,r.config.authorizeUrl=e.href.substr(0,e.href.indexOf("?"))}}),this.spark.once("loaded",function(){r.ready=!0})},invalidate:function(){this.logger.info("credentials: invalidating tokens"),this.refreshTimer&&(clearTimeout(this.refreshTimer),this.unset("refreshTimer"));try{this.unset("supertoken")}catch(e){this.logger.warn("credentials: failed to clear supertoken",e)}for(;this.userTokens.models.length;)try{this.userTokens.remove(this.userTokens.models[0])}catch(e){this.logger.warn("credentials: failed to remove user token",e)}return this.logger.info("credentials: finished removing tokens"),l.default.resolve()},refresh:function(){var r=this;this.logger.info("credentials: refresh requested");var e=this.supertoken,t=(0,b.default)(this.userTokens.models);return this.config.jwtRefreshCallback?this.config.jwtRefreshCallback(this.spark).then(function(e){return r.spark.authorization.requestAccessTokenFromJwt({jwt:e})}):e.refresh().then(function(e){return r.refreshTimer&&(clearTimeout(r.refreshTimer),r.unset("refreshTimer")),r.supertoken=e,l.default.all(t.map(function(t){return r.downscope(t.scope).then(function(e){return r.logger.info("credentials: revoking token for "+t.scope),t.revoke().catch(function(e){r.logger.warn("credentials: failed to revoke user token",e)}).then(function(){r.userTokens.remove(t.scope),r.userTokens.add(e)})})}))}).then(function(){r.scheduleRefresh(r.supertoken.expires)}).catch(function(e){if(e instanceof k.default.InvalidRequestError){for(r.unset("supertoken");r.userTokens.models.length;)try{r.userTokens.remove(r.userTokens.models[0])}catch(e){r.logger.warn("credentials: failed to remove user token",e)}r.spark.trigger("client:InvalidRequestError")}return l.default.reject(e)})},scheduleRefresh:function(e){var t=this,r=e-Date.now();if(0<r){var n=this.calcRefreshTimeout(r);this.refreshTimer=(0,Uk.safeSetTimeout)(function(){return t.refresh()},n)}else this.refresh()},version:"1.43.2"},"getUserToken",[r,n],(0,c.default)(s,"getUserToken"),s),O(s,"initialize",[i],(0,c.default)(s,"initialize"),s),O(s,"invalidate",[Dk.oneFlight,o],(0,c.default)(s,"invalidate"),s),O(s,"refresh",[Dk.oneFlight,a,u],(0,c.default)(s,"refresh"),s),s));t.default=C});e(KP);var XP=function(e,t){return null==e||uv(e,t)};var ZP=function(e,t,r){return null==e?e:DT(e,t,r)};var QP=function(e,t,r){(void 0===r||Df(e[t],r))&&(void 0!==r||t in e)||Yd(e,t,r)};var eO=function(e,t){return"__proto__"==t?void 0:e[t]};var tO=function(e){return Xd(e,xp(e))};var rO=function(e,t,r,n,i,o,a){var u=eO(e,r),s=eO(t,r),c=a.get(s);if(c)QP(e,r,c);else{var l=o?o(u,s,r+"",e,t,a):void 0,f=void 0===l;if(f){var d=op(s),p=!d&&up(s),h=!d&&!p&&gp(s);l=s,d||p||h?l=op(u)?u:LE(u)?Ip(u):p?Ap(s,!(f=!1)):h?_h(s,!(f=!1)):[]:pv(s)||ip(s)?ip(l=u)?l=tO(u):(!ud(u)||n&&cd(u))&&(l=Eh(s)):f=!1}f&&(a.set(s,l),i(l,s,n,o,a),a.delete(s)),QP(e,r,l)}};var nO=function n(i,o,a,u,s){i!==o&&Xk(o,function(e,t){if(ud(e))s||(s=new Vd),rO(i,o,t,a,n,u,s);else{var r=u?u(eO(i,t),e,t+"",i,o,s):void 0;void 0===r&&(r=e),QP(i,t,r)}},xp)},iO=Bk(function(e,t,r){nO(e,t,r)});var oO=function(e,t,r){var n=null==e?void 0:iv(e,t);return void 0===n?r:n},aO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(_f),o=c(oc),r=c(Gw),n=c(ey),a=c(iy),u=c(Vw),s=c(Hw);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(t){var r=this;return t.headers=t.headers||{},"authorization"in t.headers||"auth"in t?(t.headers.authorization||(0,o.default)(t.headers,"authorization"),i.default.resolve(t)):this.requiresCredentials(t).then(function(e){return e?r.spark.credentials.getUserToken().then(function(e){return t.headers.authorization=e.toString(),t}):t})}},{key:"requiresCredentials",value:function(t){var r=this;if(t.uri&&t.uri.includes(this.spark.config.device.preDiscoveryServices.hydraServiceUrl))return i.default.resolve(!0);if(!this.spark.internal.device)return i.default.resolve(!1);if(t.uri&&t.runWhitelistedDomains&&this.spark.config.device.whitelistedServiceDomains.filter(function(e){return t.uri.includes(e)}).length)return i.default.resolve(!0);return this.spark.internal.device.isSpecificService("hydra",t.uri).then(function(e){return!!e||(t.service?r.spark.internal.device.isService(t.service):!!t.uri&&r.spark.internal.device.isServiceUrl(t.uri))})}},{key:"onResponseError",value:function(t,r){var n=this;return this.shouldAttemptReauth(r,t).then(function(e){return e&&(n.spark.logger.info("auth: received 401, attempting to reauthenticate"),r.options.headers&&(0,o.default)(r.options.headers,"authorization"),n.spark.credentials.canRefresh)?n.spark.credentials.refresh().then(function(){return n.replay(t)}):i.default.reject(r)})}},{key:"replay",value:function(e){return e.replayCount?e.replayCount+=1:e.replayCount=1,e.replayCount>this.spark.config.maxAuthenticationReplays?(this.spark.logger.error("auth: failed after "+this.spark.config.maxAuthenticationReplays+" replay attempts"),i.default.reject(new Error("Failed after "+this.spark.config.maxAuthenticationReplays+" replay attempts"))):(this.spark.logger.info("auth: replaying request "+e.replayCount+" time"),this.spark.request(e))}},{key:"shouldAttemptReauth",value:function(e,t){return t&&!1===t.shouldRefreshAccessToken?i.default.resolve(!1):401===e.statusCode?i.default.resolve(!0):i.default.resolve(!1)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=l});e(aO);var uO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(_f),n=s(Gw),i=s(ey),o=s(iy),a=s(Vw),u=s(Hw);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){return e.$timings=e.$timings||{},e.$timings.networkStart=Date.now(),e}},{key:"onResponse",value:function(e,t){return e.$timings.networkEnd=Date.now(),t}},{key:"onResponseError",value:function(e,t){return e.$timings.networkEnd=Date.now(),r.default.reject(t)}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(zP.Interceptor);t.default=c});e(uO);var sO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(_f),n=s(Gw),i=s(ey),o=s(iy),a=s(Vw),u=s(Hw);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){return e.noTransform?e:this.spark.transform("outbound",e)}},{key:"onResponse",value:function(e,t){return this.spark.transform("inbound",t)}},{key:"onResponseError",value:function(e,t){return this.spark.transform("inbound",t).then(function(e){return r.default.reject(e||t)})}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=c});e(sO);var cO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(_f),r=l(oc),i=l(Gw),o=l(ey),a=l(iy),u=l(Vw),s=l(Hw),c=l(Nk);function l(e){return e&&e.__esModule?e:{default:e}}var f="cisco-no-http-redirect",d="cisco-location",p=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){return e.uri.includes(this.spark.config.credentials.samlUrl)||e.uri.includes(this.spark.config.credentials.tokenUrl)||e.uri.includes(this.spark.config.credentials.authorizeUrl)||(f in e.headers?e.headers[f]||(0,r.default)(e.headers,f):(e.headers[f]=!0,e.$redirectCount=e.$redirectCount||0)),e}},{key:"onResponse",value:function(e,t){if(t.headers&&t.headers[d])return(e=(0,c.default)(e)).uri=t.headers[d],e.$redirectCount+=1,e.$redirectCount>this.spark.config.maxAppLevelRedirects?n.default.reject(new Error("Maximum redirects exceeded")):this.spark.request(e);if(t.headers&&t.body&&2000002===t.body.errorCode&&t.body.location){if(e=(0,c.default)(e),t.options&&t.options.qs){var r=t.body.location.split("?");e.uri=r[0]}else e.uri=t.body.location;return e.$redirectCount+=1,e.$redirectCount>this.spark.config.maxLocusRedirects?n.default.reject(new Error("Maximum redirects exceeded")):this.spark.request(e)}return t}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=p});e(cO);var lO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(_f),r=c(Gw),i=c(ey),o=c(iy),a=c(Vw),u=c(Hw),s=c(oO);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){var t=(0,s.default)(this,"spark.logger",console);try{this.spark.trigger("request:start",e)}catch(e){t.warn("event handler for request:start failed ",e)}return n.default.resolve(e)}},{key:"onRequestError",value:function(e,t){var r=(0,s.default)(this,"spark.logger",console);try{this.spark.trigger("request:end",e,t),this.spark.trigger("request:failure",e,t)}catch(e){r.warn("event handler for request:end failed ",e)}return n.default.reject(t)}},{key:"onResponse",value:function(e,t){var r=(0,s.default)(this,"spark.logger",console);try{this.spark.trigger("request:success",t.options,t)}catch(e){r.warn("event handler for request:success failed ",e)}return n.default.resolve(t)}},{key:"onResponseError",value:function(e,t){var r=(0,s.default)(this,"spark.logger",console);try{this.spark.trigger("request:end",e,t),this.spark.trigger("request:failure",e,t)}catch(e){r.warn("event handler for request:failure failed ",e)}return n.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=l});e(lO);var fO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(_f),r=l(Gw),i=l(ey),o=l(iy),a=l(Vw),u=l(Hw),s=(l(Mv),l(eE),l(op),l(xE)),c=l(oO);l(Cm);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){var t=(0,c.default)(this,"spark.logger",console);return t.info("/**********************************************************************\\ "),t.info("Request:",e.method||"GET",e.uri),t.info("WEBEX_TRACKINGID: ",(0,c.default)(e,"headers.trackingid")),(0,s.default)(e,"headers.x-trans-id")&&t.info("X-Trans-ID: ",(0,c.default)(e,"headers.x-trans-id")),(0,s.default)(this,"spark.internal.device.userId")&&t.info("User ID:",(0,c.default)(this,"spark.internal.device.userId")),n.default.resolve(e)}},{key:"onRequestError",value:function(e,t){this.onRequest(e);var r=(0,c.default)(this,"spark.logger",console);return r.error("Request Failed: ",t.stack),r.info("\\**********************************************************************/"),n.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=f});e(fO);var dO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(_f),n=s(Gw),i=s(ey),o=s(iy),a=s(Vw),u=s(Hw);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){return e.$timings=e.$timings||{},e.$timings.requestStart=Date.now(),e}},{key:"onRequestError",value:function(e){return e.$timings.requestEnd=e.$timings.requestFail=Date.now(),r.default.reject(e)}},{key:"onResponse",value:function(e,t){return e.$timings.requestEnd=Date.now(),r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){return e.$timings.requestEnd=e.$timings.requestFail=Date.now(),r.default.reject(t)}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(zP.Interceptor);t.default=c});e(dO);var pO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(_f),n=(c(mb),c(Gw)),i=c(ey),o=c(iy),a=c(Vw),u=c(Hw),s=(c(Mv),c(oO));c(Cm);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onResponse",value:function(e,t){return this.printResponseHeader(e,t),(0,s.default)(this,"spark.logger",console).info("\\**********************************************************************/"),t}},{key:"onResponseError",value:function(e,t){return this.printResponseHeader(e,t),(0,s.default)(this,"spark.logger",console).info("\\**********************************************************************/"),r.default.reject(t)}},{key:"printResponseHeader",value:function(e,t){var r=(0,s.default)(this,"spark.logger",console);r.info("Status Code:",t.statusCode),r.info("WEBEX_TRACKINGID:",(0,s.default)(e,"headers.trackingid")||(0,s.default)(t,"headers.trackingid")),r.info("Network duration:",e.$timings.networkEnd-e.$timings.networkStart),r.info("Processing duration:",e.$timings.requestEnd-e.$timings.requestStart)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=l});e(pO);var hO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(oc),n=s(Gw),i=s(ey),o=s(iy),a=s(Vw),u=s(Hw);function s(e){return e&&e.__esModule?e:{default:e}}var c=new(s(Ty).default),l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){if(e.headers=e.headers||{},"trackingid"in e.headers)return e.headers.trackingid||(0,r.default)(e.headers,"trackingid"),e;if(this.requiresTrackingId(e)&&(e.headers.trackingid=this.spark.sessionId+"_"+this.sequence),e.headers.trackingid&&e.replayCount){var t=e.headers.trackingid.split("+");t[1]=e.replayCount,e.headers.trackingid=t.join("+")}return e}},{key:"requiresTrackingId",value:function(e){return!e.headers.trackingid}},{key:"sequence",get:function(){var e=c.get(this)||0;return e+=1,c.set(this,e),e}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=l});e(hO);var vO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(oc),u=a(Gw),s=a(ey),n=a(iy),c=a(Vw),i=a(Hw),o=a(Ty),l=a(oO);function a(e){return e&&e.__esModule?e:{default:e}}var f=new o.default,d=function(e){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,a);var t=(0,l.default)(e,"spark.config.appName"),r=(0,l.default)(e,"spark.config.appVersion"),n=(0,l.default)(e,"spark.ciscospark",!1)?"ciscospark":"spark-js-sdk",i=(0,l.default)(e,"spark.version","development"),o=(0,c.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));return t&&r?f.set(o,t+"/"+r+" ("+(Dk.inBrowser?"web":"node")+") "+n+"/"+i):f.set(o,n+"/"+i+" ("+(Dk.inBrowser?"web":"node")+")"),o}return(0,i.default)(a,e),(0,n.default)(a,[{key:"onRequest",value:function(e){return e.headers=e.headers||{},e.uri&&(e.uri.includes(this.spark.config.credentials.samlUrl)||e.uri.includes(this.spark.config.credentials.tokenUrl)||e.uri.includes(this.spark.config.credentials.authorizeUrl))||("spark-user-agent"in e.headers?e.headers["spark-user-agent"]||(0,r.default)(e.headers,"spark-user-agent"):e.headers["spark-user-agent"]=f.get(this)),e}}],[{key:"create",value:function(){return new a({spark:this})}}]),a}(zP.Interceptor);t.default=d});e(vO);var gO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(_f),a=o(Tb),u=o(Gw),s=o(ey),c=o(Vw),n=o(iy),i=o(Hw);function o(e){return e&&e.__esModule?e:{default:e}}var l=new(o(Ty).default),f=/.*(idbroker|identity)(bts)?.webex.com\/([^/]+)/,d=function(e){function o(){var e;(0,s.default)(this,o);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=(0,c.default)(this,(e=o.__proto__||(0,u.default)(o)).call.apply(e,[this].concat(r)));return l.set(i,new a.default),i}return(0,i.default)(o,e),(0,n.default)(o,null,[{key:"create",value:function(){return new o({spark:this})}}]),(0,n.default)(o,[{key:"onRequest",value:function(e){return this.isRateLimited(e.uri)?r.default.reject(new Error("API rate limited "+e.uri)):r.default.resolve(e)}},{key:"onResponseError",value:function(e,t){return 429===t.statusCode&&(e.uri.includes("idbroker")||e.uri.includes("identity"))&&this.setRateLimitExpiry(e.uri,this.extractRetryAfterTime(e)),r.default.reject(t)}},{key:"extractRetryAfterTime",value:function(e){var t=e.headers["retry-after"]||null;return null===t||t<=0?6e4:3600<t?36e5:1e3*t}},{key:"setRateLimitExpiry",value:function(e,t){var r=this.getApiName(e);if(!r)return!1;var n=(new Date).getTime()+t;return l.get(this).set(r,n)}},{key:"getRateLimitStatus",value:function(e){var t=this.getApiName(e);if(!t)return!1;var r=(new Date).getTime(),n=l.get(this);return void 0!==n.get(t)&&r<n.get(t)}},{key:"getApiName",value:function(e){if(!e)return null;var t=e.match(f);return t?t[2]:null}},{key:"isRateLimited",value:function(e){return!(!e||!e.includes("idbroker")&&!e.includes("identity"))&&this.getRateLimitStatus(e)}}]),o}(zP.Interceptor);t.default=d});e(gO);var mO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="https://idbroker.webex.com";t.default={maxAppLevelRedirects:10,maxLocusRedirects:5,maxAuthenticationReplays:1,maxReconnectAttempts:1,onBeforeLogout:[],trackingIdPrefix:"spark-js-sdk",trackingIdSuffix:"",AlternateLogger:void 0,credentials:{authorizationString:ws.env.AUTHORIZATION_STRING,authorizeUrl:r+"/idb/oauth2/v1/authorize",tokenUrl:r+"/idb/oauth2/v1/access_token",revokeUrl:r+"/idb/oauth2/v1/revoke",logoutUrl:r+"/idb/oauth2/v1/logout",client_id:ws.env.CLIENT_ID,client_secret:ws.env.CLIENT_SECRET,redirect_uri:ws.env.REDIRECT_URI,scope:ws.env.SCOPE,cisService:"spark"},device:{preDiscoveryServices:{hydraServiceUrl:"https://api.ciscospark.com/v1"},whitelistedServiceDomains:["wbx2.com","ciscospark.com","webex.com"]},payloadTransformer:{predicates:[],transforms:[]},storage:{boundedAdapter:ST.MemoryStoreAdapter,unboundedAdapter:ST.MemoryStoreAdapter}}});e(mO);for(var yO=t(function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}}),bO=[],_O=0;_O<256;++_O)bO[_O]=(_O+256).toString(16).substr(1);var wO,SO,kO=function(e,t){var r=t||0,n=bO;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")},EO=0,TO=0;var PO=function(e,t,r){var n=t&&r||0,i=t||[],o=(e=e||{}).node||wO,a=void 0!==e.clockseq?e.clockseq:SO;if(null==o||null==a){var u=yO();null==o&&(o=wO=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==a&&(a=SO=16383&(u[6]<<8|u[7]))}var s=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:TO+1,l=s-EO+(c-TO)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||EO<s)&&void 0===e.nsecs&&(c=0),1e4<=c)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");EO=s,SO=a;var f=(1e4*(268435455&(s+=122192928e5))+(TO=c))%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=255&f;var d=s/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var p=0;p<6;++p)i[n+p]=o[p];return t||kO(i)};var OO=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||yO)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||kO(i)},CO=OO;CO.v1=PO,CO.v4=OO;var MO=CO,jO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=r(BT),c=r(Fk),i=r(FE),l=r(iO),o=r(cd),f=r(op),d=r(xE),p=r(oO);function r(e){return e&&e.__esModule?e:{default:e}}function h(t,r,e){(t._derived[r]={fn:(0,o.default)(e)?e:e.fn,cache:!1!==e.cache,depList:e.deps||[]}).depList.forEach(function(e){t._deps[e]=(0,i.default)(t._deps[e]||[],[r])}),(0,n.default)(t,r,{get:function(){return this._getDerivedProperty(r)},set:function(){throw new TypeError("`"+r+"` is a derived property, it can't be set directly.")}})}t.default=function(a,u,s){return a.registerPlugin=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if((!a.prototype._children[t]||r.replace)&&(a.prototype._children[t]=e,r.proxies&&r.proxies.forEach(function(e){h(a.prototype,e,{deps:[t+"."+e],fn:function(){return this[t][e]}})}),r.interceptors&&(0,c.default)(r.interceptors).forEach(function(e){s[e]=r.interceptors[e]}),r.config&&(0,l.default)(u,r.config),(0,d.default)(r,"payloadTransformer.predicates")&&(u.payloadTransformer.predicates=u.payloadTransformer.predicates.concat((0,p.default)(r,"payloadTransformer.predicates"))),(0,d.default)(r,"payloadTransformer.transforms")&&(u.payloadTransformer.transforms=u.payloadTransformer.transforms.concat((0,p.default)(r,"payloadTransformer.transforms"))),r.onBeforeLogout&&(u.onBeforeLogout=u.onBeforeLogout||[],((0,f.default)(r.onBeforeLogout)?r.onBeforeLogout:[r.onBeforeLogout]).forEach(function(e){return u.onBeforeLogout.push({plugin:t,fn:e})})),e.prototype._definition.ready)){var n=a.prototype._derived.ready,i=n.fn,o={deps:n.depList.concat(t+".ready"),fn:i};h(a.prototype,"ready",o)}},a}});e(jO);var xO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var d=r(BT),p=r(Fk),h=r(FE),v=r(iO),g=r(cd),m=r(op),y=r(xE),b=r(oO);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(c,l,f){return c.registerPlugin=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!c.prototype._children[t]||r.replace){if(c.prototype._children[t]=e,r.proxies)throw new Error("Proxies are not currently supported for private plugins");var n,i,o;if(r.interceptors&&(0,p.default)(r.interceptors).forEach(function(e){f[e]=r.interceptors[e]}),r.config&&(0,v.default)(l,r.config),(0,y.default)(r,"payloadTransformer.predicates")&&(l.payloadTransformer.predicates=l.payloadTransformer.predicates.concat((0,b.default)(r,"payloadTransformer.predicates"))),(0,y.default)(r,"payloadTransformer.transforms")&&(l.payloadTransformer.transforms=l.payloadTransformer.transforms.concat((0,b.default)(r,"payloadTransformer.transforms"))),r.onBeforeLogout&&(l.onBeforeLogout=l.onBeforeLogout||[],((0,m.default)(r.onBeforeLogout)?r.onBeforeLogout:[r.onBeforeLogout]).forEach(function(e){return l.onBeforeLogout.push({plugin:t,fn:e})})),e.prototype._definition.ready){var a=c.prototype._derived.ready,u=a.fn,s={deps:a.depList.concat(t+".ready"),fn:u};n=c.prototype,i="ready",o=s,(n._derived[i]={fn:(0,g.default)(o)?o:o.fn,cache:!1!==o.cache,depList:o.deps||[]}).depList.forEach(function(e){n._deps[e]=(0,h.default)(n._deps[e]||[],[i])}),(0,d.default)(n,i,{get:function(){return this._getDerivedProperty(i)},set:function(){throw new TypeError("`"+i+"` is a derived property, it can't be set directly.")}})}}},c}});e(xO);var RO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=o(Fk),r=o(oT),i=o(Cm);function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend({derived:{ready:{deps:[],fn:function(){var r=this;return(0,n.default)(this._children).reduce(function(e,t){return e&&r[t]&&!1!==r[t].ready},!0)}}},inspect:function(e){return i.default.inspect(this.serialize({props:!0,session:!0,derived:!0}),{depth:e})}});t.default=a});e(RO);var AO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=F(rc),i=F(oc),u=F(Tf),s=F(uT),c=F(_f),l=F(Fk),f=F(Mf),o=F(XP),a=F(ZP),d=F(Mv),p=F(iO),h=F(rv),v=F(eE),g=F(cd),m=F(xE),y=F(oO),b=F(X_);t.registerPlugin=function(e,t,r){J.registerPlugin(e,t,r)},t.registerInternalPlugin=function(e,t,r){L.default.registerPlugin(e,t,r)};var _=F(oT),w=F(aO),S=F(uO),k=F(sO),E=F(cO),T=F(lO),P=(F(fO),F(dO)),O=(F(pO),F(qP)),C=F(hO),M=F(vO),j=F(gO),x=F(mO),R=F(Cm),A=F(MO),I=F(jO),D=F(xO),L=F(RO);function F(e){return e&&e.__esModule?e:{default:e}}var N,U,z,q,B,W,G={SparkTrackingIdInterceptor:C.default.create,RequestEventInterceptor:T.default.create,RateLimitInterceptor:j.default.create,RequestLoggerInterceptor:void 0,ResponseLoggerInterceptor:void 0,RequestTimingInterceptor:P.default.create,UrlInterceptor:void 0,SparkUserAgentInterceptor:M.default.create,AuthInterceptor:w.default.create,KmsDryErrorInterceptor:void 0,PayloadTransformerInterceptor:k.default.create,ConversationInterceptor:void 0,RedirectInterceptor:E.default.create,HttpStatusInterceptor:function(){return zP.HttpStatusInterceptor.create({error:O.default})},NetworkTimingInterceptor:S.default.create},V=["ResponseLoggerInterceptor","RequestTimingInterceptor","RequestEventInterceptor","SparkTrackingIdInterceptor","RateLimitInterceptor"],H=["HttpStatusInterceptor","NetworkTimingInterceptor","RequestLoggerInterceptor","RateLimitInterceptor"],J=_.default.extend((r={version:"1.43.2",children:{internal:L.default},constructor:function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];return"string"==typeof r?r={credentials:{supertoken:{access_token:r}}}:(["credentials.authorization","authorization","credentials.supertoken.supertoken","supertoken","access_token","credentials.authorization.supertoken"].forEach(function(e){var t=(0,y.default)(r,e);t&&((0,o.default)(r,e),(0,a.default)(r,"credentials.supertoken",t))}),["credentials","credentials.authorization"].forEach(function(e){var t=(0,y.default)(r,e);"string"==typeof t&&((0,o.default)(r,e),(0,a.default)(r,"credentials.supertoken",t))}),"string"==typeof(0,y.default)(r,"credentials.access_token")&&(0,a.default)(r,"credentials.supertoken",r.credentials)),(0,f.default)(_.default,this,[r,e])},derived:{boundedStorage:{deps:[],fn:function(){return(0,ST.makeSparkStore)("bounded",this)}},unboundedStorage:{deps:[],fn:function(){return(0,ST.makeSparkStore)("unbounded",this)}},ready:{deps:["loaded","internal.ready"],fn:function(){var r=this;return this.loaded&&(0,l.default)(this._children).reduce(function(e,t){return e&&r[t]&&!1!==r[t].ready},!0)}}},session:{config:{type:"object"},loaded:{default:!1,type:"boolean"},request:{setOnce:!0,type:"any"},sessionId:{setOnce:!0,type:"string"}},refresh:function(){var e;return(e=this.credentials).refresh.apply(e,arguments)},transform:function(o,r){var a=this,e=this.config.payloadTransformer.predicates.filter(function(e){return!e.direction||e.direction===o}),n={spark:this};return c.default.all(e.map(function(t){return t.test(n,r).then(function(e){if(e)return t.extract(r).then(function(e){return{name:t.name,target:e}})})})).then(function(e){return e.filter(function(e){return Boolean(e)}).reduce(function(e,t){var r=t.name,n=t.target,i=t.alias;return e.then(function(){return i?a.applyNamedTransform(o,i,n):a.applyNamedTransform(o,r,n)})},c.default.resolve())}).then(function(){return r})},applyNamedTransform:function(n,i,t){for(var e=arguments.length,r=Array(3<e?e-3:0),o=3;o<e;o++)r[o-3]=arguments[o];var a=this;return(0,v.default)(i)&&(r.unshift(t),t=i,i={spark:this,transform:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a.applyNamedTransform.apply(a,[n,i].concat(t))}}),i.spark.config.payloadTransformer.transforms.filter(function(e){return e.name===t&&(!e.direction||e.direction===n)}).reduce(function(e,t){return e.then(function(){var e;return t.alias?(e=i).transform.apply(e,[t.alias].concat((0,s.default)(r))):c.default.resolve(t.fn.apply(t,[i].concat((0,s.default)(r))))})},c.default.resolve()).then(function(){return(0,h.default)(r)})},getWindow:function(){return window},initialize:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.config=(0,p.default)({},x.default,e.config),this.trigger("change:config");var t=function e(){i.loaded&&(i.trigger("loaded"),i.stopListening(i,"change:loaded",e))};ss(function(){i.listenToAndRun(i,"change:loaded",t)});var r=function e(){i.ready&&(i.trigger("ready"),i.stopListening(i,"change:ready",e))};ss(function(){i.listenToAndRun(i,"change:ready",r)}),(0,l.default)(this.constructor.prototype._children).forEach(function(n){i.listenTo(i[n],"change",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];t.unshift("change:"+n),i.trigger.apply(i,t)})});var n=function(e,t){var r=G[t];return(0,g.default)(r)&&e.push((0,f.default)(r,i,[])),e},o=[];o=V.reduce(n,o),o=(0,l.default)(G).filter(function(e){return!(V.includes(e)||H.includes(e))}).reduce(n,o),o=H.reduce(n,o),this.request=(0,zP.defaults)({json:!0,interceptors:o});var a=(0,y.default)(this,"config.trackingIdPrefix","spark-js-sdk")+"_"+(0,y.default)(this,"config.trackingIdBase",A.default.v4());(0,m.default)(this,"config.trackingIdPrefix")&&(a+="_"+(0,y.default)(this,"config.trackingIdPrefix")),this.sessionId=a},inspect:function(e){return R.default.inspect((0,d.default)(this.serialize({props:!0,session:!0,derived:!0}),"boundedStorage","unboundedStorage","request","config"),{depth:e})},logout:function(i){for(var o=this,e=arguments.length,a=Array(1<e?e-1:0),t=1;t<e;t++)a[t-1]=arguments[t];var r=this.credentials.supertoken&&(this.credentials.supertoken.refresh_token||this.credentials.supertoken.access_token);return i=(0,u.default)({token:r},i),this.config.onBeforeLogout.reverse().reduce(function(e,t){var r=t.plugin,n=t.fn;return e.then(function(){return c.default.resolve((0,f.default)(n,o[r]||o.internal[r],[i].concat((0,s.default)(a)))).catch(function(e){o.logger.warn("onBeforeLogout from plugin "+r+": failed",e)})})},c.default.resolve()).then(function(){return c.default.all([o.boundedStorage.clear(),o.unboundedStorage.clear()])}).then(function(){var e;return(e=o.credentials).invalidate.apply(e,(0,s.default)(a))}).then(function(){var e;return o.authorization&&o.authorization.logout&&(e=o.authorization).logout.apply(e,[i].concat((0,s.default)(a)))}).then(function(){return o.trigger("client:logout")})},measure:function(){var e;return this.metrics?(e=this.metrics).sendUnstructured.apply(e,arguments):c.default.resolve()},upload:function(n){var i=this;if(!n.file)return c.default.reject(new Error("`options.file` is required"));n.phases=n.phases||{},n.phases.initialize=n.phases.initialize||{},n.phases.upload=n.phases.upload||{},n.phases.finalize=n.phases.finalize||{},(0,b.default)(n.phases.initialize,{method:"POST"},(0,d.default)(n,"file","phases")),(0,b.default)(n.phases.upload,{method:"PUT",json:!1,withCredentials:!1,body:n.file,headers:{"x-trans-id":A.default.v4(),authorization:void 0}}),(0,b.default)(n.phases.finalize,{method:"POST"},(0,d.default)(n,"file","phases"));var t=new Q_.EventEmitter,e=this._uploadPhaseInitialize(n).then(function(){var e=i._uploadPhaseUpload(n);return(0,Dk.transferEvents)("progress",e,t),e}).then(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._uploadPhaseFinalize.apply(i,[n].concat(t))}).then(function(e){return e.body});return(0,Dk.proxyEvents)(t,e),e},_uploadPhaseInitialize:function(n){var i=this;return this.logger.debug("client: initiating upload session"),this.request(n.phases.initialize).then(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._uploadApplySession.apply(i,[n].concat(t))}).then(function(e){return i.logger.debug("client: initiated upload session"),e})},_uploadApplySession:function(e,t){var r=t.body;["upload","finalize"].reduce(function(e,t){return e[t]=(0,l.default)(e[t]).reduce(function(e,t){return t.startsWith("$")&&(e[t.substr(1)]=e[t](r),(0,i.default)(e,t)),e},e[t]),e},e.phases)},_uploadPhaseUpload:function(e){var t=this;this.logger.debug("client: uploading file");var r=this.request(e.phases.upload).then(function(e){return t.logger.debug("client: uploaded file"),e});return(0,Dk.proxyEvents)(e.phases.upload.upload,r),r},_uploadPhaseFinalize:function(e){var t=this;return this.logger.debug("client: finalizing upload session"),this.request(e.phases.finalize).then(function(e){return t.logger.debug("client: finalized upload session"),e})}},N=r,U="_uploadPhaseUpload",z=[Dk.retry],q=(0,n.default)(r,"_uploadPhaseUpload"),B=r,W={},Object.keys(q).forEach(function(e){W[e]=q[e]}),W.enumerable=!!W.enumerable,W.configurable=!!W.configurable,("value"in W||W.initializer)&&(W.writable=!0),W=z.slice().reverse().reduce(function(e,t){return t(N,U,e)||e},W),B&&void 0!==W.initializer&&(W.value=W.initializer?W.initializer.call(B):void 0,W.initializer=void 0),void 0===W.initializer&&(Object.defineProperty(N,U,W),W=null),r));J.version="1.43.2",(0,D.default)(L.default,x.default,G),(0,I.default)(J,x.default,G),t.default=J});e(AO);AO.registerPlugin,AO.registerInternalPlugin;var IO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.grantErrors=t.Token=t.sortScope=t.filterScope=t.Credentials=void 0,Object.defineProperty(t,"Credentials",{enumerable:!0,get:function(){return n(KP).default}}),Object.defineProperty(t,"filterScope",{enumerable:!0,get:function(){return CT.filterScope}}),Object.defineProperty(t,"sortScope",{enumerable:!0,get:function(){return CT.sortScope}}),Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return n(BP).default}}),Object.defineProperty(t,"grantErrors",{enumerable:!0,get:function(){return n(OT).default}});var r=n(KP);function n(e){return e&&e.__esModule?e:{default:e}}(0,AO.registerPlugin)("credentials",r.default,{proxies:["canAuthorize","canRefresh"]})});e(IO);IO.grantErrors,IO.Token,IO.sortScope,IO.filterScope,IO.Credentials;var DO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=u(_f),r=u(Tb),n=u(xE),o=u(kT),a=u(qP);function u(e){return e&&e.__esModule?e:{default:e}}var s=o.default.extend({session:{deferreds:{type:"object",default:function(){return new r.default}},queue:{type:"array",default:function(){return[]}}},derived:{bounce:{fn:function(){var e=this;return(0,Dk.cappedDebounce)(function(){return e.executeQueue.apply(e,arguments)},this.config.batcherWait,{maxCalls:this.config.batcherMaxCalls,maxWait:this.config.batcherMaxWait})}}},request:function(e){var r=this,n=new Dk.Defer;return this.fingerprintRequest(e).then(function(t){r.deferreds.has(t)?n.resolve(r.deferreds.get(t).promise):(r.deferreds.set(t,n),r.prepareItem(e).then(function(e){n.promise=n.promise.then((0,Dk.tap)(function(){return r.deferreds.delete(t)})).catch(function(e){return r.deferreds.delete(t),i.default.reject(e)}),r.enqueue(e).then(function(){return r.bounce()}).catch(function(e){return n.reject(e)})}).catch(function(e){return n.reject(e)}))}).catch(function(e){return n.reject(e)}),n.promise},enqueue:function(e){return this.queue.push(e),i.default.resolve()},prepareItem:function(e){return i.default.resolve(e)},executeQueue:function(){var r=this,n=this.queue.splice(0,this.config.batcherMaxCalls);return new i.default(function(e){e(r.prepareRequest(n).then(function(e){return r.submitHttpRequest(e).then(function(e){return r.handleHttpSuccess(e)})}).catch(function(t){return t instanceof a.default?r.handleHttpError(t):i.default.all(n.map(function(e){return r.getDeferredForRequest(e).then(function(e){e.reject(t)})}))}))}).catch(function(e){return r.logger.error(e.stack),i.default.reject(e)})},prepareRequest:function(e){return i.default.resolve(e)},submitHttpRequest:function(e){throw new Error("request() must be implemented")},handleHttpSuccess:function(e){var t=this;return i.default.all((e.body&&e.body.items||e.body).map(function(e){return t.acceptItem(e)}))},handleHttpError:function(t){var r=this;return t instanceof a.default&&(0,n.default)(t,"options.body.map")?i.default.all(t.options.body.map(function(e){return r.getDeferredForRequest(e).then(function(e){e.reject(t)})})):(this.logger.error("http error handler called without a SparkHttpError object",t),i.default.reject(t))},acceptItem:function(t){var r=this;return this.didItemFail(t).then(function(e){return e?r.handleItemFailure(t):r.handleItemSuccess(t)})},didItemFail:function(e){return i.default.resolve(!1)},handleItemFailure:function(t){return this.getDeferredForResponse(t).then(function(e){e.reject(t)})},handleItemSuccess:function(t){return this.getDeferredForResponse(t).then(function(e){e.resolve(t)})},getDeferredForRequest:function(e){var r=this;return this.fingerprintRequest(e).then(function(e){var t=r.deferreds.get(e);if(!t)throw new Error("Could not find pending request for received response");return t})},getDeferredForResponse:function(e){var r=this;return this.fingerprintResponse(e).then(function(e){var t=r.deferreds.get(e);if(!t)throw new Error("Could not find pending request for received response");return t})},fingerprintRequest:function(e){throw new Error("fingerprintRequest() must be implemented")},fingerprintResponse:function(e){throw new Error("fingerprintResponse() must be implemented")},version:"1.43.2"});t.default=s});e(DO);var LO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(My),i=a(ey),o=a(iy),r=a(Ty);function a(e){return e&&e.__esModule?e:{default:e}}var u=new r.default,s=new r.default,c=new r.default,l=function(){function r(e,t){return(0,i.default)(this,r),u.set(this,e.body.items),s.set(this,r.parseLinkHeaders(e.headers.link)),c.set(this,t),this}return(0,o.default)(r,[{key:"items",get:function(){return u.get(this)}},{key:"length",get:function(){return this.items.length}},{key:"links",get:function(){return s.get(this)}},{key:"spark",get:function(){return c.get(this)}}]),(0,o.default)(r,[{key:"next",value:function(){return this.getLink("next")}},{key:"hasNext",value:function(){return this.hasLink("next")}},{key:"previous",value:function(){return this.getLink("previous")}},{key:"hasPrevious",value:function(){return this.hasLink("previous")}},{key:"getLink",value:function(e){var t=this;return this.spark.request({uri:this.links[e]}).then(function(e){return new r(e,t.spark)})}},{key:"hasLink",value:function(e){return Boolean(this.links[e])}},{key:n.default,value:function(){var e=this,t=-1;return{next:function(){return(t+=1)<e.length?{value:e.items[t]}:{done:!0}}}}}],[{key:"parseLinkHeaders",value:function(e){return e?(e=Array.isArray(e)?e:[e]).reduce(function(e,t){var r=(t=t.split(";"))[0].replace("<","").replace(">","");return e[t[1].split("=")[1].replace(/"/g,"")]=r,e},{}):{}}}]),r}();t.default=l});e(LO),e(t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=kT)&&r.__esModule?r:{default:r};var o={error:["log"],warn:["error","log"],info:["log"],debug:["info","log"],trace:["debug","info","log"]};function i(i){var e=o[i];if(e)for(e=e.slice();!console[i];)i=e.pop();return function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console)[i].apply(e,r)}}var a=n.default.extend({namespace:"Logger",error:i("error"),warn:i("warn"),log:i("log"),info:i("info"),debug:i("debug"),trace:i("trace"),version:"1.43.2"});(0,AO.registerPlugin)("logger",a),t.default=a}));var FO=t(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.Page=t.Batcher=t.RateLimitInterceptor=t.SparkUserAgentInterceptor=t.SparkTrackingIdInterceptor=t.RequestTimingInterceptor=t.RequestLoggerInterceptor=t.RequestEventInterceptor=t.ResponseLoggerInterceptor=t.RedirectInterceptor=t.PayloadTransformerInterceptor=t.NetworkTimingInterceptor=t.AuthInterceptor=t.SparkPlugin=t.SparkHttpError=t.registerInternalPlugin=t.registerPlugin=t.default=t.children=t.waitForValue=t.StorageError=t.persist=t.NotFoundError=t.MemoryStoreAdapter=t.makeSparkPluginStore=t.makeSparkStore=t.Token=t.sortScope=t.grantErrors=t.filterScope=t.Credentials=void 0,Object.defineProperty(t,"Credentials",{enumerable:!0,get:function(){return IO.Credentials}}),Object.defineProperty(t,"filterScope",{enumerable:!0,get:function(){return IO.filterScope}}),Object.defineProperty(t,"grantErrors",{enumerable:!0,get:function(){return IO.grantErrors}}),Object.defineProperty(t,"sortScope",{enumerable:!0,get:function(){return IO.sortScope}}),Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return IO.Token}}),Object.defineProperty(t,"makeSparkStore",{enumerable:!0,get:function(){return ST.makeSparkStore}}),Object.defineProperty(t,"makeSparkPluginStore",{enumerable:!0,get:function(){return ST.makeSparkPluginStore}}),Object.defineProperty(t,"MemoryStoreAdapter",{enumerable:!0,get:function(){return ST.MemoryStoreAdapter}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return ST.NotFoundError}}),Object.defineProperty(t,"persist",{enumerable:!0,get:function(){return ST.persist}}),Object.defineProperty(t,"StorageError",{enumerable:!0,get:function(){return ST.StorageError}}),Object.defineProperty(t,"waitForValue",{enumerable:!0,get:function(){return ST.waitForValue}}),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return AO.children}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(AO).default}}),Object.defineProperty(t,"registerPlugin",{enumerable:!0,get:function(){return AO.registerPlugin}}),Object.defineProperty(t,"registerInternalPlugin",{enumerable:!0,get:function(){return AO.registerInternalPlugin}}),Object.defineProperty(t,"SparkHttpError",{enumerable:!0,get:function(){return r(qP).default}}),Object.defineProperty(t,"SparkPlugin",{enumerable:!0,get:function(){return r(kT).default}}),Object.defineProperty(t,"AuthInterceptor",{enumerable:!0,get:function(){return r(aO).default}}),Object.defineProperty(t,"NetworkTimingInterceptor",{enumerable:!0,get:function(){return r(uO).default}}),Object.defineProperty(t,"PayloadTransformerInterceptor",{enumerable:!0,get:function(){return r(sO).default}}),Object.defineProperty(t,"RedirectInterceptor",{enumerable:!0,get:function(){return r(cO).default}}),Object.defineProperty(t,"ResponseLoggerInterceptor",{enumerable:!0,get:function(){return r(pO).default}}),Object.defineProperty(t,"RequestEventInterceptor",{enumerable:!0,get:function(){return r(lO).default}}),Object.defineProperty(t,"RequestLoggerInterceptor",{enumerable:!0,get:function(){return r(fO).default}}),Object.defineProperty(t,"RequestTimingInterceptor",{enumerable:!0,get:function(){return r(dO).default}}),Object.defineProperty(t,"SparkTrackingIdInterceptor",{enumerable:!0,get:function(){return r(hO).default}}),Object.defineProperty(t,"SparkUserAgentInterceptor",{enumerable:!0,get:function(){return r(vO).default}}),Object.defineProperty(t,"RateLimitInterceptor",{enumerable:!0,get:function(){return r(gO).default}}),Object.defineProperty(t,"Batcher",{enumerable:!0,get:function(){return r(DO).default}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return r(LO).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return r(mO).default}})});e(FO);FO.config,FO.Page,FO.Batcher,FO.RateLimitInterceptor,FO.SparkUserAgentInterceptor,FO.SparkTrackingIdInterceptor,FO.RequestTimingInterceptor,FO.RequestLoggerInterceptor,FO.RequestEventInterceptor,FO.ResponseLoggerInterceptor,FO.RedirectInterceptor,FO.PayloadTransformerInterceptor,FO.NetworkTimingInterceptor,FO.AuthInterceptor,FO.SparkPlugin,FO.SparkHttpError,FO.registerInternalPlugin,FO.registerPlugin,FO.children,FO.waitForValue,FO.StorageError,FO.persist,FO.NotFoundError,FO.MemoryStoreAdapter,FO.makeSparkPluginStore,FO.makeSparkStore,FO.Token,FO.sortScope,FO.grantErrors,FO.filterScope,FO.Credentials;var NO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o=m(rc),a=m(oc),u=m(_f),s=m(Tf),c=m(Mf),l=m(Rf),f=m(Mv),d=m(xv),p=m(Rv),h=m(Uv),v=m(Mm),g=m(MO);function m(e){return e&&e.__esModule?e:{default:e}}function y(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}var b="oauth2-csrf-token",_=Dk.base64.encode((0,l.default)({})),w=FO.SparkPlugin.extend((r=(0,Dk.whileInFlight)("isAuthorizing"),n=(0,Dk.whileInFlight)("isAuthorizing"),y(i={derived:{isAuthenticating:{deps:["isAuthorizing"],fn:function(){return this.isAuthorizing}}},session:{isAuthorizing:{default:!1,type:"boolean"},ready:{default:!1,type:"boolean"}},namespace:"Credentials",initialize:function(e,t){var r=this,n=(0,c.default)(FO.SparkPlugin.prototype.initialize,this,[e,t]);if(!1===e.parse)return this.ready=!0,n;var i=v.default.parse(this.spark.getWindow().location.href,!0);this._checkForErrors(i);var o=i.hash;if(!o)return this.ready=!0,n;o.includes("#")&&(o=o.substr(1)),i.hash=h.default.parse(o),i.hash.state&&(i.hash.state=JSON.parse(Dk.base64.decode(i.hash.state)));var a=this._parseHash(i);return a&&(this._cleanUrl(i),ss(function(){r.spark.credentials.set({supertoken:a}),r.ready=!0})),n},initiateLogin:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.state=e.state||{},e.state.csrf_token=this._generateSecurityToken(),"confidential"===this.config.clientType?this.initiateAuthorizationCodeGrant(e):this.initiateImplicitGrant(e)},initiateImplicitGrant:function(e){return this.logger.info("authorization: initiating implicit grant flow"),this.spark.getWindow().location=this.spark.credentials.buildLoginUrl((0,s.default)({response_type:"token"},e)),u.default.resolve()},initiateAuthorizationCodeGrant:function(e){return this.logger.info("authorization: initiating authorization code grant flow"),this.spark.getWindow().location=this.spark.credentials.buildLoginUrl((0,s.default)({response_type:"code"},e)),u.default.resolve()},requestAccessTokenFromJwt:function(e){var t=this,r=e.jwt;return this.spark.request({method:"POST",service:"hydra",resource:"jwt/login",headers:{authorization:r}}).then(function(e){var t=e.body;return{access_token:t.token,token_type:"Bearer",expires_in:t.expiresIn}}).then(function(e){t.spark.credentials.set({supertoken:e})})},logout:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.noRedirect||(this.spark.getWindow().location=this.spark.credentials.buildLogoutUrl(e))},_checkForErrors:function(e){var t=e.query;if(t&&t.error)throw new(FO.grantErrors.select(t.error))(t)},_cleanUrl:function(t){t=(0,p.default)(t),this.spark.getWindow().history&&this.spark.getWindow().history.replaceState&&(["access_token","token_type","expires_in","refresh_token","refresh_token_expires_in"].forEach(function(e){return(0,a.default)(t.hash,e)}),(0,d.default)(t.hash.state)?(0,a.default)(t.hash,"state"):(t.hash.state=Dk.base64.encode((0,l.default)((0,f.default)(t.hash.state,"csrf_token"))),t.hash.state===_&&(0,a.default)(t.hash,"state")),t.hash=h.default.stringify(t.hash),this.spark.getWindow().history.replaceState({},null,v.default.format(t)))},_generateSecurityToken:function(){this.logger.info("authorization: generating csrf token");var e=g.default.v4();return this.spark.getWindow().sessionStorage.setItem("oauth2-csrf-token",e),e},_parseHash:function(e){var t=(0,p.default)(e.hash);if(t&&this._verifySecurityToken(t),t.access_token)return t.expires_in&&(t.expires_in=parseInt(t.expires_in,10)),t.refresh_token_expires_in&&(t.refresh_token_expires_in=parseInt(t.refresh_token_expires_in,10)),t;this.ready=!0},_verifySecurityToken:function(e){var t=this.spark.getWindow().sessionStorage.getItem(b);if(this.spark.getWindow().sessionStorage.removeItem(b),t){if(!e.state)throw new Error("Expected CSRF token "+t+", but not found in redirect hash");if(!e.state.csrf_token)throw new Error("Expected CSRF token "+t+", but not found in redirect hash");var r=e.state.csrf_token;if(r!==t)throw new Error("CSRF token "+r+" does not match stored token "+t)}},version:"1.43.2"},"initiateImplicitGrant",[r],(0,o.default)(i,"initiateImplicitGrant"),i),y(i,"initiateAuthorizationCodeGrant",[n],(0,o.default)(i,"initiateAuthorizationCodeGrant"),i),y(i,"requestAccessTokenFromJwt",[Dk.oneFlight],(0,o.default)(i,"requestAccessTokenFromJwt"),i),i));t.default=w});e(NO);var UO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={credentials:{clientType:"public"}}});e(UO);var zO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(HT),i=u(Mf),o=u(ud),n=u(X_),a=u(oT);function u(e){return e&&e.__esModule?e:{default:e}}var s=a.default.extend({props:{key:"string",lastModified:"date",mutable:"boolean",type:"string",val:"string",value:"any"},constructor:function(e,t){return t=t||{},(0,n.default)(t,{parse:!0}),(0,i.default)(a.default.prototype.constructor,this,[e,t])},idAttribute:"key",parse:function(e){if(!e)return{};var t=Number(e.val);return e.val&&!(0,r.default)(t)?(e.value=t,e.type="number"):"true"===e.val?(e.value=!0,e.type="boolean"):"false"===e.val?(e.value=!1,e.type="boolean"):(e.value=e.val,e.type="string"),e},serialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=(0,i.default)(a.default.prototype.serialize,this,t);return n.lastModified&&(n.lastModified=new Date(n.lastModified).toISOString()),n},set:function(e,t,r){var n=void 0;return(0,o.default)(e)||null===e?(n=e,r=t):(n={})[e]=t,n=this.parse(n,r),(0,i.default)(a.default.prototype.set,this,[n,r])}});t.default=s});e(zO);var qO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(YP),n=i(zO);function i(e){return e&&e.__esModule?e:{default:e}}var o=r.default.extend({mainIndex:"key",model:n.default});t.default=o});e(qO);var BO=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=o(Fk),r=o(oT),i=o(qO);function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend({collections:{developer:i.default,entitlement:i.default,user:i.default},clear:function(t){var r=this;return(0,n.default)(this.attributes).forEach(function(e){r.unset(e,t)}),(0,n.default)(this._children).forEach(function(e){r[e].clear()}),(0,n.default)(this._collections).forEach(function(e){r[e].reset()}),this},initialize:function(){var n=this;["change:value","add","remove"].forEach(function(e){["developer","entitlement","user"].forEach(function(r){n[r].on(e,function(e,t){n.trigger("change:"+r,n,n[r],t)})})})}});t.default=a});e(BO);var WO=function(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;for(e=Object(e);i--;){var u=r[i];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var s=(u=r[i])[0],c=e[s],l=u[1];if(a&&u[2]){if(void 0===c&&!(s in e))return!1}else{var f=new Vd;if(n)var d=n(c,l,s,e,t,f);if(!(void 0===d?PE(l,c,3,n,f):d))return!1}}return!0};var GO=function(e){return e==e&&!ud(e)};var VO=function(e){for(var t=Pp(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,GO(i)]}return t};var HO=function(t,r){return function(e){return null!=e&&e[t]===r&&(void 0!==r||t in Object(e))}};var JO=function(t){var r=VO(t);return 1==r.length&&r[0][2]?HO(r[0][0],r[0][1]):function(e){return e===t||WO(e,t,r)}};var YO=function(r,n){return Wh(r)&&GO(n)?HO(nv(r),n):function(e){var t=oO(e,r);return void 0===t&&t===n?NT(e,r):PE(n,t,3)}};var $O=function(t){return function(e){return null==e?void 0:e[t]}};var KO=function(t){return function(e){return iv(e,t)}};var XO=function(e){return Wh(e)?$O(nv(e)):KO(e)};var ZO=function(e){return"function"==typeof e?e:null==e?kv:"object"==typeof e?op(e)?YO(e[0],e[1]):JO(e):XO(e)};var QO=function(a){return function(e,t,r){var n=Object(e);if(!Tp(e)){var i=ZO(t,3);e=Pp(e),t=function(e){return i(n[e],e,n)}}var o=a(e,t,r);return-1<o?n[i?e[o]:o]:void 0}},eC=Math.max;var tC=QO(function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:N_(r);return i<0&&(i=eC(n+i,0)),i_(e,ZO(t,3),i)});var rC=function(e,n){var i;return qE(e,function(e,t,r){return!(i=n(e,t,r))}),!!i};var nC=function(e,t,r){var n=op(e)?fE:rC;return r&&Y_(e,t,r)&&(t=void 0),n(e,ZO(t,3))},iC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(_f),i=l(Mf),n=l(tC),o=l(nC),a=l(ud),u=l(X_),s=l(oT),c=l(Mm);function l(e){return e&&e.__esModule?e:{default:e}}var f=s.default.extend({props:{service:"string",defaultUrl:"string",availableHosts:{type:"array",default:function(){return[]}}},session:{currentHostIndex:{type:"number",default:0}},derived:{url:{deps:["defaultUrl","availableHosts","currentHostIndex"],fn:function(){if(0===this.availableHosts.length)return this.defaultUrl;var e=void 0;return e=this.currentHostIndex>=this.availableHosts.length?this.availableHosts[this.availableHosts.length-1]:this.availableHosts[this.currentHostIndex],this._changeUrlHost(this.defaultUrl,e.host)}}},constructor:function(e,t){return t=t||{},(0,u.default)(t,{parse:!0}),(0,i.default)(s.default.prototype.constructor,this,[e,t])},idAttribute:"service",serialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=(0,i.default)(s.default.prototype.serialize,this,t);return n.url=this.url,n},parse:function(e){return e?(e.availableHosts&&e.availableHosts.sort(function(e,t){return e.priority-t.priority}),e):{}},set:function(e,t,r){var n=void 0;return(0,a.default)(e)||null===e?(n=e,r=t):(n={})[e]=t,n=this.parse(n,r),(0,i.default)(s.default.prototype.set,this,[n,r])},markHostFailed:function(e){var t=this.getCurrentHost();if(e){var r=c.default.parse(e);t=(0,n.default)(this.availableHosts,function(e){return e.host===r.host})}t&&(t.failed=!0)},cycleNextHost:function(){for(var e=0;e<this.availableHosts.length;e+=1){var t=this.availableHosts[e];if(!t.failed&&this.currentHostIndex!==e)return this.currentHostIndex=e,r.default.resolve(t)}return this.currentHostIndex=0,r.default.reject(new Error("All hosts have failed for "+this.service))},doesUrlBelongToService:function(e){var t=c.default.parse(e),r=this.availableHosts.map(function(e){return e.host});return r.push(c.default.parse(this.defaultUrl).host),(0,o.default)(r,function(e){return e===t.host})},getCurrentHost:function(){return this.availableHosts[this.currentHostIndex]},resetAllHosts:function(){this.availableHosts.forEach(function(e){e.failed=!1})},replaceUrlWithCurrentHost:function(e){return this._changeUrlHost(e,this.getCurrentHost().host)},_changeUrlHost:function(e,t){var r=c.default.parse(e);return r.host=t,c.default.format(r)}});t.default=f});e(iC);var oC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(_f),n=o(YP),i=o(iC);function o(e){return e&&e.__esModule?e:{default:e}}var a=n.default.extend({mainIndex:"service",model:i.default,markFailedAndCycleUrl:function(t){return t?this.inferServiceFromUrl(t).then(function(e){return e.markHostFailed(t),e.cycleNextHost().then(function(){return e.url})}):r.default.reject(new Error("`uri` is a required parameter"))},resetAllAndRetry:function(e){return e?this.inferServiceFromUrl(e).then(function(e){return e.resetAllHosts(),e.url}):r.default.reject(new Error("`uri` is a required parameter"))},inferServiceFromUrl:function(t){var e=this.filter(function(e){return e.doesUrlBelongToService(t)});return 1<=e.length?r.default.resolve(e[0]):r.default.reject(new Error("Unable to infer service for this url "+t))},inferServiceNameFromUrl:function(e){return this.inferServiceFromUrl(e).then(function(e){return e.service})}});t.default=a});e(oC);var aC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o,a,u,s,c,l,f,d=k(rc),p=k(eP),h=k(Mf),v=k(Fk),g=k(AT),m=k(_f),y=k(Mv),b=k(Cm),_=k(BO),w=k(oC),S=k(Mm);function k(e){return e&&e.__esModule?e:{default:e}}function E(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}var T=FO.SparkPlugin.extend((r=(0,FO.waitForValue)("@"),n=(0,FO.waitForValue)("@"),i=(0,FO.persist)("@",function(){return!this.config.ephemeral}),o=(0,FO.waitForValue)("@"),a=(0,FO.waitForValue)("@"),u=(0,FO.waitForValue)("@"),s=(0,FO.waitForValue)("@"),c=(0,FO.waitForValue)("@"),l=(0,FO.waitForValue)("@"),E(f={children:{features:_.default},collections:{serviceCatalog:w.default},idAttribute:"url",namespace:"Device",props:{customerCompanyName:"string",customerLogoUrl:"string",deviceType:"string",helpUrl:"string",intranetInactivityDuration:"number",intranetInactivityCheckUrl:"string",modificationTime:"string",partnerCompanyName:"string",partnerLogoUrl:"string",reportingSiteDesc:"string",reportingSiteUrl:"string",searchEncryptionKeyUrl:"string",services:{default:function(){return{}},type:"object"},serviceHostMap:{default:function(){return{serviceLinks:{},hostCatalog:{}}},type:"object"},showSupportText:"boolean",supportProviderCompanyName:"string",supportProviderLogoUrl:"string",url:"string",userId:"string",webFileShareControl:"string",webSocketUrl:"string",whiteboardFileShareControl:"string"},derived:{registered:{deps:["url"],fn:function(){return Boolean(this.url)}}},session:{logoutTimer:"any",lastUserActivityDate:"number"},determineService:function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=(0,g.default)((0,v.default)(this.services));!(t=(i=o.next()).done);t=!0){var a=i.value,u=this.services[a];if(e.startsWith(u))return m.default.resolve(a.substr(0,a.length-10))}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return m.default.reject(new Error(e+" does not reflect a known service"))},getServiceUrl:function(t){var r=this;return this._getServiceUrl(this.services,t).then(function(e){return e||r.getPreDiscoveryServiceUrl(t)})},getPreDiscoveryServiceUrl:function(e){return m.default.resolve(this._getServiceUrl(this.config.preDiscoveryServices,e))},getWebSocketUrl:function(){return this.useServiceCatalogUrl(this.webSocketUrl)},useServiceCatalogUrl:function(t){return this.serviceCatalog.inferServiceFromUrl(t).then(function(e){return e.replaceUrlWithCurrentHost(t)})},markUrlFailedAndGetNew:function(t){var r=this;return t?(this.logger.info("device: marking "+t+" as failed"),this.serviceCatalog.markFailedAndCycleUrl(t).then(function(e){return r.spark.internal.metrics.submitClientMetrics("web-ha",{tags:{action:"replace_url",failedUrl:t,newUrl:e}}),e}).catch(function(){return r._resetAllAndRetry(t)})):m.default.reject(new Error("`url` is a required parameter"))},_resetAllAndRetry:function(e){return e?(this.logger.info("device: reset available hosts and retry "+e),this.serviceCatalog.resetAllAndRetry(e)):m.default.reject(new Error("`url` is a required parameter"))},fetchNewUrls:function(e){var r=this;return new m.default(function(t){return r.serviceCatalog.inferServiceFromUrl(e).then(function(e){r.logger.info("device: refresh to "+e.service+" get new urls"),r.refresh(),r.on("serviceCatalogUpdated",function(){return t(e.url)})})})},initialize:function(){for(var n=this,e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(0,h.default)(FO.SparkPlugin.prototype.initialize,this,t),["developer","entitlement","user"].forEach(function(e){n.features.on("change:"+e,function(e,t,r){n.trigger("change",n,r),n.trigger("change:features",n,n.features,r)})}),this.on("change:serviceHostMap",this._updateServiceCatalog),this.listenToAndRun(this,"change:intranetInactivityCheckUrl",function(){return n._resetLogoutTimer()}),this.listenToAndRun(this,"change:intranetInactivityDuration",function(){return n._resetLogoutTimer()}),this.listenTo(this.spark,"user-activity",function(){n.lastUserActivityDate=Date.now()})},inspect:function(e){return b.default.inspect((0,y.default)(this.serialize(),"features"),{depth:e})},isPreDiscoveryService:function(e){return m.default.resolve(this._isService(this.config.preDiscoveryServices,e))},isPreDiscoveryServiceUrl:function(e){return m.default.resolve(this._isServiceUrl(this.config.preDiscoveryServices,e))},isService:function(t){var r=this;return this._isService(this.services,t).then(function(e){return e||r.isPreDiscoveryService(t)})},isServiceUrl:function(e){return m.default.resolve(this._isServiceUrl(this.services,e))},isSpecificService:function(e,t){return t===e?m.default.resolve(!0):this.getServiceUrl(e).then(function(e){return t.includes(e)})},_getServiceUrl:function(e,t){if(!e)return m.default.reject(new Error("`target` is a required parameter"));if(!t)return m.default.reject(new Error("`service` is a required parameter"));var r=this.features.developer.get("web-ha-messaging");if(r&&r.value){var n=this.serviceCatalog.get(t+"ServiceUrl");if(n)return m.default.resolve(n.url)}return m.default.resolve(e[t+"ServiceUrl"])},_isService:function(e,t){return this._getServiceUrl(e,t).then(function(e){return Boolean(e)})},_isServiceUrl:function(e,t){if(!t)return m.default.reject(new Error("`uri` is a required parameter"));var r=!0,n=!1,i=void 0;try{for(var o,a=(0,g.default)((0,p.default)(e));!(r=(o=a.next()).done);r=!0){var u=o.value;if(u&&t.startsWith(u))return m.default.resolve(!0)}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return m.default.resolve(!1)},refresh:function(){var t=this;if(this.logger.info("device: refreshing"),!this.registered)return this.logger.info("device: device not registered, registering"),this.register();var e=(0,y.default)(this.serialize(),"features","mediaClusters");return this.config.ephemeral&&(e.ttl=this.config.ephemeralDeviceTTL),this.request({method:"PUT",uri:this.url,body:e}).then(function(e){return t._processRegistrationSuccess(e)}).catch(function(e){return 404===e.statusCode?(t.logger.info("device: refresh failed with 404, attempting to register new device"),t.clear(),t.register()):m.default.reject(e)})},register:function(){var t=this;if(this.logger.info("device: registering"),this.registered)return this.logger.info("device: device already registered, refreshing"),this.refresh();var e=this.config.defaults;return this.config.ephemeral&&(e.ttl=this.config.ephemeralDeviceTTL),this.request({method:"POST",service:"wdm",resource:"devices",body:e}).then(function(e){return t._processRegistrationSuccess(e)})},unregister:function(){var e=this;return this.logger.info("device: unregistering"),this.url?this.request({uri:this.url,method:"DELETE"}).then(function(){return e.clear()}):(this.logger.warn("device: not registered"),m.default.resolve())},clear:function(){clearTimeout(this.refreshTimer);for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(0,h.default)(FO.SparkPlugin.prototype.clear,this,t)},_processRegistrationSuccess:function(e){var t=this;if(this.logger.info("device: received registration payload"),this.set(e.body),this.config.ephemeral){this.logger.info("device: enqueing device refresh");var r=1e3*(this.config.ephemeralDeviceTTL/2+60);this.refreshTimer=(0,Uk.safeSetTimeout)(function(){return t.refresh()},r)}},_updateServiceCatalog:function(i){var o=this,e=this.features.developer.get("web-ha-messaging");e&&e.value&&(i.serviceHostMap&&i.serviceHostMap.hostCatalog?((0,v.default)(i.services).forEach(function(e){var t=i.services[e],r=S.default.parse(t),n=i.serviceHostMap.hostCatalog[r.host];o.serviceCatalog.set({service:e,defaultUrl:t,availableHosts:n||[]},{remove:!1})}),this.trigger("serviceCatalogUpdated")):this.refresh())},_resetLogoutTimer:function(){var t=this;if(clearTimeout(this.logoutTimer),this.off("change:lastUserActivityDate"),this.unset("logoutTimer"),this.config.enableInactivityEnforcement&&this.intranetInactivityCheckUrl&&this.intranetInactivityDuration){this.on("change:lastUserActivityDate",function(){return t._resetLogoutTimer()});var e=(0,Uk.safeSetTimeout)(function(){t.spark.request({headers:{"cisco-no-http-redirect":null,"spark-user-agent":null,trackingid:null},method:"GET",uri:t.intranetInactivityCheckUrl}).catch(function(){return t.logger.info("device: did not reach internal ping endpoint; logging out after inactivity on a public network"),t.spark.logout()}).catch(function(e){t.logger.warn("device: logout failed",e)})},1e3*this.intranetInactivityDuration);this.logoutTimer=e}},version:"1.43.2"},"determineService",[r],(0,d.default)(f,"determineService"),f),E(f,"getServiceUrl",[n],(0,d.default)(f,"getServiceUrl"),f),E(f,"initialize",[i],(0,d.default)(f,"initialize"),f),E(f,"isService",[o],(0,d.default)(f,"isService"),f),E(f,"isServiceUrl",[a],(0,d.default)(f,"isServiceUrl"),f),E(f,"isSpecificService",[u],(0,d.default)(f,"isSpecificService"),f),E(f,"refresh",[Dk.oneFlight,s],(0,d.default)(f,"refresh"),f),E(f,"register",[Dk.oneFlight,c],(0,d.default)(f,"register"),f),E(f,"unregister",[Dk.oneFlight,l],(0,d.default)(f,"unregister"),f),f));t.default=T});e(aC);var uC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=aC,e&&e.__esModule?e:{default:e}).default;var e}})});e(uC);var sC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(_f),n=s(Gw),i=s(ey),o=s(iy),a=s(Vw),u=s(Hw);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onResponseError",value:function(e,t){return 451===t.statusCode&&(this.spark.internal.device.clear(),this.spark.credentials.clear(),this.spark.logger.info("Received `HTTP 451 Unavailable For Legal Reasons`, discarding credentials and device registration")),r.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=c});e(sC);var cC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(oc),n=l(Tf),i=l(_f),o=l(Gw),a=l(ey),u=l(iy),s=l(Vw),c=l(Hw);function l(e){return e&&e.__esModule?e:{default:e}}var f=/(?:^\/)|(?:\/$)/,d=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,u.default)(t,[{key:"onRequest",value:function(t){return t.uri?t:(this.checkOptions(t),this.normalizeOptions(t),this.spark.internal.device.getServiceUrl(t.service).then(function(e){return e?(t.resource&&(e=e.replace(f,"")+"/"+t.resource.replace(f,"")),t.uri=e,t):i.default.reject(new Error("`"+t.service+"` is not a known service"))}))}},{key:"checkOptions",value:function(e){if(!e.api&&!e.service)throw new Error("A `service` or `uri` parameter is required");if(!e.resource)throw new Error("A `resource` parameter is required")}},{key:"normalizeOptions",value:function(e){e.service||((0,n.default)(e,{service:e.service||e.api}),(0,r.default)(e,"api"))}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=d});e(cC);var lC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(_f),r=c(Gw),i=c(ey),o=c(iy),a=c(Vw),u=c(Hw),s=c(ZP);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(t){var r=this;return!this.spark.internal.device.url||t.headers&&"cisco-device-url"in t.headers&&!t.headers["cisco-device-url"]?n.default.resolve(t):n.default.resolve(t.service||this.spark.internal.device.determineService(t.uri)).then(function(e){return e&&"oauth"!==e&&"saml"!==e&&(0,s.default)(t,"headers['cisco-device-url']",r.spark.internal.device.url),t}).catch(function(e){if(e.message.match(/does not reflect a known service/))return t;throw e})}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=l});e(lC);var fC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(_f),r=s(Gw),i=s(ey),o=s(iy),a=s(Vw),u=s(Hw);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onResponseError",value:function(e,t){if(t instanceof FO.SparkHttpError.InternalServerError&&e.uri){var r=this.spark.internal.device.features.developer.get("web-ha-messaging");if(r&&r.value)return this.spark.internal.metrics.submitClientMetrics("web-ha",{fields:{success:!1},tags:{action:"failed",error:t.message,url:e.uri}}),this.spark.internal.device.markUrlFailedAndGetNew(e.uri).then(function(){return n.default.reject(t)})}return n.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(zP.Interceptor);t.default=c});e(fC);var dC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={device:{preDiscoveryServices:{wdmServiceUrl:"https://wdm-a.wbx2.com/wdm/api/v1",hydraServiceUrl:"https://api.ciscospark.com/v1"},defaults:{name:ws.title||Dk.inBrowser&&"browser",deviceType:"UNKNOWN"},enableInactivityEnforcement:!1,ephemeral:!1,ephemeralDeviceTTL:1800}}});e(dC);var pC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.ServerErrorInterceptor=t.DeviceUrlInterceptor=t.UrlInterceptor=t.EmbargoInterceptor=t.ServiceModel=t.ServiceCollection=t.FeatureModel=t.FeatureCollection=t.FeaturesModel=t.Device=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s(uC).default}}),Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return s(uC).default}}),Object.defineProperty(t,"FeaturesModel",{enumerable:!0,get:function(){return s(BO).default}}),Object.defineProperty(t,"FeatureCollection",{enumerable:!0,get:function(){return s(qO).default}}),Object.defineProperty(t,"FeatureModel",{enumerable:!0,get:function(){return s(zO).default}}),Object.defineProperty(t,"ServiceCollection",{enumerable:!0,get:function(){return s(oC).default}}),Object.defineProperty(t,"ServiceModel",{enumerable:!0,get:function(){return s(iC).default}}),Object.defineProperty(t,"EmbargoInterceptor",{enumerable:!0,get:function(){return s(sC).default}}),Object.defineProperty(t,"UrlInterceptor",{enumerable:!0,get:function(){return s(cC).default}}),Object.defineProperty(t,"DeviceUrlInterceptor",{enumerable:!0,get:function(){return s(lC).default}}),Object.defineProperty(t,"ServerErrorInterceptor",{enumerable:!0,get:function(){return s(fC).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return s(dC).default}});var r=s(uC),n=s(dC),i=s(cC),o=s(lC),a=s(sC),u=s(fC);function s(e){return e&&e.__esModule?e:{default:e}}(0,FO.registerInternalPlugin)("device",r.default,{interceptors:{UrlInterceptor:i.default.create,DeviceUrlInterceptor:o.default.create,EmbargoInterceptor:a.default.create,ServerErrorInterceptor:u.default.create},config:n.default,onBeforeLogout:function(){return this.unregister()}})});e(pC);pC.config,pC.ServerErrorInterceptor,pC.DeviceUrlInterceptor,pC.UrlInterceptor,pC.EmbargoInterceptor,pC.ServiceModel,pC.ServiceCollection,pC.FeatureModel,pC.FeatureCollection,pC.FeaturesModel,pC.Device;var hC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(NO).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return i(UO).default}});var r=i(NO),n=i(UO);function i(e){return e&&e.__esModule?e:{default:e}}(0,FO.registerPlugin)("authorization",r.default,{config:n.default,proxies:["isAuthorizing","isAuthenticating"]})});e(hC);hC.config;e(t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=hC,e&&e.__esModule?e:{default:e}).default;var e}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return hC.config}})}));var vC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){void 0===r&&(r={}),this.execute=e,this.applicator=t,this.options=r}return Object.defineProperty(e.prototype,"bound",{get:function(){return null!=this.options.bound&&this.options.bound},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setter",{get:function(){return null!=this.options.setter&&this.options.setter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getter",{get:function(){return null!=this.options.getter&&this.options.getter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"property",{get:function(){return null!=this.options.property&&this.options.property},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return null==this.options.method||this.options.method},enumerable:!0,configurable:!0}),e}();t.DecoratorConfig=r});e(vC);vC.DecoratorConfig;var gC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(e){return void 0===e&&(e=""),"lodash-decorators -> "+e}});e(gC);gC.log;var mC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resolveFunction=function(e,t,r,n){if(void 0===n&&(n=!0),cd(e))return e;if(eE(e)){if(t&&cd(t[e]))return t[e];if(r&&cd(r[e]))return r[e]}if(n)throw new ReferenceError(gC.log("Can not resolve method "+e+" on any target Objects"))}});e(mC);mC.resolveFunction;var yC=function(e){return void 0===e},bC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._weakMap=new WeakMap}return e.prototype.set=function(e,t){for(var r=this._weakMap,n=0,i=e.length-1;n<i;n++){var o=e[n],a=r.get(o);a||(a=new Map,r.set(o,a)),r=a}r.set(e[e.length-1],t)},e.prototype.get=function(e){for(var t=this._weakMap,r=0,n=e.length;r<n&&(t=t.get(e[r]),!yC(t));r++);return t},e.prototype.has=function(e){return!yC(this.get(e))},e}();t.CompositeKeyWeakMap=r});e(bC);bC.CompositeKeyWeakMap;var _C=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.returnAtIndex=function(r,n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.call.apply(r,[this].concat(e)),e[n]}}});e(_C);_C.returnAtIndex;var wC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.copyMetadata=function(r,e){return Qk(e,function(e,t){return r[t]=e}),r}});e(wC);wC.copyMetadata;var SC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bind=function(e,t){return wC.copyMetadata(e.bind(t),e)}});e(SC);SC.bind;var kC=function(e,t,r,n){var i=-1,o=s_,a=!0,u=e.length,s=[],c=t.length;if(!u)return s;r&&(t=Af(t,pp(r))),n?(o=AE,a=!1):200<=t.length&&(o=dE,a=!1,t=new lE(t));e:for(;++i<u;){var l=e[i],f=null==r?l:r(l);if(l=n||0!==l?l:0,a&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;s.push(l)}else o(t,f,n)||s.push(l)}return s},EC=Ob(function(e,t){return LE(e)?kC(e,t):[]});var TC=function(e){if(!Qd(e))return!1;var t=ad(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!pv(e)},PC=Ob(function(e,t){try{return bv(e,void 0,t)}catch(e){return TC(e)?e:new Error(e)}}),OC=t(function(e,t){function a(e,t,r){var n=Object.getOwnPropertyDescriptor(e,r);if(!n||n.configurable){var i=Object.getOwnPropertyDescriptor(t,r);ud(i)?Object.defineProperty(e,r,i):e[r]=t[r]}}Object.defineProperty(t,"__esModule",{value:!0}),t.assignAll=function(e,t,r){void 0===r&&(r=[]);for(var n=0,i=EC.apply(void 0,[Object.getOwnPropertyNames(t)].concat(r));n<i.length;n++){var o=i[n];PC(a,e,t,o)}return e},t.assignProperty=a});e(OC);OC.assignAll,OC.assignProperty;var CC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=["length","name","arguments","called","prototype"];t.wrapConstructor=function(r,n){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.call.apply(n,[this,r].concat(e))}return e.prototype=r.prototype,Object.defineProperty(e,"name",{configurable:!0,enumerable:!1,value:r.name,writable:!1}),OC.assignAll(e,r,i)}});e(CC);CC.wrapConstructor;var MC=t(function(e,r){function t(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),t(gC),t(mC),t(bC),t(_C),t(wC),t(SC),t(CC),t(OC)});e(MC);var jC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceChainMap=new MC.CompositeKeyWeakMap});e(jC);jC.InstanceChainMap;var xC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.createDecorator=function(s){var c=this,l=s.applicator;return function(){for(var u=[],e=0;e<arguments.length;e++)u[e]=arguments[e];return function(e,t,r){var n=c._resolveDescriptor(e,t,r),i=n.value,o=n.get,a=n.set;return jC.InstanceChainMap.has([e,t])||(cd(i)?n.value=MC.copyMetadata(l.apply({config:s,target:e,value:i,args:u}),i):cd(o)&&s.getter?n.get=MC.copyMetadata(l.apply({config:s,target:e,value:o,args:u}),o):cd(a)&&s.setter&&(n.set=MC.copyMetadata(l.apply({config:s,target:e,value:a,args:u}),o))),n}}},e.prototype.createInstanceDecorator=function(b){var _=this,w=b.applicator,S=b.bound;return function(){for(var y=[],e=0;e<arguments.length;e++)y[e]=arguments[e];return function(n,i,e){var t=_._resolveDescriptor(n,i,e),o=t.value,a=t.writable,u=t.enumerable,s=t.configurable,c=t.get,l=t.set,r=!jC.InstanceChainMap.has([n,i]),f=jC.InstanceChainMap.get([n,i])||{fns:[],properties:[]},d=r&&cd(c),p=r&&cd(l),h=r&&cd(o),v=r&&!d&&!p&&!h;if(f.properties.push(i),f.fns.push(function(e,t,r){return _._isApplicable(r,b)?(S&&(e=MC.bind(e,t)),MC.copyMetadata(w.apply({args:y,target:n,instance:t,value:e,config:b}),e)):e}),jC.InstanceChainMap.set([n,i],f),!r)return t;f.isSetter=p,f.isGetter=d,f.isMethod=h,f.isProperty=v;var g=function(e,r,n){return f.fns.reduce(function(e,t){return t(e,n,r)},e)},m=function(e){var t=c||void 0,r=l||void 0;if(d||p)d&&(t=g(c,{value:c,getter:!0},e)),p&&(r=g(l,{value:l,setter:!0},e)),Object.defineProperty(e,i,{enumerable:u,configurable:s,get:t,set:r});else if(h||v){var n=g(o,h?{value:o,method:!0}:{value:o,property:!0},e);Object.defineProperty(e,i,{writable:a,enumerable:u,configurable:s,value:n})}};return(h||v)&&(delete t.value,delete t.writable),t.get=function(){m(this);var e=Object.getOwnPropertyDescriptor(this,i);return e.get?e.get.call(this):e.value},t.set=function(e){m(this);var t=Object.getOwnPropertyDescriptor(this,i);t.set?t.set.call(this,e):(v||h)&&(this[i]=e)},t}}},e.prototype._isApplicable=function(e,t){return!Boolean(e.getter&&!t.getter||e.setter&&!t.setter||e.method&&!t.method||e.property&&!t.property)},e.prototype._resolveDescriptor=function(e,t,r){return r||(Object.getOwnPropertyDescriptor(e,t)||{})},e}();t.InternalDecoratorFactory=r,t.DecoratorFactory=new r});e(xC);xC.InternalDecoratorFactory,xC.DecoratorFactory;var RC=t(function(e,r){function t(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),t(vC),t(xC),t(jC)});e(RC);var AC=function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=N_(e),function(){if(--e<1)return t.apply(this,arguments)}},IC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.Applicator=r});e(IC);IC.Applicator;var DC=function(e,t){return(DC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var LC=function(){return(LC=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function FC(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function NC(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function UC(e){return this instanceof UC?(this.v=e,this):new UC(e)}var zC=Object.freeze({__extends:function(e,t){function r(){this.constructor=e}DC(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},get __assign(){return LC},__rest:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]])}return r},__decorate:function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;0<=u;u--)(i=e[u])&&(a=(o<3?i(a):3<o?i(t,r,a):i(t,r))||a);return 3<o&&a&&Object.defineProperty(t,r,a),a},__param:function(r,n){return function(e,t){n(e,t,r)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(o,a,u,s){return new(u||(u=Promise))(function(e,t){function r(e){try{i(s.next(e))}catch(e){t(e)}}function n(e){try{i(s.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(r,n)}i((s=s.apply(o,a||[])).next())})},__generator:function(r,n){var i,o,a,e,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=n.call(r,u)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},__exportStar:function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])},__values:FC,__read:NC,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(NC(arguments[t]));return e},__await:UC,__asyncGenerator:function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=r.apply(e,t||[]),a=[];return i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i;function n(n){o[n]&&(i[n]=function(r){return new Promise(function(e,t){1<a.push([n,r,e,t])||u(n,r)})})}function u(e,t){try{(r=o[e](t)).value instanceof UC?Promise.resolve(r.value.v).then(s,c):l(a[0][2],r)}catch(e){l(a[0][3],e)}var r}function s(e){u("next",e)}function c(e){u("throw",e)}function l(e,t){e(t),a.shift(),a.length&&u(a[0][0],a[0][1])}},__asyncDelegator:function(n){var e,i;return e={},t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,r){e[t]=n[t]?function(e){return(i=!i)?{value:UC(n[t](e)),done:"return"===t}:r?r(e):e}:r}},__asyncValues:function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=s[Symbol.asyncIterator];return t?t.call(s):(s=FC(s),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(u){e[u]=s[u]&&function(a){return new Promise(function(e,t){var r,n,i,o;a=s[u](a),r=e,n=t,i=a.done,o=a.value,Promise.resolve(o).then(function(e){r({value:e,done:i})},n)})}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}}}),qC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(r){function e(e){void 0===e&&(e={});var t=r.call(this)||this;return t._config=e,t}return zC.__extends(e,r),Object.defineProperty(e.prototype,"post",{get:function(){return!0===this._config.post},enumerable:!0,configurable:!0}),e.prototype.apply=function(e){var i=e.config.execute,t=e.value,o=void 0===t?kv:t,a=e.args,u=e.target,s=this;return function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=a.map(function(e){return MC.resolveFunction(e,t,u)}).slice();return s.post?n.push(o):n.unshift(o),i.apply(void 0,n).apply(this,e)}},e}(IC.Applicator);t.ComposeApplicator=r});e(qC);qC.ComposeApplicator;var BC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zC.__extends(t,e),t.prototype.apply=function(e){var r=e.args,n=e.target,i=e.config.execute;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.apply(void 0,[MC.resolveFunction(r[0],this,n)].concat(r.slice(1))).apply(this,e)}},t}(IC.Applicator);t.PartialApplicator=r});e(BC);BC.PartialApplicator;var WC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zC.__extends(t,e),t.prototype.apply=function(e){var t=e.config.execute,r=e.value,n=e.args;return B_.apply(void 0,[t,r].concat(n))},t}(IC.Applicator);t.PartialedApplicator=r});e(WC);WC.PartialedApplicator;var GC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zC.__extends(t,e),t.prototype.apply=function(e){var i=e.args,o=e.target,a=e.value,u=e.config.execute;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=a,n=0;return cd(r)||(r=MC.resolveFunction(i[0],this,o),n=1),u.apply(void 0,[r].concat(i.slice(n))).apply(this,e)}},t}(IC.Applicator);t.PartialValueApplicator=r});e(GC);GC.PartialValueApplicator;var VC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zC.__extends(t,e),t.prototype.apply=function(e){var t=e.config,r=t.execute,n=(t.bound,e.args),i=e.value;return r.apply(void 0,n.concat([i]))},t}(IC.Applicator);t.PostValueApplicator=r});e(VC);VC.PostValueApplicator;var HC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zC.__extends(t,e),t.prototype.apply=function(e){var t=e.value,r=e.config.execute,n=e.args;return r.apply(void 0,[t].concat(n))},t}(IC.Applicator);t.PreValueApplicator=r});e(HC);HC.PreValueApplicator;var JC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zC.__extends(t,e),t.prototype.apply=function(e){var r=e.args,n=e.config.execute,i=e.target,o=e.value;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(MC.resolveFunction(r[0],this,i),o).apply(this,e)}},t}(IC.Applicator);t.WrapApplicator=r});e(JC);JC.WrapApplicator;var YC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zC.__extends(t,e),t.prototype.apply=function(e){var t=e.value,r=e.config.execute,n=e.args,i=e.instance;e.target;return i?r.apply(void 0,[t,i].concat(n)):t},t}(IC.Applicator);t.BindApplicator=r});e(YC);YC.BindApplicator;var $C=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zC.__extends(t,e),t.prototype.apply=function(e){var r=e.args,n=(e.target,e.config.execute),i=e.value;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(void 0,[i.bind(this)].concat(e,r))}},t}(IC.Applicator);t.InvokeApplicator=r});e($C);$C.InvokeApplicator;var KC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zC.__extends(t,e),t.prototype.apply=function(e){var t=e.value,r=e.instance,n=e.config.execute,i=e.args,o=e.target,a=MC.resolveFunction(cd(i[0])?i[0]:ud(i[0])?i[0].resolver:i[0],r,o,!1);a&&r&&(a=a.bind(r));var u=a?n(t,a):n(t);if(ud(i[0])){var s=i[0],c=s.cache,l=s.type;c?u.cache=c:cd(l)&&(u.cache=new l)}return u},t}(IC.Applicator);t.MemoizeApplicator=r});e(KC);KC.MemoizeApplicator;var XC=t(function(e,r){function t(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),t(IC),t(qC),t(BC),t(WC),t(GC),t(VC),t(HC),t(JC),t(YC),t($C),t(KC)});e(XC);var ZC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(AC,new XC.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.After=n,t.after=n,t.default=r});e(ZC);ZC.After,ZC.after;var QC=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(AC,new XC.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.AfterAll=n,t.afterAll=n,t.default=r});e(QC);QC.AfterAll,QC.afterAll;var eM=function(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,z_(e,128,void 0,void 0,void 0,void 0,t)},tM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(eM,new XC.PreValueApplicator));function n(e){return r(e)}t.Ary=n,t.ary=n,t.default=r});e(tM);tM.Ary,tM.ary;var rM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(function(e){return B_(PC,e)},new XC.PreValueApplicator));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Attempt=n,t.attempt=n,t.default=r});e(rM);rM.Attempt,rM.attempt;var nM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(NE,new XC.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.Before=n,t.before=n,t.default=r});e(nM);nM.Before,nM.before;var iM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(NE,new XC.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.BeforeAll=n,t.beforeAll=n,t.default=r});e(iM);iM.BeforeAll,iM.beforeAll;var oM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(VP,new XC.BindApplicator));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Bind=n,t.bind=n,t.default=r});e(oM);oM.Bind,oM.bind;var aM=t(function(e,t){function r(i){return void 0===i&&(i=[]),function(n){return MC.wrapConstructor(n,function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];!function(e,t,r){void 0===r&&(r=[]);var n=e.prototype;for(;n&&n!==Object.prototype;){for(var i=0,o=Object.getOwnPropertyNames(n);i<o.length;i++){var a=o[i],u=!r.length||-1!==r.indexOf(a),s=Object.getOwnPropertyDescriptor(n,a);if(u&&"constructor"!==a&&!t.hasOwnProperty(a)){if(s.get){var c=RC.InstanceChainMap.get([n,a]);if(!c||!c.isMethod)continue}var l=t[a];cd(l)&&Object.defineProperty(t,a,{configurable:!0,enumerable:s.enumerable,value:MC.copyMetadata(l.bind(t),l),writable:s.writable})}}n=Object.getPrototypeOf(n)}}(n,this,i),e.apply(this,t)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.BindAll=r,t.bindAll=r,t.default=r});e(aM);aM.BindAll,aM.bindAll;var uM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(gT,new XC.PreValueApplicator,{bound:!0}));function n(e){return r(e)}t.Curry=n,t.curry=n,t.default=r});e(uM);uM.Curry,uM.curry;var sM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(gT,new XC.PreValueApplicator));function n(e){return r(e)}t.CurryAll=n,t.curryAll=n,t.default=r});e(sM);sM.CurryAll,sM.curryAll;var cM=16;function lM(e,t,r){var n=z_(e,cM,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=lM.placeholder,n}lM.placeholder={};var fM=lM,dM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(fM,new XC.PreValueApplicator,{bound:!0}));function n(e){return r(e)}t.CurryRight=n,t.curryRight=n,t.default=r});e(dM);dM.CurryRight,dM.curryRight;var pM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(fM,new XC.PreValueApplicator));function n(e){return r(e)}t.CurryRightAll=n,t.curryRightAll=n,t.default=r});e(pM);pM.CurryRightAll,pM.curryRightAll;var hM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(pT,new XC.PreValueApplicator,{setter:!0}));function n(e,t){return r(e,t)}t.Debounce=n,t.debounce=n,t.default=r});e(hM);hM.Debounce,hM.debounce;var vM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(pT,new XC.PreValueApplicator));function n(e,t){return r(e,t)}t.DebounceAll=n,t.debounceAll=n,t.default=r});e(vM);vM.DebounceAll,vM.debounceAll;var gM=function(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout(function(){e.apply(void 0,r)},t)},mM=Ob(function(e,t){return gM(e,1,t)}),yM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(mM,new XC.InvokeApplicator,{setter:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Defer=n,t.defer=n,t.default=r});e(yM);yM.Defer,yM.defer;var bM=Ob(function(e,t,r){return gM(e,L_(t)||0,r)}),_M=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(function(r,n){for(var i=[],e=2;e<arguments.length;e++)i[e-2]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bM.apply(void 0,[r.bind(this),n].concat(e,i))}},new XC.PreValueApplicator,{setter:!0}));function r(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.apply(void 0,[e].concat(t))}t.Delay=r,t.delay=r,t.default=n});e(_M);_M.Delay,_M.delay;var wM=function(e){return z_(e,512)},SM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(wM,new XC.PartialValueApplicator,{property:!0}));function n(e){return r(e)}t.Flip=n,t.flip=n,t.default=r});e(SM);SM.Flip,SM.flip;var kM=function(s){return Cv(function(i){var o=i.length,e=o,t=Hb.prototype.thru;for(s&&i.reverse();e--;){var r=i[e];if("function"!=typeof r)throw new TypeError("Expected a function");if(t&&!a&&"wrapper"==Gb(r))var a=new Hb([],!0)}for(e=a?e:o;++e<o;){r=i[e];var n=Gb(r),u="wrapper"==n?qb(r):void 0;a=u&&Xb(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[Gb(u[0])].apply(a,u[3]):1==r.length&&Xb(r)?a[n]():a.thru(r)}return function(){var e=arguments,t=e[0];if(a&&1==e.length&&op(t))return a.plant(t).value();for(var r=0,n=o?i[r].apply(this,e):t;++r<o;)n=i[r].call(this,n);return n}})},EM=kM(),TM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(EM,new XC.ComposeApplicator({post:!0}),{property:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Flow=n,t.flow=n,t.default=r});e(TM);TM.Flow,TM.flow;var PM=kM(!0),OM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(PM,new XC.ComposeApplicator({post:!1}),{property:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.FlowRight=n,t.flowRight=n,t.default=r});e(OM);OM.FlowRight,OM.flowRight;var CM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(Hh,new XC.MemoizeApplicator));function n(e){return r(e)}t.Memoize=n,t.memoize=n,t.default=r});e(CM);CM.Memoize,CM.memoize;var MM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(Hh,new XC.MemoizeApplicator));function n(e){return r(e)}t.MemoizeAll=n,t.memoizeAll=n,t.default=r});e(MM);MM.MemoizeAll,MM.memoizeAll;var jM=t(function(e,t){function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return Gk.apply(void 0,[e.prototype].concat(t)),e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=r,t.mixin=r,t.default=r});e(jM);jM.Mixin,jM.mixin;var xM=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}},RM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(xM,new XC.PartialValueApplicator,{property:!0}));function n(e){return r(e)}t.Negate=n,t.negate=n,t.default=r});e(RM);RM.Negate,RM.negate;var AM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(UE,new XC.PreValueApplicator,{setter:!0}));function n(){return r()}t.Once=n,t.once=n,t.default=r});e(AM);AM.Once,AM.once;var IM=Ob,DM=Math.min,LM=IM(function(n,i){var o=(i=1==i.length&&op(i[0])?Af(i[0],pp(ZO)):Af(mv(i,1),pp(ZO))).length;return Ob(function(e){for(var t=-1,r=DM(e.length,o);++t<r;)e[t]=i[t].call(this,e[t]);return bv(n,this,e)})}),FM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(LM,new XC.PreValueApplicator,{setter:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.OverArgs=n,t.overArgs=n,t.default=r});e(FM);FM.OverArgs,FM.overArgs;var NM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(B_,new XC.PartialApplicator,{property:!0,method:!1}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Partial=n,t.partial=n,t.default=r});e(NM);NM.Partial,NM.partial;var UM=Ob(function(e,t){var r=m_(t,p_(UM));return z_(e,64,void 0,t,r)});UM.placeholder={};var zM=UM,qM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(zM,new XC.PartialApplicator,{property:!0,method:!1}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.PartialRight=n,t.partialRight=n,t.default=r});e(qM);qM.PartialRight,qM.partialRight;var BM=Cv(function(e,t){return z_(e,256,void 0,void 0,void 0,t)}),WM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(BM,new XC.PartialValueApplicator,{property:!0}));function r(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.apply(void 0,[e].concat(t))}t.Rearg=r,t.rearg=r,t.default=n});e(WM);WM.Rearg,WM.rearg;var GM=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=void 0===t?t:N_(t),Ob(e,t)},VM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(GM,new XC.PreValueApplicator));function n(e){return r(e)}t.Rest=n,t.rest=n,t.default=r});e(VM);VM.Rest,VM.rest;var HM=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&n<=r?e:ov(e,t,r)},JM=Math.max;var YM=function(n,i){if("function"!=typeof n)throw new TypeError("Expected a function");return i=null==i?0:JM(N_(i),0),Ob(function(e){var t=e[i],r=HM(e,0,i);return t&&qp(r,t),bv(n,this,r)})},$M=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(YM,new XC.PreValueApplicator));function n(e){return r(e)}t.Spread=n,t.spread=n,t.default=r});e($M);$M.Spread,$M.spread;var KM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(function(e){return MC.returnAtIndex(e,0)},new XC.PreValueApplicator));function n(){return r()}t.Tap=n,t.tap=n,t.default=r});e(KM);KM.Tap,KM.tap;var XM=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ud(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),pT(e,t,{leading:n,maxWait:t,trailing:i})},ZM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(XM,new XC.PreValueApplicator,{setter:!0,getter:!0})),n=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(XM,new XC.PreValueApplicator,{getter:!0})),i=RC.DecoratorFactory.createInstanceDecorator(new RC.DecoratorConfig(XM,new XC.PreValueApplicator,{setter:!0}));function o(e,t){return r(e,t)}function a(e,t){return n(e,t)}function u(e,t){return i(e,t)}t.Throttle=o,t.throttle=o,t.ThrottleGetter=a,t.throttleGetter=a,t.ThrottleSetter=u,t.throttleSetter=u,t.default=r});e(ZM);ZM.Throttle,ZM.throttle,ZM.ThrottleGetter,ZM.throttleGetter,ZM.ThrottleSetter,ZM.throttleSetter;var QM=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(XM,new XC.PreValueApplicator,{setter:!0}));function n(e,t){return r(e,t)}t.ThrottleAll=n,t.throttleAll=n,t.default=r});e(QM);QM.ThrottleAll,QM.throttleAll;var ej=function(e){return eM(e,1)},tj=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(ej,new XC.PreValueApplicator));function n(){return r()}t.Unary=n,t.unary=n,t.default=r});e(tj);tj.Unary,tj.unary;var rj=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=RC.DecoratorFactory.createDecorator(new RC.DecoratorConfig(W_,new XC.WrapApplicator));function n(e){return r(e)}t.Wrap=n,t.wrap=n,t.default=r});e(rj);rj.Wrap,rj.wrap;var nj=t(function(e,r){function t(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),t(RC),t(ZC),t(QC),t(tM),t(rM),t(nM),t(iM),t(oM),t(aM),t(uM),t(sM),t(dM),t(pM),t(hM),t(vM),t(yM),t(_M),t(SM),t(TM),t(OM),t(CM),t(MM),t(jM),t(RM),t(AM),t(FM),t(NM),t(qM),t(WM),t(VM),t($M),t(KM),t(ZM),t(QM),t(tj),t(rj)});e(nj);var ij=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=o(oc),r=o(Tb),n=o(Ty);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,r,t){var n=t.initializer&&t.initializer();(0,i.default)(t,"value"),(0,i.default)(t,"initializer"),(0,i.default)(t,"writable"),t.get=function(){var e=a.get(this,r);return void 0!==e?e:n},t.set=function(e){var t=this[r];t!==e&&(a.set(this,r,e),this.trigger("change:"+r,e,t),this.trigger("change"))}};var a=new((0,Dk.make)(n.default,r.default))});e(ij);var oj=t(function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach(function(e){t[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})}),aj=(oj.v,oj.o,oj.s,oj.i,oj.u,oj.e,oj.p,oj.z,oj.r,oj.t,oj.c,oj.b,oj.m,oj.a,t(function(e,t){var o=function(e){return String(Number(e))===e?Number(e):e},u=function(e,t,r){var n=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:n&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:n?t[e.name]:t;!function(e,t,r,n){if(n&&!r)t[n]=o(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(t[r[i]]=o(e[i+1]))}(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},r=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},o=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(r).forEach(function(e){var t=e[0],r=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),a=o[o.length-1]);for(var n=0;n<(oj[t]||[]).length;n+=1){var i=oj[t][n];if(i.reg.test(r))return u(i,a,r)}}),t.media=o,t};var n=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=o(r[1]):1===r.length&&1<t.length&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/\;\s?/).reduce(n,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(o),n=0;n<r.length;n+=3)t.push({component:r[n],ip:r[n+1],port:r[n+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(n,{})})},t.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,r=!1;return"~"!==e[0]?t=o(e):(t=o(e.substring(1,e.length)),r=!0),{scid:t,paused:r}})})}})),uj=(aj.parse,aj.parseParams,aj.parseFmtpConfig,aj.parsePayloads,aj.parseRemoteCandidates,aj.parseImageAttributes,aj.parseSimulcastStreamList,aj.parse),sj=(aj.parseFmtpConfig,aj.parseParams,aj.parsePayloads,aj.parseRemoteCandidates,aj.parseImageAttributes,aj.parseSimulcastStreamList,uj),cj=t(function(e){var t,r;t=K,r=function(){var E=!0;function a(r){function e(e){var t=r.match(e);return t&&1<t.length&&t[1]||""}function t(e){var t=r.match(e);return t&&1<t.length&&t[2]||""}var n,i=e(/(ipod|iphone|ipad)/i).toLowerCase(),o=!/like android/i.test(r)&&/android/i.test(r),a=/nexus\s*[0-6]\s*/i.test(r),u=!a&&/nexus\s*[0-9]+/i.test(r),s=/CrOS/.test(r),c=/silk/i.test(r),l=/sailfish/i.test(r),f=/tizen/i.test(r),d=/(web|hpw)(o|0)s/i.test(r),p=/windows phone/i.test(r),h=(/SamsungBrowser/i.test(r),!p&&/windows/i.test(r)),v=!i&&!c&&/macintosh/i.test(r),g=!o&&!l&&!f&&!d&&/linux/i.test(r),m=t(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),y=e(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(r)&&!/tablet pc/i.test(r),_=!b&&/[^-]mobi/i.test(r),w=/xbox/i.test(r);/opera/i.test(r)?n={name:"Opera",opera:E,version:y||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(r)?n={name:"Opera",opera:E,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||y}:/SamsungBrowser/i.test(r)?n={name:"Samsung Internet for Android",samsungBrowser:E,version:y||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(r)?n={name:"NAVER Whale browser",whale:E,version:e(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(r)?n={name:"MZ Browser",mzbrowser:E,version:e(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(r)?n={name:"Opera Coast",coast:E,version:y||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(r)?n={name:"Focus",focus:E,version:e(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(r)?n={name:"Yandex Browser",yandexbrowser:E,version:y||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(r)?n={name:"UC Browser",ucbrowser:E,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(r)?n={name:"Maxthon",maxthon:E,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(r)?n={name:"Epiphany",epiphany:E,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(r)?n={name:"Puffin",puffin:E,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(r)?n={name:"Sleipnir",sleipnir:E,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(r)?n={name:"K-Meleon",kMeleon:E,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:p?(n={name:"Windows Phone",osname:"Windows Phone",windowsphone:E}).version=m?(n.msedge=E,m):(n.msie=E,e(/iemobile\/(\d+(\.\d+)?)/i)):/msie|trident/i.test(r)?n={name:"Internet Explorer",msie:E,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:s?n={name:"Chrome",osname:"Chrome OS",chromeos:E,chromeBook:E,chrome:E,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(r)?n={name:"Microsoft Edge",msedge:E,version:m}:/vivaldi/i.test(r)?n={name:"Vivaldi",vivaldi:E,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||y}:l?n={name:"Sailfish",osname:"Sailfish OS",sailfish:E,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(r)?n={name:"SeaMonkey",seamonkey:E,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(r)?(n={name:"Firefox",firefox:E,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(r)&&(n.firefoxos=E,n.osname="Firefox OS")):c?n={name:"Amazon Silk",silk:E,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(r)?n={name:"PhantomJS",phantom:E,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(r)?n={name:"SlimerJS",slimer:E,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(r)||/rim\stablet/i.test(r)?n={name:"BlackBerry",osname:"BlackBerry OS",blackberry:E,version:y||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:d?(n={name:"WebOS",osname:"WebOS",webos:E,version:y||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(r)&&(n.touchpad=E)):/bada/i.test(r)?n={name:"Bada",osname:"Bada",bada:E,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:f?n={name:"Tizen",osname:"Tizen",tizen:E,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||y}:/qupzilla/i.test(r)?n={name:"QupZilla",qupzilla:E,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||y}:/chromium/i.test(r)?n={name:"Chromium",chromium:E,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||y}:/chrome|crios|crmo/i.test(r)?n={name:"Chrome",chrome:E,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?n={name:"Android",version:y}:/safari|applewebkit/i.test(r)?(n={name:"Safari",safari:E},y&&(n.version=y)):i?(n={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},y&&(n.version=y)):n=/googlebot/i.test(r)?{name:"Googlebot",googlebot:E,version:e(/googlebot\/(\d+(\.\d+))/i)||y}:{name:e(/^(.*)\/(.*) /),version:t(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(r)?(/(apple)?webkit\/537\.36/i.test(r)?(n.name=n.name||"Blink",n.blink=E):(n.name=n.name||"Webkit",n.webkit=E),!n.version&&y&&(n.version=y)):!n.opera&&/gecko\//i.test(r)&&(n.name=n.name||"Gecko",n.gecko=E,n.version=n.version||e(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||!o&&!n.silk?!n.windowsphone&&i?(n[i]=E,n.ios=E,n.osname="iOS"):v?(n.mac=E,n.osname="macOS"):w?(n.xbox=E,n.osname="Xbox"):h?(n.windows=E,n.osname="Windows"):g&&(n.linux=E,n.osname="Linux"):(n.android=E,n.osname="Android");var S="";n.windows?S=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)):n.windowsphone?S=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n.mac?S=(S=e(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):i?S=(S=e(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):o?S=e(/android[ \/-](\d+(\.\d+)*)/i):n.webos?S=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?S=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?S=e(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(S=e(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(n.osversion=S);var k=!n.windows&&S.split(".")[0];return b||u||"ipad"==i||o&&(3==k||4<=k&&!_)||n.silk?n.tablet=E:(_||"iphone"==i||"ipod"==i||o||a||n.blackberry||n.webos||n.bada)&&(n.mobile=E),n.msedge||n.msie&&10<=n.version||n.yandexbrowser&&15<=n.version||n.vivaldi&&1<=n.version||n.chrome&&20<=n.version||n.samsungBrowser&&4<=n.version||n.whale&&1===T([n.version,"1.0"])||n.mzbrowser&&1===T([n.version,"6.0"])||n.focus&&1===T([n.version,"1.0"])||n.firefox&&20<=n.version||n.safari&&6<=n.version||n.opera&&10<=n.version||n.ios&&n.osversion&&6<=n.osversion.split(".")[0]||n.blackberry&&10.1<=n.version||n.chromium&&20<=n.version?n.a=E:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=E:n.x=E,n}var u=a("undefined"!=typeof navigator&&navigator.userAgent||"");function n(e){return e.split(".").length}function i(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function T(e){for(var r=Math.max(n(e[0]),n(e[1])),t=i(e,function(e){var t=r-n(e);return i((e+=new Array(t+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});0<=--r;){if(t[0][r]>t[1][r])return 1;if(t[0][r]!==t[1][r])return-1;if(0===r)return 0}}function o(e,t,r){var n=u;"string"==typeof t&&(r=t,t=void 0),void 0===t&&(t=!1),r&&(n=a(r));var i=""+n.version;for(var o in e)if(e.hasOwnProperty(o)&&n[o]){if("string"!=typeof e[o])throw new Error("Browser version in the minVersion map should be a string: "+o+": "+String(e));return T([i,e[o]])<0}return t}return u.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in u)return!0}return!1},u.isUnsupportedBrowser=o,u.compareVersions=T,u.check=function(e,t,r){return!o(e,t,r)},u._detect=a,u.detect=a,u},e.exports?e.exports=r():t.bowser=r()});var lj=function(e,n){var i=[];return qE(e,function(e,t,r){n(e,t,r)&&i.push(e)}),i};var fj=function(e,t){return(op(e)?Dp:lj)(e,ZO(t,3))},dj=!0,pj=!0;function hj(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}var vj={extractVersion:hj,wrapPeerConnectionEvent:function(e,n,i){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,o=t.addEventListener;t.addEventListener=function(e,r){if(e!==n)return o.apply(this,arguments);var t=function(e){var t=i(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=t,o.apply(this,[e,t])};var a=t.removeEventListener;t.removeEventListener=function(e,t){if(e!==n||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);var r=this._eventMap[t];return delete this._eventMap[t],a.apply(this,[e,r])},Object.defineProperty(t,"on"+n,{get:function(){return this["_on"+n]},set:function(e){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),e&&this.addEventListener(n,this["_on"+n]=e)},enumerable:!0,configurable:!0})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(dj=e)?"adapter.js logging disabled":"adapter.js logging enabled"},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(pj=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(dj)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){pj&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(t.mozGetUserMedia)r.browser="firefox",r.version=hj(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)r.browser="chrome",r.version=hj(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=hj(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=hj(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return r}},gj=vj.log,mj=vj.log;function yj(r,t,e){var n=e?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return r.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){r.forEach(function(e){e.type===n&&e.trackId===t.id&&function t(r,n,i){n&&!i.has(n.id)&&(i.set(n.id,n),Object.keys(n).forEach(function(e){e.endsWith("Id")?t(r,r.get(n[e]),i):e.endsWith("Ids")&&n[e].forEach(function(e){t(r,r.get(e),i)})}))}(r,e,i)})}),i}var bj={shimGetUserMedia:function(e){var a=vj.detectBrowser(e),u=e&&e.navigator,s=function(i){if("object"!=typeof i||i.mandatory||i.optional)return i;var o={};return Object.keys(i).forEach(function(t){if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var r="object"==typeof i[t]?i[t]:{ideal:i[t]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var n=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){o.optional=o.optional||[];var e={};"number"==typeof r.ideal?(e[n("min",t)]=r.ideal,o.optional.push(e),(e={})[n("max",t)]=r.ideal):e[n("",t)]=r.ideal,o.optional.push(e)}void 0!==r.exact&&"number"!=typeof r.exact?(o.mandatory=o.mandatory||{},o.mandatory[n("",t)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(o.mandatory=o.mandatory||{},o.mandatory[n(e,t)]=r[e])})}}),i.advanced&&(o.optional=(o.optional||[]).concat(i.advanced)),o},n=function(r,n){if(61<=a.version)return n(r);if((r=JSON.parse(JSON.stringify(r)))&&"object"==typeof r.audio){var e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};e((r=JSON.parse(JSON.stringify(r))).audio,"autoGainControl","googAutoGainControl"),e(r.audio,"noiseSuppression","googNoiseSuppression"),r.audio=s(r.audio)}if(r&&"object"==typeof r.video){var i=r.video.facingMode;i=i&&("object"==typeof i?i:{ideal:i});var o,t=a.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!u.mediaDevices.getSupportedConstraints||!u.mediaDevices.getSupportedConstraints().facingMode||t)&&(delete r.video.facingMode,"environment"===i.exact||"environment"===i.ideal?o=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(o=["front"]),o))return u.mediaDevices.enumerateDevices().then(function(e){var t=(e=e.filter(function(e){return"videoinput"===e.kind})).find(function(t){return o.some(function(e){return-1!==t.label.toLowerCase().indexOf(e)})});return!t&&e.length&&-1!==o.indexOf("back")&&(t=e[e.length-1]),t&&(r.video.deviceId=i.exact?{exact:t.deviceId}:{ideal:t.deviceId}),r.video=s(r.video),gj("chrome: "+JSON.stringify(r)),n(r)});r.video=s(r.video)}return gj("chrome: "+JSON.stringify(r)),n(r)},i=function(e){return 64<=a.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};u.getUserMedia=function(e,t,r){n(e,function(e){u.webkitGetUserMedia(e,t,function(e){r&&r(i(e))})})};var t=function(r){return new Promise(function(e,t){u.getUserMedia(r,e,t)})};if(u.mediaDevices||(u.mediaDevices={getUserMedia:t,enumerateDevices:function(){return new Promise(function(t){var r={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:r[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),u.mediaDevices.getUserMedia){var r=u.mediaDevices.getUserMedia.bind(u.mediaDevices);u.mediaDevices.getUserMedia=function(e){return n(e,function(t){return r(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return e},function(e){return Promise.reject(i(e))})})}}else u.mediaDevices.getUserMedia=function(e){return t(e)};void 0===u.mediaDevices.addEventListener&&(u.mediaDevices.addEventListener=function(){gj("Dummy mediaDevices.addEventListener called.")}),void 0===u.mediaDevices.removeEventListener&&(u.mediaDevices.removeEventListener=function(){gj("Dummy mediaDevices.removeEventListener called.")})},shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(o){if("object"!=typeof o||!o.RTCPeerConnection||"ontrack"in o.RTCPeerConnection.prototype)"RTCRtpTransceiver"in o||vj.wrapPeerConnectionEvent(o,"track",function(e){return e.transceiver||(e.transceiver={receiver:e.receiver}),e});else{Object.defineProperty(o.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var e=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return i._ontrackpoly||(i._ontrackpoly=function(n){n.stream.addEventListener("addtrack",function(t){var e;e=o.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find(function(e){return e.track&&e.track.id===t.track.id}):{track:t.track};var r=new Event("track");r.track=t.track,r.receiver=e,r.transceiver={receiver:e},r.streams=[n.stream],i.dispatchEvent(r)}),n.stream.getTracks().forEach(function(t){var e;e=o.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find(function(e){return e.track&&e.track.id===t.id}):{track:t};var r=new Event("track");r.track=t,r.receiver=e,r.transceiver={receiver:e},r.streams=[n.stream],i.dispatchEvent(r)})},i.addEventListener("addstream",i._ontrackpoly)),e.apply(i,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var n=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,t){var r=i.apply(this,arguments);return r||(r=n(this,e),this._senders.push(r)),r};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;t._senders=t._senders||[],o.apply(t,[e]),e.getTracks().forEach(function(e){t._senders.push(n(t,e))})};var t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var r=this;r._senders=r._senders||[],t.apply(r,[e]),e.getTracks().forEach(function(t){var e=r._senders.find(function(e){return e.track===t});e&&r._senders.splice(r._senders.indexOf(e),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=a.apply(t,[]);return e.forEach(function(e){e._pc=t}),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=r.apply(t,[]);return e.forEach(function(e){e._pc=t}),e});var t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return yj(e,t.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=n.apply(t,[]);return e.forEach(function(e){e._pc=t}),e}),vj.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return yj(e,t.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(0<arguments.length&&arguments[0]instanceof e.MediaStreamTrack){var t,r,n,i=arguments[0];return this.getSenders().forEach(function(e){e.track===i&&(t?n=!0:t=e)}),this.getReceivers().forEach(function(e){return e.track===i&&(r?n=!0:r=e),e.track===i}),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},shimSourceObject:function(e){var r=e&&e.URL;"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;this._srcObject=e,this.src&&r.revokeObjectURL(this.src),e?(this.src=r.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&r.revokeObjectURL(t.src),t.src=r.createObjectURL(e)}),e.addEventListener("removetrack",function(){t.src&&r.revokeObjectURL(t.src),t.src=r.createObjectURL(e)})):this.src=""}}))},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(e){return t._shimmedLocalStreams[e][0]})};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,t){if(!t)return n.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=n.apply(this,arguments);return this._shimmedLocalStreams[t.id]?-1===this._shimmedLocalStreams[t.id].indexOf(r)&&this._shimmedLocalStreams[t.id].push(r):this._shimmedLocalStreams[t.id]=[t,r],r};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(t){if(r.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")});var t=r.getSenders();i.apply(this,arguments);var n=r.getSenders().filter(function(e){return-1===t.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(n)};var t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],t.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(r){var n=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},r&&Object.keys(this._shimmedLocalStreams).forEach(function(e){var t=n._shimmedLocalStreams[e].indexOf(r);-1!==t&&n._shimmedLocalStreams[e].splice(t,1),1===n._shimmedLocalStreams[e].length&&delete n._shimmedLocalStreams[e]}),o.apply(this,arguments)}},shimAddTrackRemoveTrack:function(a){var e=vj.detectBrowser(a);if(a.RTCPeerConnection.prototype.addTrack&&65<=e.version)return this.shimAddTrackRemoveTrackWithNative(a);var r=a.RTCPeerConnection.prototype.getLocalStreams;a.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this,e=r.apply(this);return t._reverseStreams=t._reverseStreams||{},e.map(function(e){return t._reverseStreams[e.id]})};var n=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(e){var r=this;if(r._streams=r._streams||{},r._reverseStreams=r._reverseStreams||{},e.getTracks().forEach(function(t){if(r.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),!r._reverseStreams[e.id]){var t=new a.MediaStream(e.getTracks());r._streams[e.id]=t,r._reverseStreams[t.id]=e,e=t}n.apply(r,[e])};var i=a.RTCPeerConnection.prototype.removeStream;function o(n,e){var i=e.sdp;return Object.keys(n._reverseStreams||[]).forEach(function(e){var t=n._reverseStreams[e],r=n._streams[t.id];i=i.replace(new RegExp(r.id,"g"),t.id)}),new RTCSessionDescription({type:e.type,sdp:i})}a.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},i.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},a.RTCPeerConnection.prototype.addTrack=function(t,e){var r=this;if("closed"===r.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(r.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");r._streams=r._streams||{},r._reverseStreams=r._reverseStreams||{};var i=r._streams[e.id];if(i)i.addTrack(t),Promise.resolve().then(function(){r.dispatchEvent(new Event("negotiationneeded"))});else{var o=new a.MediaStream([t]);r._streams[e.id]=o,r._reverseStreams[o.id]=e,r.addStream(o)}return r.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(e){var t=a.RTCPeerConnection.prototype[e];a.RTCPeerConnection.prototype[e]=function(){var r=this,n=arguments;return arguments.length&&"function"==typeof arguments[0]?t.apply(r,[function(e){var t=o(r,e);n[0].apply(null,[t])},function(e){n[1]&&n[1].apply(null,e)},arguments[2]]):t.apply(r,arguments).then(function(e){return o(r,e)})}});var t=a.RTCPeerConnection.prototype.setLocalDescription;a.RTCPeerConnection.prototype.setLocalDescription=function(){var n,e,i;return arguments.length&&arguments[0].type&&(arguments[0]=(n=this,e=arguments[0],i=e.sdp,Object.keys(n._reverseStreams||[]).forEach(function(e){var t=n._reverseStreams[e],r=n._streams[t.id];i=i.replace(new RegExp(t.id,"g"),r.id)}),new RTCSessionDescription({type:e.type,sdp:i}))),t.apply(this,arguments)};var u=Object.getOwnPropertyDescriptor(a.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(a.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=u.get.apply(this);return""===e.type?e:o(this,e)}}),a.RTCPeerConnection.prototype.removeTrack=function(t){var r,n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(t._pc===n))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");n._streams=n._streams||{},Object.keys(n._streams).forEach(function(e){n._streams[e].getTracks().find(function(e){return t.track===e})&&(r=n._streams[e])}),r&&(1===r.getTracks().length?n.removeStream(n._reverseStreams[r.id]):r.removeTrack(t.track),n.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(r){var e=vj.detectBrowser(r);if(!r.RTCPeerConnection&&r.webkitRTCPeerConnection)r.RTCPeerConnection=function(e,t){return mj("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy),new r.webkitRTCPeerConnection(e,t)},r.RTCPeerConnection.prototype=r.webkitRTCPeerConnection.prototype,r.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return r.webkitRTCPeerConnection.generateCertificate}});else{var o=r.RTCPeerConnection;r.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var r=[],n=0;n<e.iceServers.length;n++){var i=e.iceServers[n];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(vj.deprecated("RTCIceServer.url","RTCIceServer.urls"),(i=JSON.parse(JSON.stringify(i))).urls=i.url,r.push(i)):r.push(e.iceServers[n])}e.iceServers=r}return new o(e,t)},r.RTCPeerConnection.prototype=o.prototype,Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})}var u=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(e,t,r){var n=this,i=arguments;if(0<arguments.length&&"function"==typeof e)return u.apply(this,arguments);if(0===u.length&&(0===arguments.length||"function"!=typeof e))return u.apply(this,[]);var o=function(e){var n={};return e.result().forEach(function(t){var r={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){r[e]=t.stat(e)}),n[r.id]=r}),n},a=function(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))};if(2<=arguments.length){return u.apply(this,[function(e){i[1](a(o(e)))},e])}return new Promise(function(t,e){u.apply(n,[function(e){t(a(o(e)))},e])}).then(t,r)},e.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var i=r.RTCPeerConnection.prototype[e];r.RTCPeerConnection.prototype[e]=function(){var r=arguments,n=this,e=new Promise(function(e,t){i.apply(n,[r[0],e,t])});return r.length<2?e:e.then(function(){r[1].apply(null,[])},function(e){3<=r.length&&r[2].apply(null,[e])})}}),e.version<52&&["createOffer","createAnswer"].forEach(function(e){var i=r.RTCPeerConnection.prototype[e];r.RTCPeerConnection.prototype[e]=function(){var r=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(e,t){i.apply(r,[e,t,n])})}return i.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=r.RTCPeerConnection.prototype[e];r.RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var t=r.RTCPeerConnection.prototype.addIceCandidate;r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}},fixNegotiationNeeded:function(e){vj.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){if("stable"===e.target.signalingState)return e})},shimGetDisplayMedia:function(e,r){"getDisplayMedia"in e.navigator||("function"==typeof r?navigator.getDisplayMedia=function(t){return r(t).then(function(e){return t.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:t.video.frameRate||3}},navigator.mediaDevices.getUserMedia(t)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},_j=t(function(e){var l={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};l.localCName=l.generateIdentifier(),l.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},l.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(0<t?"m="+e:e).trim()+"\r\n"})},l.getDescription=function(e){var t=l.splitSections(e);return t&&t[0]},l.getMediaSections=function(e){var t=l.splitSections(e);return t.shift(),t},l.matchPrefix=function(e,t){return l.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},l.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},l.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},l.parseIceOptions=function(e){return e.substr(14).split(" ")},l.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},l.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},l.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:0<t[0].indexOf("/")?t[0].split("/")[1]:"sendrecv",uri:t[1]}},l.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},l.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)r[(t=n[i].trim().split("="))[0].trim()]=t[1];return r},l.writeFmtp=function(t){var e="",r=t.payloadType;if(void 0!==t.preferredPayloadType&&(r=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var n=[];Object.keys(t.parameters).forEach(function(e){t.parameters[e]?n.push(e+"="+t.parameters[e]):n.push(e)}),e+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return e},l.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},l.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},l.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return-1<n?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},l.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},l.getMid=function(e){var t=l.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},l.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},l.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:l.matchPrefix(e+t,"a=fingerprint:").map(l.parseFingerprint)}},l.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),r},l.getIceParameters=function(e,t){var r=l.splitLines(e);return{usernameFragment:(r=r.concat(l.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},l.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},l.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=l.splitLines(e)[0].split(" "),n=3;n<r.length;n++){var i=r[n],o=l.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(o){var a=l.parseRtpMap(o),u=l.matchPrefix(e,"a=fmtp:"+i+" ");switch(a.parameters=u.length?l.parseFmtp(u[0]):{},a.rtcpFeedback=l.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(l.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return l.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(l.parseExtmap(e))}),t},l.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=0<t.codecs.length?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){r+=l.writeRtpMap(e),r+=l.writeFmtp(e),r+=l.writeRtcpFb(e)});var n=0;return t.codecs.forEach(function(e){e.maxptime>n&&(n=e.maxptime)}),0<n&&(r+="a=maxptime:"+n+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){r+=l.writeExtmap(e)}),r},l.parseRtpEncodingParameters=function(e){var r,n=[],t=l.parseRtpParameters(e),i=-1!==t.fecMechanisms.indexOf("RED"),o=-1!==t.fecMechanisms.indexOf("ULPFEC"),a=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),u=0<a.length&&a[0].ssrc,s=l.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});0<s.length&&1<s[0].length&&s[0][0]===u&&(r=s[0][1]),t.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:u,codecPayloadType:parseInt(e.parameters.apt,10)};u&&r&&(t.rtx={ssrc:r}),n.push(t),i&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:r,mechanism:o?"red+ulpfec":"red"},n.push(t))}}),0===n.length&&u&&n.push({ssrc:u});var c=l.matchPrefix(e,"b=");return c.length&&(c=0===c[0].indexOf("b=TIAS:")?parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=c})),n},l.parseRtcpParameters=function(e){var t={},r=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var n=l.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=0<n.length,t.compound=0===n.length;var i=l.matchPrefix(e,"a=rtcp-mux");return t.mux=0<i.length,t},l.parseMsid=function(e){var t,r=l.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var n=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return 0<n.length?{stream:(t=n[0].value.split(" "))[0],track:t[1]}:void 0},l.generateSessionId=function(){return Math.random().toString().substr(2,21)},l.writeSessionBoilerplate=function(e,t){var r=void 0!==t?t:2;return"v=0\r\no=thisisadapterortc "+(e||l.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},l.writeMediaSection=function(e,t,r,n){var i=l.writeRtpDescription(e.kind,t);if(i+=l.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=l.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var o="msid:"+n.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+o,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+l.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+l.localCName+"\r\n"),i},l.getDirection=function(e,t){for(var r=l.splitLines(e),n=0;n<r.length;n++)switch(r[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[n].substr(2)}return t?l.getDirection(t):"sendrecv"},l.getKind=function(e){return l.splitLines(e)[0].split(" ")[0].substr(2)},l.isRejected=function(e){return"0"===e.split(" ",2)[1]},l.parseMLine=function(e){var t=l.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},l.parseOLine=function(e){var t=l.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},l.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=l.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},e.exports=l});function wj(e,t,r,n,i){var o=_j.writeRtpDescription(e.kind,t);if(o+=_j.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=_j.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var u="msid:"+(n?n.id:"-")+" "+a+"\r\n";o+="a="+u,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+u,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+u,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+_j.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+_j.localCName+"\r\n"),o}function Sj(c,l){var f={codecs:[],headerExtensions:[],fecMechanisms:[]},d=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]};return c.codecs.forEach(function(r){for(var e=0;e<l.codecs.length;e++){var t=l.codecs[e];if(r.name.toLowerCase()===t.name.toLowerCase()&&r.clockRate===t.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&t.parameters.apt&&(n=r,i=t,o=c.codecs,a=l.codecs,s=u=void 0,u=d(n.parameters.apt,o),s=d(i.parameters.apt,a),!u||!s||u.name.toLowerCase()!==s.name.toLowerCase()))continue;(t=JSON.parse(JSON.stringify(t))).numChannels=Math.min(r.numChannels,t.numChannels),f.codecs.push(t),t.rtcpFeedback=t.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}var n,i,o,a,u,s}),c.headerExtensions.forEach(function(e){for(var t=0;t<l.headerExtensions.length;t++){var r=l.headerExtensions[t];if(e.uri===r.uri){f.headerExtensions.push(r);break}}}),f}function kj(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function Ej(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function Tj(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}var Pj=function(A,I){function D(e,t){t.addTrack(e),t.dispatchEvent(new A.MediaStreamTrackEvent("addtrack",{track:e}))}function i(e,t,r,n){var i=new Event("track");i.track=t,i.receiver=r,i.transceiver={receiver:r},i.streams=n,A.setTimeout(function(){e._dispatchEvent("track",i)})}var n=function(e){var t,n,i,r=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=o[e].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",e=JSON.parse(JSON.stringify(e||{})),this.usingBundle="max-bundle"===e.bundlePolicy,"negotiate"===e.rtcpMuxPolicy)throw Tj("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(e.rtcpMuxPolicy||(e.rtcpMuxPolicy="require"),e.iceTransportPolicy){case"all":case"relay":break;default:e.iceTransportPolicy="all"}switch(e.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:e.bundlePolicy="balanced"}if(e.iceServers=(t=e.iceServers||[],n=I,i=!1,(t=JSON.parse(JSON.stringify(t))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof t;return r&&(t=[t]),t=t.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&14393<=n&&-1===e.indexOf("?transport=udp"):i=!0}),delete e.url,e.urls=r?t[0]:t,!!t.length}})),this._iceGatherers=[],e.iceCandidatePoolSize)for(var a=e.iceCandidatePoolSize;0<a;a--)this._iceGatherers.push(new A.RTCIceGatherer({iceServers:e.iceServers,gatherPolicy:e.iceTransportPolicy}));else e.iceCandidatePoolSize=0;this._config=e,this.transceivers=[],this._sdpSessionId=_j.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(n.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(n.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),n.prototype.onicecandidate=null,n.prototype.onaddstream=null,n.prototype.ontrack=null,n.prototype.onremovestream=null,n.prototype.onsignalingstatechange=null,n.prototype.oniceconnectionstatechange=null,n.prototype.onconnectionstatechange=null,n.prototype.onicegatheringstatechange=null,n.prototype.onnegotiationneeded=null,n.prototype.ondatachannel=null,n.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},n.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},n.prototype.getConfiguration=function(){return this._config},n.prototype.getLocalStreams=function(){return this.localStreams},n.prototype.getRemoteStreams=function(){return this.remoteStreams},n.prototype._createTransceiver=function(e,t){var r=0<this.transceivers.length,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(n),n},n.prototype.addTrack=function(t,e){if(this._isClosed)throw Tj("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(e){return e.track===t}))throw Tj("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==t.kind||(r=this.transceivers[n]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(e)&&this.localStreams.push(e),r.track=t,r.stream=e,r.rtpSender=new A.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},n.prototype.addStream=function(t){var r=this;if(15025<=I)t.getTracks().forEach(function(e){r.addTrack(e,t)});else{var n=t.clone();t.getTracks().forEach(function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",function(e){r.enabled=e.enabled})}),n.getTracks().forEach(function(e){r.addTrack(e,n)})}},n.prototype.removeTrack=function(t){if(this._isClosed)throw Tj("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof A.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var e=this.transceivers.find(function(e){return e.rtpSender===t});if(!e)throw Tj("InvalidAccessError","Sender was not created by this connection.");var r=e.stream;e.rtpSender.stop(),e.rtpSender=null,e.track=null,e.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&-1<this.localStreams.indexOf(r)&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},n.prototype.removeStream=function(e){var r=this;e.getTracks().forEach(function(t){var e=r.getSenders().find(function(e){return e.track===t});e&&r.removeTrack(e)})},n.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},n.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},n.prototype._createIceGatherer=function(r,e){var n=this;if(e&&0<r)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new A.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[r].bufferedCandidateEvents=[],this.transceivers[r].bufferCandidates=function(e){var t=!e.candidate||0===Object.keys(e.candidate).length;i.state=t?"completed":"gathering",null!==n.transceivers[r].bufferedCandidateEvents&&n.transceivers[r].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[r].bufferCandidates),i},n.prototype._gather=function(u,s){var c=this,l=this.transceivers[s].iceGatherer;if(!l.onlocalcandidate){var e=this.transceivers[s].bufferedCandidateEvents;this.transceivers[s].bufferedCandidateEvents=null,l.removeEventListener("localcandidate",this.transceivers[s].bufferCandidates),l.onlocalcandidate=function(e){if(!(c.usingBundle&&0<s)){var t=new Event("icecandidate");t.candidate={sdpMid:u,sdpMLineIndex:s};var r=e.candidate,n=!r||0===Object.keys(r).length;if(n)"new"!==l.state&&"gathering"!==l.state||(l.state="completed");else{"new"===l.state&&(l.state="gathering"),r.component=1,r.ufrag=l.getLocalParameters().usernameFragment;var i=_j.writeCandidate(r);t.candidate=Object.assign(t.candidate,_j.parseCandidate(i)),t.candidate.candidate=i,t.candidate.toJSON=function(){return{candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex,usernameFragment:t.candidate.usernameFragment}}}var o=_j.getMediaSections(c._localDescription.sdp);o[t.candidate.sdpMLineIndex]+=n?"a=end-of-candidates\r\n":"a="+t.candidate.candidate+"\r\n",c._localDescription.sdp=_j.getDescription(c._localDescription.sdp)+o.join("");var a=c.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==c.iceGatheringState&&(c.iceGatheringState="gathering",c._emitGatheringStateChange()),n||c._dispatchEvent("icecandidate",t),a&&(c._dispatchEvent("icecandidate",new Event("icecandidate")),c.iceGatheringState="complete",c._emitGatheringStateChange())}},A.setTimeout(function(){e.forEach(function(e){l.onlocalcandidate(e)})},0)}},n.prototype._createIceAndDtlsTransports=function(){var e=this,t=new A.RTCIceTransport(null);t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var r=new A.RTCDtlsTransport(t);return r.ondtlsstatechange=function(){e._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:r}},n.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},n.prototype._transceive=function(e,t,r){var n=Sj(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(n.encodings=e.sendEncodingParameters,n.rtcp={cname:_j.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(n.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(n)),r&&e.rtpReceiver&&0<n.codecs.length&&("video"===e.kind&&e.recvEncodingParameters&&I<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?n.encodings=e.recvEncodingParameters:n.encodings=[{}],n.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(n.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(n.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(n))},n.prototype.setLocalDescription=function(e){var t,f,d=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(Tj("TypeError",'Unsupported type "'+e.type+'"'));if(!kj("setLocalDescription",e.type,d.signalingState)||d._isClosed)return Promise.reject(Tj("InvalidStateError","Can not set local "+e.type+" in state "+d.signalingState));if("offer"===e.type)t=_j.splitSections(e.sdp),f=t.shift(),t.forEach(function(e,t){var r=_j.parseRtpParameters(e);d.transceivers[t].localCapabilities=r}),d.transceivers.forEach(function(e,t){d._gather(e.mid,t)});else if("answer"===e.type){t=_j.splitSections(d._remoteDescription.sdp),f=t.shift();var p=0<_j.matchPrefix(f,"a=ice-lite").length;t.forEach(function(e,t){var r=d.transceivers[t],n=r.iceGatherer,i=r.iceTransport,o=r.dtlsTransport,a=r.localCapabilities,u=r.remoteCapabilities;if(!(_j.isRejected(e)&&0===_j.matchPrefix(e,"a=bundle-only").length)&&!r.rejected){var s=_j.getIceParameters(e,f),c=_j.getDtlsParameters(e,f);p&&(c.role="server"),d.usingBundle&&0!==t||(d._gather(r.mid,t),"new"===i.state&&i.start(n,s,p?"controlling":"controlled"),"new"===o.state&&o.start(c));var l=Sj(a,u);d._transceive(r,0<l.codecs.length,!1)}})}return d._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?d._updateSignalingState("have-local-offer"):d._updateSignalingState("stable"),Promise.resolve()},n.prototype.setRemoteDescription=function(P){var O=this;if(-1===["offer","answer"].indexOf(P.type))return Promise.reject(Tj("TypeError",'Unsupported type "'+P.type+'"'));if(!kj("setRemoteDescription",P.type,O.signalingState)||O._isClosed)return Promise.reject(Tj("InvalidStateError","Can not set remote "+P.type+" in state "+O.signalingState));var C={};O.remoteStreams.forEach(function(e){C[e.id]=e});var M=[],e=_j.splitSections(P.sdp),j=e.shift(),x=0<_j.matchPrefix(j,"a=ice-lite").length,R=0<_j.matchPrefix(j,"a=group:BUNDLE ").length;O.usingBundle=R;var t=_j.matchPrefix(j,"a=ice-options:")[0];return O.canTrickleIceCandidates=!!t&&0<=t.substr(14).split(" ").indexOf("trickle"),e.forEach(function(e,t){var r=_j.splitLines(e),n=_j.getKind(e),i=_j.isRejected(e)&&0===_j.matchPrefix(e,"a=bundle-only").length,o=r[0].substr(2).split(" ")[2],a=_j.getDirection(e,j),u=_j.parseMsid(e),s=_j.getMid(e)||_j.generateIdentifier();if(i||"application"===n&&("DTLS/SCTP"===o||"UDP/DTLS/SCTP"===o))O.transceivers[t]={mid:s,kind:n,protocol:o,rejected:!0};else{var c,l,f,d,p,h,v,g,m;!i&&O.transceivers[t]&&O.transceivers[t].rejected&&(O.transceivers[t]=O._createTransceiver(n,!0));var y,b,_=_j.parseRtpParameters(e);i||(y=_j.getIceParameters(e,j),(b=_j.getDtlsParameters(e,j)).role="client"),v=_j.parseRtpEncodingParameters(e);var w=_j.parseRtcpParameters(e),S=0<_j.matchPrefix(e,"a=end-of-candidates",j).length,k=_j.matchPrefix(e,"a=candidate:").map(function(e){return _j.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===P.type||"answer"===P.type)&&!i&&R&&0<t&&O.transceivers[t]&&(O._disposeIceAndDtlsTransports(t),O.transceivers[t].iceGatherer=O.transceivers[0].iceGatherer,O.transceivers[t].iceTransport=O.transceivers[0].iceTransport,O.transceivers[t].dtlsTransport=O.transceivers[0].dtlsTransport,O.transceivers[t].rtpSender&&O.transceivers[t].rtpSender.setTransport(O.transceivers[0].dtlsTransport),O.transceivers[t].rtpReceiver&&O.transceivers[t].rtpReceiver.setTransport(O.transceivers[0].dtlsTransport)),"offer"!==P.type||i)"answer"!==P.type||i||(l=(c=O.transceivers[t]).iceGatherer,f=c.iceTransport,d=c.dtlsTransport,p=c.rtpReceiver,h=c.sendEncodingParameters,g=c.localCapabilities,O.transceivers[t].recvEncodingParameters=v,O.transceivers[t].remoteCapabilities=_,O.transceivers[t].rtcpParameters=w,k.length&&"new"===f.state&&(!x&&!S||R&&0!==t?k.forEach(function(e){Ej(c.iceTransport,e)}):f.setRemoteCandidates(k)),R&&0!==t||("new"===f.state&&f.start(l,y,"controlling"),"new"===d.state&&d.start(b)),O._transceive(c,"sendrecv"===a||"recvonly"===a,"sendrecv"===a||"sendonly"===a),!p||"sendrecv"!==a&&"sendonly"!==a?delete c.rtpReceiver:(m=p.track,u?(C[u.stream]||(C[u.stream]=new A.MediaStream),D(m,C[u.stream]),M.push([m,p,C[u.stream]])):(C.default||(C.default=new A.MediaStream),D(m,C.default),M.push([m,p,C.default]))));else{(c=O.transceivers[t]||O._createTransceiver(n)).mid=s,c.iceGatherer||(c.iceGatherer=O._createIceGatherer(t,R)),k.length&&"new"===c.iceTransport.state&&(!S||R&&0!==t?k.forEach(function(e){Ej(c.iceTransport,e)}):c.iceTransport.setRemoteCandidates(k)),g=A.RTCRtpReceiver.getCapabilities(n),I<15019&&(g.codecs=g.codecs.filter(function(e){return"rtx"!==e.name})),h=c.sendEncodingParameters||[{ssrc:1001*(2*t+2)}];var E,T=!1;if("sendrecv"===a||"sendonly"===a){if(T=!c.rtpReceiver,p=c.rtpReceiver||new A.RTCRtpReceiver(c.dtlsTransport,n),T)m=p.track,u&&"-"===u.stream||(E=u?(C[u.stream]||(C[u.stream]=new A.MediaStream,Object.defineProperty(C[u.stream],"id",{get:function(){return u.stream}})),Object.defineProperty(m,"id",{get:function(){return u.track}}),C[u.stream]):(C.default||(C.default=new A.MediaStream),C.default)),E&&(D(m,E),c.associatedRemoteMediaStreams.push(E)),M.push([m,p,E])}else c.rtpReceiver&&c.rtpReceiver.track&&(c.associatedRemoteMediaStreams.forEach(function(e){var t,r,n=e.getTracks().find(function(e){return e.id===c.rtpReceiver.track.id});n&&(t=n,(r=e).removeTrack(t),r.dispatchEvent(new A.MediaStreamTrackEvent("removetrack",{track:t})))}),c.associatedRemoteMediaStreams=[]);c.localCapabilities=g,c.remoteCapabilities=_,c.rtpReceiver=p,c.rtcpParameters=w,c.sendEncodingParameters=h,c.recvEncodingParameters=v,O._transceive(O.transceivers[t],!1,T)}}}),void 0===O._dtlsRole&&(O._dtlsRole="offer"===P.type?"active":"passive"),O._remoteDescription={type:P.type,sdp:P.sdp},"offer"===P.type?O._updateSignalingState("have-remote-offer"):O._updateSignalingState("stable"),Object.keys(C).forEach(function(e){var n=C[e];if(n.getTracks().length){if(-1===O.remoteStreams.indexOf(n)){O.remoteStreams.push(n);var t=new Event("addstream");t.stream=n,A.setTimeout(function(){O._dispatchEvent("addstream",t)})}M.forEach(function(e){var t=e[0],r=e[1];n.id===e[2].id&&i(O,t,r,[n])})}}),M.forEach(function(e){e[2]||i(O,e[0],e[1],[])}),A.setTimeout(function(){O&&O.transceivers&&O.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},n.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},n.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},n.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,A.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},n.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++}),e="new",0<t.failed?e="failed":0<t.checking?e="checking":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected?e="connected":0<t.completed&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},n.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",0<t.failed?e="failed":0<t.connecting?e="connecting":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},n.prototype.createOffer=function(){var u=this;if(u._isClosed)return Promise.reject(Tj("InvalidStateError","Can not call createOffer after close"));var t=u.transceivers.filter(function(e){return"audio"===e.kind}).length,r=u.transceivers.filter(function(e){return"video"===e.kind}).length,e=arguments[0];if(e){if(e.mandatory||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.offerToReceiveAudio&&(t=!0===e.offerToReceiveAudio?1:!1===e.offerToReceiveAudio?0:e.offerToReceiveAudio),void 0!==e.offerToReceiveVideo&&(r=!0===e.offerToReceiveVideo?1:!1===e.offerToReceiveVideo?0:e.offerToReceiveVideo)}for(u.transceivers.forEach(function(e){"audio"===e.kind?--t<0&&(e.wantReceive=!1):"video"===e.kind&&--r<0&&(e.wantReceive=!1)});0<t||0<r;)0<t&&(u._createTransceiver("audio"),t--),0<r&&(u._createTransceiver("video"),r--);var n=_j.writeSessionBoilerplate(u._sdpSessionId,u._sdpSessionVersion++);u.transceivers.forEach(function(e,t){var r=e.track,n=e.kind,i=e.mid||_j.generateIdentifier();e.mid=i,e.iceGatherer||(e.iceGatherer=u._createIceGatherer(t,u.usingBundle));var o=A.RTCRtpSender.getCapabilities(n);I<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1"),e.remoteCapabilities&&e.remoteCapabilities.codecs&&e.remoteCapabilities.codecs.forEach(function(e){t.name.toLowerCase()===e.name.toLowerCase()&&t.clockRate===e.clockRate&&(t.preferredPayloadType=e.payloadType)})}),o.headerExtensions.forEach(function(t){(e.remoteCapabilities&&e.remoteCapabilities.headerExtensions||[]).forEach(function(e){t.uri===e.uri&&(t.id=e.id)})});var a=e.sendEncodingParameters||[{ssrc:1001*(2*t+1)}];r&&15019<=I&&"video"===n&&!a[0].rtx&&(a[0].rtx={ssrc:a[0].ssrc+1}),e.wantReceive&&(e.rtpReceiver=new A.RTCRtpReceiver(e.dtlsTransport,n)),e.localCapabilities=o,e.sendEncodingParameters=a}),"max-compat"!==u._config.bundlePolicy&&(n+="a=group:BUNDLE "+u.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n",u.transceivers.forEach(function(e,t){n+=wj(e,e.localCapabilities,"offer",e.stream,u._dtlsRole),n+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===u.iceGatheringState||0!==t&&u.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,n+="a="+_j.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(n+="a=end-of-candidates\r\n"))});var i=new A.RTCSessionDescription({type:"offer",sdp:n});return Promise.resolve(i)},n.prototype.createAnswer=function(){var i=this;if(i._isClosed)return Promise.reject(Tj("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return Promise.reject(Tj("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var o=_j.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(o+="a=group:BUNDLE "+i.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n");var a=_j.getMediaSections(i._remoteDescription.sdp).length;i.transceivers.forEach(function(e,t){if(!(a<t+1)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?o+="m=application 0 DTLS/SCTP 5000\r\n":o+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?o+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(o+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(o+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var r;if(e.stream)"audio"===e.kind?r=e.stream.getAudioTracks()[0]:"video"===e.kind&&(r=e.stream.getVideoTracks()[0]),r&&15019<=I&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var n=Sj(e.localCapabilities,e.remoteCapabilities);!n.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,o+=wj(e,n,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(o+="a=rtcp-rsize\r\n")}});var e=new A.RTCSessionDescription({type:"answer",sdp:o});return Promise.resolve(e)},n.prototype.addIceCandidate=function(s){var c,l=this;return s&&void 0===s.sdpMLineIndex&&!s.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(e,t){if(!l._remoteDescription)return t(Tj("InvalidStateError","Can not add ICE candidate without a remote description"));if(s&&""!==s.candidate){var r=s.sdpMLineIndex;if(s.sdpMid)for(var n=0;n<l.transceivers.length;n++)if(l.transceivers[n].mid===s.sdpMid){r=n;break}var i=l.transceivers[r];if(!i)return t(Tj("OperationError","Can not add ICE candidate"));if(i.rejected)return e();var o=0<Object.keys(s.candidate).length?_j.parseCandidate(s.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return e();if(o.component&&1!==o.component)return e();if((0===r||0<r&&i.iceTransport!==l.transceivers[0].iceTransport)&&!Ej(i.iceTransport,o))return t(Tj("OperationError","Can not add ICE candidate"));var a=s.candidate.trim();0===a.indexOf("a=")&&(a=a.substr(2)),(c=_j.getMediaSections(l._remoteDescription.sdp))[r]+="a="+(o.type?a:"end-of-candidates")+"\r\n",l._remoteDescription.sdp=_j.getDescription(l._remoteDescription.sdp)+c.join("")}else for(var u=0;u<l.transceivers.length&&(l.transceivers[u].rejected||(l.transceivers[u].iceTransport.addRemoteCandidate({}),(c=_j.getMediaSections(l._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",l._remoteDescription.sdp=_j.getDescription(l._remoteDescription.sdp)+c.join(""),!l.usingBundle));u++);e()})},n.prototype.getStats=function(t){if(t&&t instanceof A.MediaStreamTrack){var r=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)}),!r)throw Tj("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(e){t[e]&&n.push(t[e].getStats())})}),Promise.all(n).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var t=A[e];if(t&&t.prototype&&t.prototype.getStats){var r=t.prototype.getStats;t.prototype.getStats=function(){return r.apply(this).then(function(r){var n=new Map;return Object.keys(r).forEach(function(e){var t;r[e].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(t=r[e]).type]||t.type,n.set(e,r[e])}),n})}}});var e=["createOffer","createAnswer"];return e.forEach(function(e){var r=n.prototype[e];n.prototype[e]=function(){var t=arguments;return"function"==typeof t[0]||"function"==typeof t[1]?r.apply(this,[arguments[2]]).then(function(e){"function"==typeof t[0]&&t[0].apply(null,[e])},function(e){"function"==typeof t[1]&&t[1].apply(null,[e])}):r.apply(this,arguments)}}),(e=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var r=n.prototype[e];n.prototype[e]=function(){var t=arguments;return"function"==typeof t[1]||"function"==typeof t[2]?r.apply(this,arguments).then(function(){"function"==typeof t[1]&&t[1].apply(null)},function(e){"function"==typeof t[2]&&t[2].apply(null,[e])}):r.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=n.prototype[e];n.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),n},Oj={shimGetUserMedia:function(e){var t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch(function(e){return Promise.reject({name:{PermissionDeniedError:"NotAllowedError"}[(t=e).name]||t.name,message:t.message,constraint:t.constraint,toString:function(){return this.name}});var t})}},shimPeerConnection:function(e){var t=vj.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var o=Pj(e,t.version);e.RTCPeerConnection=function(e){var t,n,i;return e&&e.iceServers&&(e.iceServers=(t=e.iceServers,i=!1,(t=JSON.parse(JSON.stringify(t))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&vj.deprecated("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof t;return r&&(t=[t]),t=t.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&14393<=n&&-1===e.indexOf("?transport=udp"):i=!0}),delete e.url,e.urls=r?t[0]:t,!!t.length}}))),new o(e)},e.RTCPeerConnection.prototype=o.prototype},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},Cj=vj.log,Mj={shimGetUserMedia:function(e){var i=vj.detectBrowser(e),o=e&&e.navigator,t=e&&e.MediaStreamTrack,a=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},n=function(e,t,r){var n=function(n){if("object"!=typeof n||n.require)return n;var i=[];return Object.keys(n).forEach(function(e){if("require"!==e&&"advanced"!==e&&"mediaSource"!==e){var t=n[e]="object"==typeof n[e]?n[e]:{ideal:n[e]};if(void 0===t.min&&void 0===t.max&&void 0===t.exact||i.push(e),void 0!==t.exact&&("number"==typeof t.exact?t.min=t.max=t.exact:n[e]=t.exact,delete t.exact),void 0!==t.ideal){n.advanced=n.advanced||[];var r={};"number"==typeof t.ideal?r[e]={min:t.ideal,max:t.ideal}:r[e]=t.ideal,n.advanced.push(r),delete t.ideal,Object.keys(t).length||delete n[e]}}}),i.length&&(n.require=i),n};return e=JSON.parse(JSON.stringify(e)),i.version<38&&(Cj("spec: "+JSON.stringify(e)),e.audio&&(e.audio=n(e.audio)),e.video&&(e.video=n(e.video)),Cj("ff37: "+JSON.stringify(e))),o.mozGetUserMedia(e,t,function(e){r(a(e))})};if(o.mediaDevices||(o.mediaDevices={getUserMedia:function(r){return new Promise(function(e,t){n(r,e,t)})},addEventListener:function(){},removeEventListener:function(){}}),o.mediaDevices.enumerateDevices=o.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},i.version<41){var r=o.mediaDevices.enumerateDevices.bind(o.mediaDevices);o.mediaDevices.enumerateDevices=function(){return r().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(i.version<49){var u=o.mediaDevices.getUserMedia.bind(o.mediaDevices);o.mediaDevices.getUserMedia=function(t){return u(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return e},function(e){return Promise.reject(a(e))})}}if(!(55<i.version&&"autoGainControl"in o.mediaDevices.getSupportedConstraints())){var s=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},c=o.mediaDevices.getUserMedia.bind(o.mediaDevices);if(o.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),c(e)},t&&t.prototype.getSettings){var l=t.prototype.getSettings;t.prototype.getSettings=function(){var e=l.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(t&&t.prototype.applyConstraints){var f=t.prototype.applyConstraints;t.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),f.apply(this,[e])}}}o.getUserMedia=function(e,t,r){if(i.version<44)return n(e,t,r);vj.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),o.mediaDevices.getUserMedia(e).then(t,r)}},shimOnTrack:function(e){"object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(r){r.stream.getTracks().forEach(function(e){var t=new Event("track");t.track=e,t.receiver={track:e},t.transceiver={receiver:t.receiver},t.streams=[r.stream],this.dispatchEvent(t)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(u){var s=vj.detectBrowser(u);if("object"==typeof u&&(u.RTCPeerConnection||u.mozRTCPeerConnection)){u.RTCPeerConnection||(u.RTCPeerConnection=function(e,t){if(s.version<38&&e&&e.iceServers){for(var r=[],n=0;n<e.iceServers.length;n++){var i=e.iceServers[n];if(i.hasOwnProperty("urls"))for(var o=0;o<i.urls.length;o++){var a={url:i.urls[o]};0===i.urls[o].indexOf("turn")&&(a.username=i.username,a.credential=i.credential),r.push(a)}else r.push(e.iceServers[n])}e.iceServers=r}return new u.mozRTCPeerConnection(e,t)},u.RTCPeerConnection.prototype=u.mozRTCPeerConnection.prototype,u.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(u.RTCPeerConnection,"generateCertificate",{get:function(){return u.mozRTCPeerConnection.generateCertificate}}),u.RTCSessionDescription=u.mozRTCSessionDescription,u.RTCIceCandidate=u.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=u.RTCPeerConnection.prototype[e];u.RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?u.RTCIceCandidate:u.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=u.RTCPeerConnection.prototype.addIceCandidate;u.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=u.RTCPeerConnection.prototype.getStats;u.RTCPeerConnection.prototype.getStats=function(e,i,t){return r.apply(this,[e||null]).then(function(r){var t,n;if(s.version<48&&(t=r,n=new Map,Object.keys(t).forEach(function(e){n.set(e,t[e]),n[e]=t[e]}),r=n),s.version<53&&!i)try{r.forEach(function(e){e.type=o[e.type]||e.type})}catch(e){if("TypeError"!==e.name)throw e;r.forEach(function(e,t){r.set(t,Object.assign({},e,{type:o[e.type]||e.type}))})}return r}).then(i,t)}}},shimSenderGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=r.apply(t,[]);return e.forEach(function(e){e._pc=t}),e});var t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},shimReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=r.apply(t,[]);return e.forEach(function(e){e._pc=t}),e}),vj.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){var r=this;vj.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&-1!==t.getTracks().indexOf(e.track)&&r.removeTrack(e)})})},shimRTCDataChannel:function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},shimGetDisplayMedia:function(e,r){"getDisplayMedia"in e.navigator||(navigator.getDisplayMedia=function(e){if(e&&e.video)return!0===e.video?e.video={mediaSource:r}:e.video.mediaSource=r,navigator.mediaDevices.getUserMedia(e);var t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,Promise.reject(t)})}},jj={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(t){var r=null;return this._localStreams&&this._localStreams.forEach(function(e){e.id===t&&(r=e)}),this._remoteStreams&&this._remoteStreams.forEach(function(e){e.id===t&&(r=e)}),r}),!("addStream"in e.RTCPeerConnection.prototype)){var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(t)&&this._localStreams.push(t);var r=this;t.getTracks().forEach(function(e){n.call(r,e,t)})},e.RTCPeerConnection.prototype.addTrack=function(e,t){return t&&(this._localStreams?-1===this._localStreams.indexOf(t)&&this._localStreams.push(t):this._localStreams=[t]),n.call(this,e,t)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var r=this,n=e.getTracks();this.getSenders().forEach(function(e){-1!==n.indexOf(e.track)&&r.removeTrack(e)})}})}},shimRemoteStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(r._remoteStreams||(r._remoteStreams=[]),!(0<=r._remoteStreams.indexOf(e))){r._remoteStreams.push(e);var t=new Event("addstream");t.stream=e,r.dispatchEvent(t)}})}),t.apply(r,arguments)}}},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,i=t.createOffer,o=t.createAnswer,a=t.setLocalDescription,u=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var r=2<=arguments.length?arguments[2]:e,n=i.apply(this,[r]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){var r=2<=arguments.length?arguments[2]:e,n=o.apply(this,[r]);return t?(n.then(e,t),Promise.resolve()):n};var r=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=r,r=function(e,t,r){var n=u.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=r,r=function(e,t,r){var n=s.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=r}},shimGetUserMedia:function(e){var n=e&&e.navigator;n.getUserMedia||(n.webkitGetUserMedia?n.getUserMedia=n.webkitGetUserMedia.bind(n):n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=function(e,t,r){n.mediaDevices.getUserMedia(e).then(t,r)}.bind(n)))},shimRTCIceServerUrls:function(e){var o=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var r=[],n=0;n<e.iceServers.length;n++){var i=e.iceServers[n];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(vj.deprecated("RTCIceServer.url","RTCIceServer.urls"),(i=JSON.parse(JSON.stringify(i))).urls=i.url,delete i.url,r.push(i)):r.push(e.iceServers[n])}e.iceServers=r}return new o(e,t)},e.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var t=this.getTransceivers().find(function(e){return e.sender.track&&"audio"===e.sender.track.kind});!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find(function(e){return e.sender.track&&"video"===e.sender.track.kind});!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection("sendonly"):"recvonly"===r.direction&&r.setDirection("inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return n.apply(this,arguments)}}},xj={shimRTCIceCandidate:function(t){if(t.RTCIceCandidate&&!(t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)){var i=t.RTCIceCandidate;t.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var t=new i(e),r=_j.parseCandidate(e.candidate),n=Object.assign(t,r);return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new i(e)},t.RTCIceCandidate.prototype=i.prototype,vj.wrapPeerConnectionEvent(t,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e})}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var r=t.createObjectURL.bind(t),n=t.revokeObjectURL.bind(t),i=new Map,o=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++o;return i.set(t,e),vj.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return r(e)},t.revokeObjectURL=function(e){n(e),i.delete(e)};var a=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return a.get.apply(this)},set:function(e){return this.srcObject=i.get(e)||null,a.set.apply(this,[e])}});var u=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=i.get(arguments[1])||null),u.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var c=vj.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,t,r,n;if(this._sctp=null,r=arguments[0],(n=_j.splitSections(r.sdp)).shift(),n.some(function(e){var t=_j.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})){var i,o=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!=r?-1:r}(arguments[0]),a=(e=o,t=65536,"firefox"===c.browser&&(t=c.version<57?-1===e?16384:2147483637:c.version<60?57===c.version?65535:65536:2147483637),t),u=function(e,t){var r=65536;"firefox"===c.browser&&57===c.version&&(r=65535);var n=_j.matchPrefix(e.sdp,"a=max-message-size:");return 0<n.length?r=parseInt(n[0].substr(19),10):"firefox"===c.browser&&-1!==t&&(r=2147483637),r}(arguments[0],o);i=0===a&&0===u?Number.POSITIVE_INFINITY:0===a||0===u?Math.max(a,u):Math.min(a,u);var s={};Object.defineProperty(s,"maxMessageSize",{get:function(){return i}}),this._sctp=s}return l.apply(this,arguments)}}},shimSendThrowTypeError:function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return r(e,this),e},vj.wrapPeerConnectionEvent(e,"datachannel",function(e){return r(e.channel,e.target),e})}function r(r,n){var i=r.send;r.send=function(){var e=arguments[0],t=e.length||e.size||e.byteLength;if("open"===r.readyState&&n.sctp&&t>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return i.apply(r,arguments)}}}},Rj=(function(e,t){var r=e&&e.window,n={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var i in t)hasOwnProperty.call(t,i)&&(n[i]=t[i]);var o=vj.log,a=vj.detectBrowser(r),u=bj,s=Oj,c=Mj,l=jj,f=xj,d={browserDetails:a,commonShim:f,extractVersion:vj.extractVersion,disableLog:vj.disableLog,disableWarnings:vj.disableWarnings};switch(a.browser){case"chrome":if(!u||!u.shimPeerConnection||!n.shimChrome)return o("Chrome shim is not included in this adapter release.");o("adapter.js shimming chrome."),d.browserShim=u,f.shimCreateObjectURL(r),u.shimGetUserMedia(r),u.shimMediaStream(r),u.shimSourceObject(r),u.shimPeerConnection(r),u.shimOnTrack(r),u.shimAddTrackRemoveTrack(r),u.shimGetSendersWithDtmf(r),u.shimSenderReceiverGetStats(r),u.fixNegotiationNeeded(r),f.shimRTCIceCandidate(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;case"firefox":if(!c||!c.shimPeerConnection||!n.shimFirefox)return o("Firefox shim is not included in this adapter release.");o("adapter.js shimming firefox."),d.browserShim=c,f.shimCreateObjectURL(r),c.shimGetUserMedia(r),c.shimSourceObject(r),c.shimPeerConnection(r),c.shimOnTrack(r),c.shimRemoveStream(r),c.shimSenderGetStats(r),c.shimReceiverGetStats(r),c.shimRTCDataChannel(r),f.shimRTCIceCandidate(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;case"edge":if(!s||!s.shimPeerConnection||!n.shimEdge)return o("MS edge shim is not included in this adapter release.");o("adapter.js shimming edge."),d.browserShim=s,f.shimCreateObjectURL(r),s.shimGetUserMedia(r),s.shimPeerConnection(r),s.shimReplaceTrack(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;case"safari":if(!l||!n.shimSafari)return o("Safari shim is not included in this adapter release.");o("adapter.js shimming safari."),d.browserShim=l,f.shimCreateObjectURL(r),l.shimRTCIceServerUrls(r),l.shimCreateOfferLegacy(r),l.shimCallbacksAPI(r),l.shimLocalStreamsAPI(r),l.shimRemoteStreamsAPI(r),l.shimTrackEventTransceiver(r),l.shimGetUserMedia(r),f.shimRTCIceCandidate(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;default:o("Unsupported browser!")}}({window:K.window}),t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ensureH264=void 0;var a=n(fj),i=n(tC),r=n(gT);function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r="screen"===e?{content:"slides",type:"video"}:{type:e},n=(0,i.default)(sj(t).media,r);return n?n.direction:"inactive"}function u(e){switch(e){case"inactive":case"sendrecv":return e;case"sendonly":return"recvonly";case"recvonly":return"sendonly";default:throw new Error('direction "'+e+'" is not valid')}}t.getMediaDirectionFromSDP=o,t.getMediaFromSDP=function(e,t,r){var n="screen"===e?{content:"slides",type:"video"}:{type:e},i=(0,a.default)(sj(t).media,n),o={};r&&("sendrecv"===r?(i.forEach(function(e){o[e.direction]=e}),!o.sendrecv||o.recvonly||o.sendonly?!o.sendrecv&&o.recvonly&&o.sendonly&&(i=[o.recvonly,o.sendonly]):i=o.sendrecv):i=i.filter(function(e){return e.direction===r}));return i},t.reverseMediaDirection=u,t.limitBandwith=function(e,t){var r=e.audioBandwidthLimit,n=e.videoBandwidthLimit;return t.split("\r\n").reduce(function(e,t){return e.push(t),t.startsWith("m=")&&e.push("b=TIAS:"+(t.includes("audio")?r:n)),e},[]).join("\r\n")},t.kindToPropertyFragment=function(e){return"audio"===e?"Audio":"Video"},t.getMediaDirectionFromSDPForAnswer=function(e,t){return u(o(e,t))},t.boolToDirection=s,t.getMediaDirectionFromTracks=function(t,e){if("closed"===e.signalingState)return"inactive";var r=e.getSenders().filter(function(e){return e.track&&e.track.kind===t}),n=0<r.length&&r.reduce(function(e,t){return e||t.track.enabled},!1),i=e.getReceivers().filter(function(e){return e.track&&e.track.kind===t}),o=0<i.length&&i.reduce(function(e,t){return e||t.track.enabled},!1);return s(n,o)},t.removeExtmap=function(e){return e.replace(/a=extmap.*\r\n/g,"")};t.ensureH264=(0,r.default)(function(e,t){if(e){if(!t.includes("m=video"))throw new Error("No video section found in offer");if(!/[hH]264/.test(t))throw new Error("Offer does not include h264 codec")}return t});function s(e,t){return e&&t?"sendrecv":e?"sendonly":t?"recvonly":"inactive"}}));e(Rj);Rj.ensureH264,Rj.getMediaDirectionFromSDP,Rj.getMediaFromSDP,Rj.reverseMediaDirection,Rj.limitBandwith,Rj.kindToPropertyFragment,Rj.getMediaDirectionFromSDPForAnswer,Rj.boolToDirection,Rj.getMediaDirectionFromTracks,Rj.removeExtmap;var Aj=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i,o,a,u,s,c,l,f,d,p,h,v,g,m,y=A(Tf),b=A(ny),_=A(rc),w=A(IT),S=A(oc),k=A(_f),E=A(ey),T=A(iy),P=A(Tb),O=A(Ty),C=A(X_),M=A(ij),j=A($E),x=A(oj),R=A(cj);function A(e){return e&&e.__esModule?e:{default:e}}function I(e,t,r,n){r&&(0,b.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function D(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}x.default.a.find(function(e){return"content"===e.name})||x.default.a.unshift({name:"content",reg:/^content:(slides)/});var L=new((0,Dk.make)(O.default,P.default)),F={audio:"Audio",video:"Video"};function N(e,t){return L.get(e,t)||"inactive"}var U=(r=(0,Dk.whileInFlight)("gumming"),n=(0,nj.debounce)(500),i=function(){function i(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(0,E.default)(this,i),this.logger=console,I(this,"localMediaStream",o,this),I(this,"remoteMediaStream",a,this),I(this,"localScreenShare",u,this),this.pc=new RTCPeerConnection({iceServers:[],bundlePolicy:"max-compat"}),I(this,"offerSdp",s,this),I(this,"answerSdp",c,this),I(this,"sendingAudio",l,this),I(this,"sendingVideo",f,this),I(this,"receivingAudio",d,this),I(this,"receivingVideo",p,this),I(this,"ended",h,this),this.negotiationNeeded=!1,this.bandwidthLimit={audioBandwidthLimit:6e4,videoBandwidthLimit:1e6},I(this,"constraints",v,this),I(this,"offerOptions",g,this),I(this,"gumming",m,this),t.parent?ss(function(){t.parent.logger&&(n.logger=t.parent.logger)}):e.logger&&(this.logger=e.logger),this.pc.onnegotiationneeded=function(){n.logger.info("peer connection emitted negotiationneeded"),n.answerSdp&&!n.negotiationNeeded&&(n.negotiationNeeded=!0,n.triggerNegotiationNeeded())},this.pc.ontrack=function(e){n.logger.info("peerConnection ontrack fired, updating remoteMediaStream"),n.trigger("track");var r=n.remoteMediaStream||new MediaStream;e.streams[0].getTracks().forEach(function(t){n.logger.info("adding "+t.kind+" track to remoteMediaStream"),r&&!r.getTracks().includes(t)&&r.addTrack(t),t.onended=function(){n.logger.info("remote "+t.kind+" has ended, removing track from remoteMediaStream"),r.removeTrack(t),t.onended=void 0;try{n["receiving"+F[t.kind]]=(0,Rj.getMediaDirectionFromTracks)(t.kind,n.pc).includes("recv")}catch(e){n["receiving"+F[t.kind]]=!1}},n["receiving"+F[t.kind]]=(0,Rj.getMediaDirectionFromTracks)(t.kind,n.pc).includes("recv")}),n.remoteMediaStream=r,n.trigger("internalTrackUpdate")}}return(0,T.default)(i,[{key:"audioDirection",get:function(){return(0,Rj.getMediaDirectionFromTracks)("audio",this.pc)}},{key:"videoDirection",get:function(){return(0,Rj.getMediaDirectionFromTracks)("video",this.pc)}},{key:"screenDirection",get:function(){return this.localScreenShare&&0!==this.localScreenShare.getTracks().length?"sendonly":"inactive"}},{key:"senderTracks",get:function(){return this.pc.getSenders().reduce(function(e,t){return t.track&&e.push(t.track),e},[])}},{key:"receiverTracks",get:function(){return this.pc.getReceivers().reduce(function(e,t){return t.track&&e.push(t.track),e},[])}}],[{key:"getUserMedia",value:function(e){var t=(0,C.default)({},e,{fake:"test"===ws.env.NODE_ENV});return navigator.mediaDevices.getUserMedia(t)}}]),(0,T.default)(i,[{key:"_prepareIceGatherer",value:function(){var r=this,n=!1;if("new"===this.pc.iceGatheringState)this.logger.info('ice gathering is in state "new", definitely need to block for ice gathering'),n=!0;else{var i=sj(this.pc.localDescription.sdp);["audio","video","screen"].forEach(function(t){var e=t+"Direction";("inactive"!==r[e]||N(r,t)!==r[e]&&"inactive"!==N(r,t))&&(i.media.find(function(e){return e.type===t})?r.logger.info(t+" candidates already gathered"):(r.logger.info("transitioning "+t+" from inactive, ice needed"),n=!0))})}var e=void 0;return n&&(e=new k.default(function(t){r.logger.info("configuring ice gathering"),r.pc.onicecandidate=function(e){if(!e.candidate)return r.logger.info("ice gathering complete"),r.pc.onicecandidate=void 0,void t();r.logger.info("got ice candidate")}})),e}},{key:"createOffer",value:function(){var o=this;this.logger.info("beginning negotiation");var e=N(this,"video"),t=e.includes("send")||e.includes("recv"),r=this._prepareIceGatherer();return new k.default(function(e){if(o.gumming)return o.logger.info("gum in flight, waiting until it completes"),void e(o._getUserMedia().then((0,Dk.tap)(function(){return o.logger.info("gum completed")})));e()}).then((0,Dk.tap)(function(){return o.logger.info("starting create offer",o.offerOptions)})).then(function(){return o.offerOptions.offerToReceiveAudio=!!o.offerOptions.offerToReceiveAudio,o.offerOptions.offerToReceiveVideo=!!o.offerOptions.offerToReceiveVideo,o.logger.info("creating REAL offer",o.offerOptions),o.logger.info("createOffer audioDirection: "+o.audioDirection),o.logger.info("createOffer videoDirection: "+o.videoDirection),o.logger.info("createOffer screenDirection: "+o.screenDirection),o.updateLocalMediaToTargetDirection(),o.pc.createOffer(o.offerOptions)}).then((0,Dk.tap)(function(e){e.sdp=(0,Rj.limitBandwith)(o.bandwidthLimit,e.sdp),e.sdp=(0,Rj.removeExtmap)(e.sdp)})).then((0,Dk.tap)(function(){return o.logger.info("setting local description")})).then(function(e){return o.pc.setLocalDescription(e)}).then((0,Dk.tap)(function(){return r&&o.logger.info("blocking for ice gathering")})).then(function(){return r}).then((0,Dk.tap)(function(){return o.logger.info("limiting bandwith")})).then(function(){return(0,Rj.limitBandwith)(o.bandwidthLimit,o.pc.localDescription.sdp)}).then((0,Dk.tap)(function(){return t&&o.logger.info("confirm h264 in offer")})).then((0,Rj.ensureH264)(t)).then(function(e){if(o.localScreenShare){var t=o.localScreenShare.id,r=o.localScreenShare.getVideoTracks()[0];if(r){var n=t+" "+r.id,i=e.split(n);if(i[1])return i[1]="\r\na=content:slides"+i[1],e=i.join(n)}e+="a=content:slides\r\n"}return e}).then((0,Dk.tap)(function(e){o.offerSdp=e}))}},{key:"acceptAnswer",value:function(e){var t=this;this.logger.info("accepting answer"),this.logger.debug("new answer sdp:",e);var r=e.replace(/max-mbps=27600;max-fs=920/g,"max-mbps=27600;max-fs=8160");return r=r.replace(/m=video 0(.*?\r\n)/,"m=video 0$1a=inactive\r\n"),r=(0,Rj.removeExtmap)(r),this.logger.debug("cleaned answer sdp:",r),"have-local-offer"===this.pc.signalingState?this.pc.setRemoteDescription(new RTCSessionDescription({sdp:r,type:"answer"})).then(function(){t.logger.info("answer accepted"),t.answerSdp=r,t.sendingAudio=(0,Rj.getMediaDirectionFromTracks)("audio",t.pc).includes("send"),t.sendingVideo=(0,Rj.getMediaDirectionFromTracks)("video",t.pc).includes("send"),t.updateLocalMediaToTargetDirection(),t.trigger("answeraccepted"),t.negotiationNeeded=!1}):k.default.resolve()}},{key:"_setNewMediaDirection",value:function(r,e){var n=this;this.logger.info("setting "+r+" direction to "+e);var i=e.includes("send");if(!(this.constraints[r]=i))return this.logger.info("muting "+r+" local tracks"),this.localMediaStream?this.localMediaStream.getTracks().filter(function(e){return e.kind===r}).forEach(function(t){n.logger.info("muting existing "+r+" track from localMediaStream");var e=n.pc.getSenders().find(function(e){return e.track===t});R.default.firefox||n.localMediaStream.removeTrack(t),e&&(n.logger.info("muting existing "+r+" track on sender"),e.track.enabled=!1,t.enabled=!1,R.default.firefox||n.pc.removeTrack(e)),n.logger.info("setting sending"+F[r]+" to "+i),n["sending"+F[r]]=i}):k.default.resolve();var t=this.pc.getSenders().filter(function(e){return e.track&&e.track.kind===r});if(0<t.length){this.logger.info("enabling existing "+r+" sender track");var o=this.localMediaStream.getTracks().filter(function(e){return e.kind===r});return t.forEach(function(e){e.track.enabled=o.includes(e.track)}),this["sending"+F[r]]=i,k.default.resolve()}return this[r+"Direction"].includes("send")?k.default.resolve():this._setNewMediaConstraint(r,i)}},{key:"_setNewMediaTrack",value:function(e,t){return this.logger.info("setting new "+e+" track"),this.constraints[e]=!1,this.addOrReplaceTrack(t)}},{key:"_setNewMediaConstraint",value:function(e,t){return this.logger.info("setting "+e+" with new constraint"),this.constraints[e]=t,this._getUserMedia()}},{key:"_setScreenShare",value:function(e,t){var r=this;if(this.logger.info("calling _setScreenShare"),L.set(this,"screen",e),e.includes("send")){var n=(0,C.default)({},t,{mediaSource:"application",width:{min:"160",max:"1920"},height:{min:"90",max:"1080"},frameRate:{min:"1",max:"30"}});this._setNewMediaConstraint("screen",n)}else this.logger.info("removing existing screenshare tracks from peer connection and localScreenShare stream"),this.pc.getSenders().filter(function(e){return e.track&&r.localScreenShare.getTracks().includes(e.track)}).forEach(function(e){r.logger.info("removing screenshare track "+e.track.id+" from peer connection and localScreenShare stream");var t=e.track;e.track.enabled=!1,r.localScreenShare.removeTrack(t),r.pc.removeTrack(e),t.stop(),r.logger.info("removed screenshare track "+t.id+" from peer connection and localScreenShare stream")}),this.localScreenShare=!1}},{key:"setMedia",value:function(r,n,t){var i=this;return this.logger.info("setMedia"),"screen"===r?(this.logger.info("setMedia: setting new screen direction"),this._setScreenShare(n,t),k.default.resolve()):new k.default(function(e){if(t){if(!n.includes("send"))throw new Error("Cannot set new "+r+" track or constraint if direction does not include send");if(t instanceof MediaStreamTrack){if(t.kind!==r)throw new Error("track is not a valid "+r+" media stream track");e(i._setNewMediaTrack(r,t))}else e(i._setNewMediaConstraint(r,t))}else n===N(i,r)&&(i.logger.info("setMedia: "+r+" already transitioning to "+n+", not making changes"),e()),n===i[r+"Direction"]&&(i.logger.info("setMedia: "+r+" already set to "+n+", not making changes"),e()),e(i._setNewMediaDirection(r,n))}).then(function(){var e=n.includes("recv");i.logger.info("setMedia: set targetMediaDirection for "+r+" to "+n),L.set(i,r,n),i.logger.info("setMedia: set offerToReceive"+(0,Rj.kindToPropertyFragment)(r)+" to "+e),i.offerOptions["offerToReceive"+(0,Rj.kindToPropertyFragment)(r)]=e;var t=i.pc.getReceivers().filter(function(e){return e.track&&e.track.kind===r});e?0<t.length?(i.logger.info("setMedia: unpause existing receiving "+r+" track"),i.unpauseReceivingMedia(r)):!t.length&&i.answerSdp&&(i.logger.info("setMedia: no receiving "+r+" track exists, trigger negotiation"),i.triggerNegotiationNeeded()):0<t.length&&(i.logger.info("setMedia: pausing existing receiving "+r+" track"),i.pauseReceivingMedia(r))})}},{key:"_getUserMedia",value:function(){var a=this;return this.logger.info("enqueing request to get user media"),new k.default(function(e){return ss(e)}).then(function(){!0===a.constraints.audio&&a.pc.getSenders().find(function(e){return e.track&&"audio"===e.track.kind})&&(a.logger.info("already have a local audio track, removing constraint for a second one"),(0,S.default)(a.constraints,"audio")),!0===a.constraints.video&&a.pc.getSenders().find(function(e){return e.track&&"video"===e.track.kind})&&(a.logger.info("already have a local video track, removing constraint for a second one"),(0,S.default)(a.constraints,"video"));var e=a.constraints,t=e.audio,r=e.video,n=e.screen;return a.logger.info("getting user media with "+(t?"1":"0")+" audio track, "+(r?"1":"0")+" video track, and "+(n?"1":"0")+" screenshare track."),k.default.all([(t||r)&&i.getUserMedia({audio:t,video:r}),n&&i.getUserMedia({video:n})])}).then(function(e){var t=(0,w.default)(e,2),r=t[0],n=t[1],i=[];if(r&&(a.logger.info("got local media stream with "+r.getAudioTracks().length+" audio tracks and "+r.getVideoTracks().length+" video tracks"),r.getTracks().forEach(function(e){return i.push(a.addOrReplaceTrack(e))})),n){if(a.localScreenShare){var o=a.pc.getSenders().find(function(e){return a.localScreenShare.getTracks().includes(e.track)});o&&(a.logger.info("removing existing screenshare track from localScreenShare stream"),a.localScreenShare.removeTrack(o.track),a.logger.info("disabling existing screenshare track on sender"),o.track.enabled=!1),n.getTracks().forEach(function(e){o?(a.logger.info("replacing existing screenshare track on sender"),i.push(o.replaceTrack(e))):(a.logger.info("adding new screen track to peerConnection"),a.pc.addTrack(e,n))})}else a.logger.info("adding localScreenShare for the first time"),a.logger.info("adding new screenshare track to peer connection"),n.getVideoTracks().forEach(function(e){return a.pc.addTrack(e,n)});a.localScreenShare=n}return a.constraints={},k.default.all(i)}).catch(function(e){return a.trigger("error",e),k.default.reject(e)})}},{key:"addOrReplaceTrack",value:function(t){var r=this,e=[];this.localMediaStream||(this.localMediaStream=new MediaStream);var n=this.pc.getSenders().find(function(e){return e.track&&e.track.kind===t.kind}),i=this.localMediaStream.getTracks().find(function(e){return e.kind===t.kind});return i!==t&&(i&&(this.logger.info("removing previous "+i.kind+" track from localMediaStream"),this.localMediaStream.removeTrack(i)),this.logger.info("adding new "+t.kind+" track to localMediaStream"),this.localMediaStream.addTrack(t)),n?n.track===t?(this.logger.info("new track is the same as existing track, renabling "+t.kind+" track on sender"),n.track.enabled=!0):(this.logger.info("replacing new "+t.kind+" on existing sender"),e.push(n.replaceTrack(t).then(function(){r.logger.info("successfully replace "+t.kind+" on existing sender")}).catch(function(e){r.logger.warn(e),r.logger.warn("was not able to replace "+t.kind+" track on sender"),r.logger.info("adding as new "+t.kind+" track to peerConnection"),r.pc.removeTrack(n),r.pc.addTrack(t,r.localMediaStream)}))):(this.logger.info("adding new "+t.kind+" track to peerConnection"),this.pc.addTrack(t,this.localMediaStream)),this.logger.info("setting sending"+F[t.kind]+" to true"),this["sending"+F[t.kind]]=!0,k.default.all(e)}},{key:"pauseSendingMedia",value:function(t){var r=this;if(!t)throw new Error("kind is required");var e=this.pc.getSenders().filter(function(e){return e.track&&e.track.kind===t});if(0===e.length)throw new Error("No "+t+" media senders to pause");e.forEach(function(e){r.logger.info("pausing "+t+" sender"),e.track.enabled=!1}),this.logger.info("setting sending"+F[t]+" to false"),this["sending"+F[t]]=!1}},{key:"updateLocalMediaToTargetDirection",value:function(){var o=this;["audio","video"].forEach(function(t){var e=N(o,t),r=o[t+"Direction"];if(r!==e){var n=e.includes("send");r.includes("send")!==n&&o.pc.getSenders().forEach(function(e){e.track&&e.track.kind===t&&(e.track.enabled=n)});var i=e.includes("recv");r.includes("send")!==i&&o.pc.getReceivers().forEach(function(e){e.track&&e.track.kind===t&&(e.track.enabled=i)})}})}},{key:"unpauseSendingMedia",value:function(t){var r=this;if(!t)throw new Error("kind is required");var e=this.pc.getSenders().filter(function(e){return e.track&&e.track.kind===t});if(0===e.length)throw new Error("No "+t+" media senders to unpause");e.forEach(function(e){r.logger.info("unpausing "+t+" sender"),e.track.enabled=!0}),this.logger.info("setting sending"+F[t]+" to true"),this["sending"+F[t]]=!0}},{key:"pauseReceivingMedia",value:function(t){var r=this;if(!t)throw new Error("kind is required");var e=this.pc.getReceivers().filter(function(e){return e.track&&e.track.kind===t});if(0===e.length)throw new Error("No "+t+" receiver media tracks to pause");e.forEach(function(e){r.logger.info("pausing remote "+t+" track"),e.track.enabled=!1}),this.logger.info("setting receiving"+F[t]+" to false"),this["receiving"+F[t]]=!1}},{key:"unpauseReceivingMedia",value:function(t){var r=this;if(!t)throw new Error("kind is required");var e=this.pc.getReceivers().filter(function(e){return e.track&&e.track.kind===t});if(0===e.length)throw new Error("No "+t+" receiver media tracks to pause");e.forEach(function(e){r.logger.info("unpausing "+t+" receiver track"),e.track.enabled=!0}),this.logger.info("setting receiving"+F[t]+" to true from "+this["receiving"+F[t]]),this["receiving"+F[t]]=!0}},{key:"stop",value:function(){"closed"!==this.pc.signalingState&&(this.pc.getSenders().forEach(function(e){return e.track&&e.track.stop()}),this.pc.close()),this.pc.onnegotiationneeded=void 0,this.pc.ontrack=void 0,this.pc.onicecandidate=void 0,this.ended=!0,this.off()}},{key:"triggerNegotiationNeeded",value:function(){this.trigger("negotiationneeded")}},{key:"serialize",value:function(){return"WebRTCMediaEngine"}}]),i}(),o=D(i.prototype,"localMediaStream",[M.default],{enumerable:!0,initializer:null}),a=D(i.prototype,"remoteMediaStream",[M.default],{enumerable:!0,initializer:null}),u=D(i.prototype,"localScreenShare",[M.default],{enumerable:!0,initializer:null}),s=D(i.prototype,"offerSdp",[M.default],{enumerable:!0,initializer:function(){return""}}),c=D(i.prototype,"answerSdp",[M.default],{enumerable:!0,initializer:function(){return""}}),l=D(i.prototype,"sendingAudio",[M.default],{enumerable:!0,initializer:function(){return!1}}),f=D(i.prototype,"sendingVideo",[M.default],{enumerable:!0,initializer:function(){return!1}}),d=D(i.prototype,"receivingAudio",[M.default],{enumerable:!0,initializer:function(){return!1}}),p=D(i.prototype,"receivingVideo",[M.default],{enumerable:!0,initializer:function(){return!1}}),h=D(i.prototype,"ended",[M.default],{enumerable:!0,initializer:function(){return!1}}),v=D(i.prototype,"constraints",[xk.nonenumerable],{enumerable:!0,initializer:function(){return{}}}),g=D(i.prototype,"offerOptions",[xk.nonenumerable],{enumerable:!0,initializer:function(){return{}}}),m=D(i.prototype,"gumming",[xk.nonenumerable,M.default],{enumerable:!0,initializer:function(){return!1}}),D(i.prototype,"_getUserMedia",[r,Dk.oneFlight],(0,_.default)(i.prototype,"_getUserMedia"),i.prototype),D(i.prototype,"triggerNegotiationNeeded",[n],(0,_.default)(i.prototype,"triggerNegotiationNeeded"),i.prototype),i);t.default=U,(0,y.default)(U.prototype,j.default)});e(Aj);var Ij=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.webrtcHelpers=t.WebRTCMediaEngine=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(Aj).default}}),Object.defineProperty(t,"WebRTCMediaEngine",{enumerable:!0,get:function(){return n(Aj).default}});var r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(Rj);function n(e){return e&&e.__esModule?e:{default:e}}t.webrtcHelpers=r});e(Ij);Ij.webrtcHelpers,Ij.WebRTCMediaEngine;var Dj=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=t.locusEventKeys=["locus.summary","locus.self_changed","locus.participant_joined","locus.participant_left","locus.participant_declined","locus.participant_alerted","locus.participant_updated","locus.participant_roles_updated","locus.participant_audio_muted","locus.participant_audio_unmuted","locus.participant_video_muted","locus.participant_video_unmuted","locus.floor_granted","locus.floor_released","locus.space_users_modified","locus.controls_updated","locus.participant_controls_updated"];t.default=r});e(Dj);Dj.locusEventKeys;var Lj=function(e){return e&&e.length?e[0]:void 0},Fj=Ob(function(e,t){return LE(e)?kC(e,mv(t,1,LE,!0)):[]}),Nj=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DESYNC=t.LESS_THAN=t.GREATER_THAN=t.FETCH=t.EQUAL=t.USE_CURRENT=t.USE_INCOMING=void 0;var a=i(eP),u=i(Tb),s=i(cT),c=i(Fk),n=i(_f),l=i(Rf),D=i(AT),L=i(Hh),F=i(rv),N=i(Lj),U=i(Fj),f=i(Rv),r=i(MO);function i(e){return e&&e.__esModule?e:{default:e}}var o=t.USE_INCOMING="USE_INCOMING",d=t.USE_CURRENT="USE_CURRENT",z=t.EQUAL="EQUAL",p=t.FETCH="FETCH",q=t.GREATER_THAN="GREATER_THAN",B=t.LESS_THAN="LESS_THAN",W=t.DESYNC="DESYNC";function h(e){switch(e){case z:case q:return d;case B:return o;case W:return p;default:throw new Error(e+" is not a recognized sequence comparison result")}}var v=FO.SparkPlugin.extend({namespace:"Locus",alert:function(e){return this.request({method:"PUT",uri:e.url+"/participant/alert",body:{deviceUrl:this.spark.internal.device.url,sequence:e.sequence}}).then(function(e){return e.body})},compare:function(e,t){function r(e){var t=e.sequence;return!(t.entries&&t.entries.length||0!==t.rangeStart||0!==t.rangeEnd)}return r(e)||r(t)?o:t.baseSequence?this.compareDelta(e,t):h(this.compareSequence(e.sequence,t.sequence))},compareDelta:function(e,t){var r=this.compareSequence(e.sequence,t.sequence);if(r!==B)return h(r);switch(r=this.compareSequence(e.sequence,t.baseSequence)){case q:case z:return o;default:return p}},compareSequence:function(e,t){if(!e)throw new Error("`current` is required");if(!t)throw new Error("`incoming` is required");var r=(0,L.default)(function(e){return 0===e.entries.length?0:(0,N.default)(e.entries)}),n=(0,L.default)(function(e){return 0===e.entries.length?0:(0,F.default)(e.entries)}),i=(0,L.default)(function(e){return e.rangeStart||r(e)}),o=(0,L.default)(function(e){return n(e)||e.rangeEnd});function a(e,t){return e>=t.rangeStart&&e<=t.rangeEnd}if(i(e)>o(t))return q;if(o(e)<i(t))return B;var u=(0,U.default)(e.entries,t.entries),s=(0,U.default)(t.entries,e.entries),c=[],l=[],f=!0,d=!1,p=void 0;try{for(var h,v=(0,D.default)(u);!(f=(h=v.next()).done);f=!0){var g=h.value;a(g,t)||c.push(g)}}catch(e){d=!0,p=e}finally{try{!f&&v.return&&v.return()}finally{if(d)throw p}}var m=!0,y=!1,b=void 0;try{for(var _,w=(0,D.default)(s);!(m=(_=w.next()).done);m=!0){var S=_.value;a(S,e)||l.push(S)}}catch(e){y=!0,b=e}finally{try{!m&&w.return&&w.return()}finally{if(y)throw b}}if(!c.length&&!l.length)return e.rangeEnd-i(e)>t.rangeEnd-i(t)?q:e.rangeEnd-i(e)<t.rangeEnd-i(t)?B:z;if(c.length&&!l.length)return q;if(!c.length&&l.length)return B;if(!(e.rangeStart||e.rangeEnd||t.rangeStart||t.rangeEnd))return W;var k=!0,E=!1,T=void 0;try{for(var P,O=(0,D.default)(c);!(k=(P=O.next()).done);k=!0){var C=P.value;if(i(t)<C&&C<o(t))return W}}catch(e){E=!0,T=e}finally{try{!k&&O.return&&O.return()}finally{if(E)throw T}}var M=!0,j=!1,x=void 0;try{for(var R,A=(0,D.default)(l);!(M=(R=A.next()).done);M=!0){var I=R.value;if(i(e)<I&&I<o(e))return W}}catch(e){j=!0,x=e}finally{try{!M&&A.return&&A.return()}finally{if(j)throw x}}return c[0]>l[0]?q:B},create:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.correlationId;if(!r)throw new Error("options.correlationId is required");return this.request({method:"POST",service:"locus",resource:"loci/call",body:{correlationId:r,deviceUrl:this.spark.internal.device.url,invitee:{invitee:e},localMedias:[{localSdp:(0,l.default)({type:"SDP",sdp:t.localSdp})}],sequence:{entries:[],rangeStart:0,rangeEnd:0}}}).then(function(e){return e.body.locus})},createOrJoin:function(e,t){return e.url?this.join(e,t):this.create(e,t)},decline:function(t){var r=this;return this.request({method:"PUT",uri:t.url+"/participant/decline",body:{deviceUrl:this.spark.internal.device.url,sequence:t.sequence}}).then(function(e){return e.body}).catch(function(e){return e instanceof FO.SparkHttpError.Conflict?r.get(t):n.default.reject(e)})},get:function(e){return this.request({method:"GET",uri:""+e.url}).then(function(e){return e.body})},getCallHistory:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=new Date(e.from||Date.now()).toISOString();return this.request({method:"GET",service:"janus",resource:"history/userSessions",qs:{from:t}}).then(function(e){return e.body})},join:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=e.correlationId||t.correlationId;if(!r)throw new Error("locus.correlationId or options.correlationId is required");return this.request({method:"POST",uri:e.url+"/participant",body:{correlationId:r,deviceUrl:this.spark.internal.device.url,localMedias:[{localSdp:(0,l.default)({type:"SDP",sdp:t.localSdp})}],sequence:e.sequence||{entries:[],rangeStart:0,rangeEnd:0}}}).then(function(e){return e.body.locus})},leave:function(t){var r=this;return this.request({method:"PUT",uri:t.self.url+"/leave",body:{deviceUrl:this.spark.internal.device.url,sequence:t.sequence}}).then(function(e){return e.body.locus}).catch(function(e){return e instanceof FO.SparkHttpError.Conflict?r.get(t):n.default.reject(e)})},list:function(){return this.request({method:"GET",service:"locus",resource:"loci"}).then(function(e){return e.body.loci})},merge:function(e,t){if(!t.baseSequence)return t;var r=(0,f.default)(e);if((0,c.default)(t).forEach(function(e){"baseSequence"!==e&&"participants"!==e&&(r[e]=t[e]||r[e])}),t.participants||t.participants.length){var n=new s.default,i=new u.default;t.participants.forEach(function(e){e.removed?n.add(e.url):i.set(e.url,e)});var o=r.participants.reduce(function(e,t){return n.has(t.url)||(e[t.url]=t),e},{});i.forEach(function(e,t){o[t]=e}),r.participants=(0,a.default)(o)}return r},releaseFloorGrant:function(e,t){return this.spark.request({uri:t.url,method:"PUT",body:{floor:{disposition:"RELEASED"}}}).then(function(e){return e.body})},requestFloorGrant:function(e,t){return this.spark.request({uri:t.url,method:"PUT",body:{floor:{beneficiary:{url:e.self.url,devices:[{url:this.spark.internal.device.url}]},disposition:"GRANTED"}}}).then(function(e){return e.body})},sendDtmf:function(e,t){return this.request({method:"POST",uri:e.self.url+"/sendDtmf",body:{deviceUrl:this.spark.internal.device.url,dtmf:{correlationId:r.default.v4(),tones:t}}})},sync:function(e){return this.request({method:"GET",uri:e.syncUrl}).then(function(e){return e.body||{}})},updateMedia:function(e,t){var r=t.sdp,n=t.audioMuted,i=t.videoMuted,o=t.mediaId,a={audioMuted:n,videoMuted:i};return r&&(a.type="SDP",a.sdp=r),this.request({method:"PUT",uri:e.self.url+"/media",body:{deviceUrl:this.spark.internal.device.url,localMedias:[{localSdp:(0,l.default)(a),mediaId:o}],sequence:e.sequence}}).then(function(e){return e.body.locus})},version:"1.43.2"});t.default=v});e(Nj);Nj.DESYNC,Nj.LESS_THAN,Nj.GREATER_THAN,Nj.FETCH,Nj.EQUAL,Nj.USE_CURRENT,Nj.USE_INCOMING;var Uj=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var zj=function(e){return Uj.test(e)};var qj=function(e){return e.split("")},Bj="\\ud800-\\udfff",Wj="["+Bj+"]",Gj="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Vj="\\ud83c[\\udffb-\\udfff]",Hj="[^"+Bj+"]",Jj="(?:\\ud83c[\\udde6-\\uddff]){2}",Yj="[\\ud800-\\udbff][\\udc00-\\udfff]",$j="(?:"+Gj+"|"+Vj+")"+"?",Kj="[\\ufe0e\\ufe0f]?",Xj=Kj+$j+("(?:\\u200d(?:"+[Hj,Jj,Yj].join("|")+")"+Kj+$j+")*"),Zj="(?:"+[Hj+Gj+"?",Gj,Jj,Yj,Wj].join("|")+")",Qj=RegExp(Vj+"(?="+Vj+")|"+Zj+Xj,"g");var ex=function(e){return e.match(Qj)||[]};var tx=function(e){return zj(e)?ex(e):qj(e)};var rx=function(i){return function(e){e=ev(e);var t=zj(e)?tx(e):void 0,r=t?t[0]:e.charAt(0),n=t?HM(t,1).join(""):e.slice(1);return r[i]()+n}}("toUpperCase");var nx=function(e){return rx(ev(e).toLowerCase())};var ix=function(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r},ox=Vk({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),ax=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ux=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var sx=function(e){return(e=ev(e))&&e.replace(ax,ox).replace(ux,"")},cx=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var lx=function(e){return e.match(cx)||[]},fx=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var dx=function(e){return fx.test(e)},px="\\ud800-\\udfff",hx="\\u2700-\\u27bf",vx="a-z\\xdf-\\xf6\\xf8-\\xff",gx="A-Z\\xc0-\\xd6\\xd8-\\xde",mx="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yx="["+mx+"]",bx="\\d+",_x="["+hx+"]",wx="["+vx+"]",Sx="[^"+px+mx+bx+hx+vx+gx+"]",kx="(?:\\ud83c[\\udde6-\\uddff]){2}",Ex="[\\ud800-\\udbff][\\udc00-\\udfff]",Tx="["+gx+"]",Px="(?:"+wx+"|"+Sx+")",Ox="(?:"+Tx+"|"+Sx+")",Cx="(?:['â](?:d|ll|m|re|s|t|ve))?",Mx="(?:['â](?:D|LL|M|RE|S|T|VE))?",jx="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",xx="[\\ufe0e\\ufe0f]?",Rx=xx+jx+("(?:\\u200d(?:"+["[^"+px+"]",kx,Ex].join("|")+")"+xx+jx+")*"),Ax="(?:"+[_x,kx,Ex].join("|")+")"+Rx,Ix=RegExp([Tx+"?"+wx+"+"+Cx+"(?="+[yx,Tx,"$"].join("|")+")",Ox+"+"+Mx+"(?="+[yx,Tx+Px,"$"].join("|")+")",Tx+"?"+Px+"+"+Cx,Tx+"+"+Mx,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bx,Ax].join("|"),"g");var Dx=function(e){return e.match(Ix)||[]};var Lx=function(e,t,r){return e=ev(e),void 0===(t=r?void 0:t)?dx(e)?Dx(e):lx(e):e.match(t)||[]},Fx=RegExp("['â]","g");var Nx=function(t){return function(e){return ix(Lx(sx(e).replace(Fx,"")),t,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?nx(t):t)}),Ux=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Forbidden=t.NotAuthorized=t.BadRequest=t.UnknownResponse=t.ConnectionError=void 0;var r,n,i,o,a,u,s,c,l,f,d=y(PT),p=y(Gw),h=y(ey),v=y(iy),g=y(Vw),m=y(Hw);function y(e){return e&&e.__esModule?e:{default:e}}var b=t.ConnectionError=(n=r=function(e){function t(){return(0,h.default)(this,t),(0,g.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,v.default)(t,[{key:"parse",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(0,d.default)(this,{code:{value:e.code},reason:{value:e.reason}}),e.reason}}]),t}(Dk.Exception),r.defaultMessage="Failed to connect to socket",n);t.UnknownResponse=(o=i=function(e){function t(){return(0,h.default)(this,t),(0,g.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),t}(b),i.defaultMessage="UnknownResponse is produced by IE when we receive a 4XXX. You probably want to treat this like a NotFound",o),t.BadRequest=(u=a=function(e){function t(){return(0,h.default)(this,t),(0,g.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),t}(b),a.defaultMessage="BadRequest usually implies an attempt to use service account credentials",u),t.NotAuthorized=(c=s=function(e){function t(){return(0,h.default)(this,t),(0,g.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),t}(b),s.defaultMessage="Please refresh your access token",c),t.Forbidden=(f=l=function(e){function t(){return(0,h.default)(this,t),(0,g.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),t}(b),l.defaultMessage="Forbidden usually implies these credentials are not entitled for Spark",f)});e(Ux);Ux.Forbidden,Ux.NotAuthorized,Ux.BadRequest,Ux.UnknownResponse,Ux.ConnectionError;var zx=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=g(Rf),s=g(BT),c=g(Fk),l=g(_f),r=g(Gw),n=g(ey),o=g(iy),a=g(Vw),f=g(Hw),u=g(Ty),d=g(ud),p=g(xE),h=g(X_),v=g(MO);function g(e){return e&&e.__esModule?e:{default:e}}var m=new u.default,y=function(e){function u(){(0,n.default)(this,u);var e=(0,a.default)(this,(u.__proto__||(0,r.default)(u)).call(this));return e.onmessage=e.onmessage.bind(e),e.onclose=e.onclose.bind(e),e}return(0,f.default)(u,e),(0,o.default)(u,[{key:"close",value:function(i){var o=this;return new l.default(function(t,e){o.logger.info("socket: closing");var r=m.get(o);if(2===r.readyState||3===r.readyState)return o.logger.info("socket: already closed"),void t();if((i=i||{}).code&&1e3!==i.code&&(i.code<3e3||4999<i.code))e(new Error("`options.code` must be 1000 or between 3000 and 4999 (inclusive)"));else{i=(0,h.default)(i,{code:1e3,reason:"Done"});var n=(0,Uk.safeSetTimeout)(function(){try{o.logger.info("socket: no close event received, forcing closure"),t(o.onclose({code:1e3,reason:"Done (forced)"}))}catch(e){o.logger.warn("socket: force-close failed",e)}},o.forceCloseDelay);r.onclose=function(e){o.logger.info("socket: close event fired",e.code,e.reason),clearTimeout(n),o.onclose(e),t(e)},r.close(i.code,i.reason)}})}},{key:"open",value:function(i,o){var a=this;return new l.default(function(e,t){if(i)if(m.get(a))t(new Error("Socket#open() can only be called once per instance"));else{o=o||{},(0,Dk.checkRequired)(["forceCloseDelay","pingInterval","pongTimeout","token","trackingId","logger"],o),(0,c.default)(o).forEach(function(e){(0,s.default)(a,e,{enumerable:!1,value:o[e]})});var r=u.getWebSocketConstructor();a.logger.info("socket: creating WebSocket");var n=new r(i);n.binaryType="arraybuffer",n.onmessage=a.onmessage,n.onclose=function(e){switch((e=a._fixCloseCode(e)).code){case 1005:return t(new Ux.UnknownResponse(e));case 4400:return t(new Ux.BadRequest(e));case 4401:return t(new Ux.NotAuthorized(e));case 4403:return t(new Ux.Forbidden(e));default:return t(new Ux.ConnectionError(e))}},n.onopen=function(){a.logger.info("socket: connected"),a._authorize().then(function(){a.logger.info("socket: authorized"),n.onclose=a.onclose,e()}).catch(t)},n.onerror=function(e){a.logger.warn("socket: error event fired",e)},m.set(a,n),a.logger.info("socket: waiting for server")}else t(new Error("`url` is required"))})}},{key:"onclose",value:function(e){this.logger.info("socket: closed",e.code,e.reason),clearTimeout(this.pongTimer),clearTimeout(this.pingTimer),e=this._fixCloseCode(e),this.emit("close",e),this.removeAllListeners()}},{key:"onmessage",value:function(e){try{var t=JSON.parse(e.data),r=parseInt(t.sequenceNumber,10);this.logger.debug("socket: sequence number: ",r),this.expectedSequenceNumber&&r!==this.expectedSequenceNumber&&(this.logger.debug("socket: sequence number mismatch indicates lost mercury message. expected: "+this.expectedSequenceNumber+", actual: "+r),this.emit("sequence-mismatch",r,this.expectedSequenceNumber)),this.expectedSequenceNumber=r+1;var n={data:t};this._acknowledge(n),"pong"===t.type?this.emit("pong",n):this.emit("message",n)}catch(e){this.logger.warn("socket: error while receiving WebSocket message",e)}}},{key:"send",value:function(r){var n=this;return new l.default(function(e,t){return 1!==n.readyState?t(new Error("INVALID_STATE_ERROR")):((0,d.default)(r)&&(r=(0,i.default)(r)),m.get(n).send(r),e())})}},{key:"_acknowledge",value:function(e){return e?(0,p.default)(e,"data.id")?this.send({messageId:e.data.id,type:"ack"}):l.default.reject(new Error("`event.data.id` is required")):l.default.reject(new Error("`event` is required"))}},{key:"_authorize",value:function(){var n=this;return new l.default(function(r){n.logger.info("socket: authorizing"),n.send({id:v.default.v4(),type:"authorization",data:{token:n.token},trackingId:n.trackingId,logLevelToken:n.logLevelToken});n.once("message",function e(t){t.data.type||"mercury.buffer_state"!==t.data.data.eventType&&"mercury.registration_status"!==t.data.data.eventType||(n.removeListener("message",e),n._ping(),r())})})}},{key:"_fixCloseCode",value:function(e){if(1005===e.code&&e.reason)switch(e.reason.toLowerCase()){case"replaced":this.logger.info("socket: fixing CloseEvent code for reason: ",e.reason),e.code=4e3;break;case"authentication failed":case"authentication did not happen within the timeout window of 30000 seconds.":this.logger.info("socket: fixing CloseEvent code for reason: ",e.reason),e.code=1008}return e}},{key:"_ping",value:function(t){var r=this;return t=t||v.default.v4(),this.pongTimer=(0,Uk.safeSetTimeout)(function(){try{r.logger.info("socket: pong not receive in expected period, closing socket"),r.close({code:1e3,reason:"Pong not received"}).catch(function(e){r.logger.warn("socket: failed to close socket after missed pong",e)})}catch(e){r.logger.error("socket: error occurred in onPongNotReceived",e)}},this.pongTimeout),this.once("pong",function(){try{clearTimeout(r.pongTimer),r.pingTimer=(0,Uk.safeSetTimeout)(function(){return r._ping()},r.pingInterval)}catch(e){r.logger.error("socket: error occurred in scheduleNextPingAndCancelPongTimer",e)}}),this.once("pong",function(e){try{r.logger.debug("socket: pong",e.data.id),e.data&&e.data.id!==t&&(r.logger.info("socket: received pong for wrong ping id, closing socket"),r.logger.debug("socket: expected",t,"received",e.data.id),r.close({code:1e3,reason:"Pong mismatch"}))}catch(e){r.logger.error("socket: error occurred in confirmPongId",e)}}),this.logger.debug("socket: ping "+t),this.send({id:t,type:"ping"})}},{key:"binaryType",get:function(){return m.get(this).binaryType}},{key:"bufferedAmount",get:function(){return m.get(this).bufferedAmount}},{key:"extensions",get:function(){return m.get(this).extensions}},{key:"protocol",get:function(){return m.get(this).protocol}},{key:"readyState",get:function(){return m.get(this).readyState}},{key:"url",get:function(){return m.get(this).url}}],[{key:"getWebSocketConstructor",value:function(){throw new Error("Socket.getWebSocketConstructor() must be implemented in an environmentally appropriate way")}}]),u}(Q_.EventEmitter);t.default=y});e(zx);var qx=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=zx)&&r.__esModule?r:{default:r};n.default.getWebSocketConstructor=function(){return WebSocket},t.default=n.default});e(qx);var Bx=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=qx,e&&e.__esModule?e:{default:e}).default;var e}})});e(Bx);var Wx=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o=m(rc),u=m(IT),a=m(oc),s=m(Tf),c=m(Fk),l=m(_f),f=m(ZP),d=m(oO),p=m(Nx),h=m(ww),v=m(Bx),g=m(Mm);function m(e){return e&&e.__esModule?e:{default:e}}function y(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}var b=["idle","done (forced)","pong not received","pong mismatch"],_=FO.SparkPlugin.extend((r=(0,Dk.deprecated)("Mercury#listen(): Use Mercury#connect() instead"),n=(0,Dk.deprecated)("Mercury#stopListening(): Use Mercury#disconnect() instead"),y(i={namespace:"Mercury",session:{connected:{default:!1,type:"boolean"},connecting:{default:!1,type:"boolean"},socket:"object",localClusterServiceUrls:"object"},derived:{listening:{deps:["connected"],fn:function(){return this.connected}}},connect:function(e){var t=this;return this.connected?(this.logger.info("mercury: already connected, will not connect again"),l.default.resolve()):(this.connecting=!0,l.default.resolve(this.spark.internal.device.registered||this.spark.internal.device.register()).then(function(){return t.logger.info("mercury: connecting"),t._connectWithBackoff(e)}))},disconnect:function(){var t=this;return new l.default(function(e){if(t.backoffCall&&(t.logger.info("mercury: aborting connection"),t.backoffCall.abort()),t.socket)return t.socket.removeAllListeners("message"),t.once("offline",e),void t.socket.close();e()})},listen:function(){return this.connect()},stopListening:function(){return this.disconnect()},processRegistrationStatusEvent:function(e){this.localClusterServiceUrls=e.localClusterServiceUrls},_applyOverrides:function(t){t.headers&&(0,c.default)(t.headers).forEach(function(e){(0,f.default)(t,e,t.headers[e])})},_prepareUrl:function(t){var r=this;return t||(t=this.spark.internal.device.webSocketUrl),this.spark.internal.feature.getFeature("developer","web-ha-messaging").then(function(e){return e?r.spark.internal.device.useServiceCatalogUrl(t):t}).then(function(e){t=e}).then(function(){return r.spark.internal.feature.getFeature("developer","web-shared-mercury")}).then(function(e){return t=g.default.parse(t,!0),(0,s.default)(t.query,{outboundWireFormat:"text",bufferStates:!0,aliasHttpStatus:!0}),e&&((0,s.default)(t.query,{mercuryRegistrationStatus:!0,isRegistrationRefreshEnabled:!0}),(0,a.default)(t.query,"bufferStates")),(0,d.default)(r,"spark.config.device.ephemeral",!1)&&(t.query.multipleConnections=!0),g.default.format(t)})},_attemptConnection:function(e,r){var i=this,o=new v.default,a=void 0;o.on("close",function(){return i._onclose.apply(i,arguments)}),o.on("message",function(){return i._onmessage.apply(i,arguments)}),o.on("sequence-mismatch",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._emit.apply(i,["sequence-mismatch"].concat(t))}),l.default.all([this._prepareUrl(e),this.spark.credentials.getUserToken()]).then(function(e){var t=(0,u.default)(e,2),r=t[0],n=t[1];return a=r,o.open(r,{forceCloseDelay:i.config.forceCloseDelay,pingInterval:i.config.pingInterval,pongTimeout:i.config.pongTimeout,token:n.toString(),trackingId:i.spark.sessionId+"_"+Date.now(),logger:i.logger})}).then(function(){return i.socket=o,i.spark.internal.metrics.submitClientMetrics("web-ha-mercury",{fields:{success:!0},tags:{action:"connected",url:a}}),r(),i.spark.internal.feature.getFeature("developer","web-ha-messaging").then(function(e){return e?i.spark.internal.device.fetchNewUrls(a):l.default.resolve()})}).catch(function(t){return 1006!==t.code&&i.backoffCall&&0<i.backoffCall.getNumRetries()&&i._emit("connection_failed",t,{retries:i.backoffCall.getNumRetries()}),i.logger.info("mercury: connection attempt failed",t),t instanceof Ux.UnknownResponse?(i.logger.info("mercury: received unknown response code, refreshing device registration"),i.spark.internal.device.refresh().then(function(){return r(t)})):t instanceof Ux.NotAuthorized?(i.logger.info("mercury: received authorization error, reauthorizing"),i.spark.credentials.refresh({force:!0}).then(function(){return r(t)})):t instanceof Ux.BadRequest||t instanceof Ux.Forbidden?(i.logger.warn("mercury: received unrecoverable response from mercury"),i.backoffCall.abort(),r(t)):t instanceof Ux.ConnectionError?i.spark.internal.feature.getFeature("developer","web-ha-messaging").then(function(e){return e?(i.logger.info("mercury: received a generic connection error, will try to connect to another datacenter"),i.spark.internal.metrics.submitClientMetrics("web-ha-mercury",{fields:{success:!1},tags:{action:"failed",error:t.message,url:a}}),i.spark.internal.device.markUrlFailedAndGetNew(a)):null}).then(function(){return r(t)}):r(t)}).catch(function(e){i.logger.error("mercury: failed to handle connection failure",e),r(e)})},_connectWithBackoff:function(i){var o=this;return new l.default(function(t,r){var n=void 0;(n=h.default.call(function(e){o.logger.info("mercury: executing connection attempt "+n.getNumRetries()),o._attemptConnection(i,e)},function(e){return o.connecting=!1,o.backoffCall=void 0,e?(o.logger.info("mercury: failed to connect after "+n.getNumRetries()+" retries; log statement about next retry was inaccurate"),r(e)):(o.connected=!0,o._emit("online"),t())})).setStrategy(new h.default.ExponentialStrategy({initialDelay:o.config.backoffTimeReset,maxDelay:o.config.backoffTimeMax})),o.config.maxRetries&&n.failAfter(o.config.maxRetries),n.on("abort",function(){o.logger.info("mercury: connection aborted"),r()}),n.on("callback",function(e){if(e){var t=n.getNumRetries(),r=Math.min(n.strategy_.nextBackoffDelay_,o.config.backoffTimeMax);o.logger.info("mercury: failed to connect; attempting retry "+(t+1)+" in "+r+" ms")}else o.logger.info("mercury: connected")}),n.start(),o.backoffCall=n})},_emit:function(){try{this.trigger.apply(this,arguments)}catch(e){this.logger.error("mercury: error occurred in event handler",e)}},_getEventHandlers:function(e){var t=e.split("."),r=(0,u.default)(t,2),n=r[0],i=r[1],o=[];if(!this.spark[n]&&!this.spark.internal[n])return o;var a=(0,p.default)("process_"+i+"_event");return(this.spark[n]||this.spark.internal[n])[a]&&o.push({name:a,namespace:n}),o},_onclose:function(e){try{var t=e.reason&&e.reason.toLowerCase(),r=this.socket.url;switch(this.socket.removeAllListeners(),this.unset("socket"),this.connected=!1,this._emit("offline",e),e.code){case 1003:this.logger.info("mercury: Mercury service rejected last message; will not reconnect: "+e.reason),this._emit("offline.permanent",e);break;case 4e3:this.logger.info("mercury: socket replaced; will not reconnect"),this._emit("offline.replaced",e);break;case 1001:case 1005:case 1006:case 1011:this.logger.info("mercury: socket disconnected; reconnecting"),this._emit("offline.transient",e),this._reconnect(r);break;case 1e3:b.includes(t)?(this.logger.info("mercury: socket disconnected; reconnecting"),this._emit("offline.transient",e),this._reconnect(r)):(this.logger.info("mercury: socket disconnected; will not reconnect"),this._emit("offline.permanent",e));break;default:this.logger.info("mercury: socket disconnected unexpectedly; will not reconnect"),this._emit("offline.permanent",e)}}catch(e){this.logger.error("mercury: error occurred in close handler",e)}},_onmessage:function(r){var i=this,n=r.data,o=n.data;return this._applyOverrides(o),this._getEventHandlers(o.eventType).reduce(function(e,n){return e.then(function(){var t=n.namespace,r=n.name;return new l.default(function(e){return e((i.spark[t]||i.spark.internal[t])[r](o))}).catch(function(e){return i.logger.error("mercury: error occurred in autowired event handler for "+o.eventType,e)})})},l.default.resolve()).then(function(){i._emit("event",r.data);var e=o.eventType.split("."),t=(0,u.default)(e,1)[0];i._emit("event:"+t,n),i._emit("event:"+o.eventType,n)}).catch(function(e){i.logger.error("mercury: error occurred processing socket message",e)})},_reconnect:function(e){return this.logger.info("mercury: reconnecting"),this.connect(e)},version:"1.43.2"},"connect",[Dk.oneFlight],(0,o.default)(i,"connect"),i),y(i,"disconnect",[Dk.oneFlight],(0,o.default)(i,"disconnect"),i),y(i,"listen",[r],(0,o.default)(i,"listen"),i),y(i,"stopListening",[n],(0,o.default)(i,"stopListening"),i),i));t.default=_});e(Wx);var Gx=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={mercury:{pingInterval:15e3,pongTimeout:14e3,backoffTimeMax:32e3,backoffTimeReset:1e3,forceCloseDelay:2e3}}});e(Gx);var Vx=function(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(n,a,r(a),e)}return n};var Hx=function(e,n,i,o){return qE(e,function(e,t,r){n(o,e,i(e),r)}),o};var Jx=function(i,o){return function(e,t){var r=op(e)?Vx:Hx,n=o?o():{};return r(e,i,ZO(t,2),n)}},Yx=Jx(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),$x=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=r(Mf),i=r(_f),o=r(Yx);function r(e){return e&&e.__esModule?e:{default:e}}var a=FO.SparkPlugin.extend({namespace:"Feature",getFeature:function(e,t,r){if("developer"!==e&&"user"!==e&&"entitlement"!==e)return i.default.reject(new Error("Invalid feature keyType provided. Only `developer`, `user`, and `entitlement` feature toggles are permitted."));r=r||{};var n=this.spark.internal.device.features[e].get(t);return n?r.full?i.default.resolve(n.serialize()):i.default.resolve(n.value):i.default.resolve(null)},setFeature:function(t,e,r){var n=this;return"developer"!==t&&"user"!==t?i.default.reject(new Error("Only `developer` and `user` feature toggles can be set.")):this.request({method:"POST",api:"feature",resource:"features/users/"+this.spark.internal.device.userId+"/"+t,body:{key:e,mutable:!0,val:r}}).then(function(e){return n.spark.internal.device.features[t].add(e.body,{merge:!0})})},setBundledFeatures:function(e){var r=this;return e.forEach(function(e){e.mutable=e.mutable||"true","USER"!==e.type&&"DEV"!==e.type&&(e.type="USER")}),this.request({method:"POST",api:"feature",resource:"features/users/"+this.spark.internal.device.userId+"/toggles",body:e}).then(function(e){var t=(0,o.default)(e.body.featureToggles,{type:"USER"});r.spark.internal.device.features.user.add(t[0],{merge:!0}),r.spark.internal.device.features.developer.add(t[1],{merge:!0})})},initialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(0,n.default)(FO.SparkPlugin.prototype.initialize,this,t),this.listenToAndRun(this.spark,"change:internal.device.features.developer",this.trigger.bind(this,"change:developer")),this.listenToAndRun(this.spark,"change:internal.device.features.entitlement",this.trigger.bind(this,"change:entitlement")),this.listenToAndRun(this.spark,"change:internal.device.features.user",this.trigger.bind(this,"change:user"))},version:"1.43.2"});t.default=a});e($x);var Kx=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={feature:{}}});e(Kx),e(t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i($x).default}});var r=i($x),n=i(Kx);function i(e){return e&&e.__esModule?e:{default:e}}(0,FO.registerInternalPlugin)("feature",r.default,{config:n.default})}));var Xx=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=n(IT),r=n(Mf),a=n(_f);function n(e){return e&&e.__esModule?e:{default:e}}var i=(0,n(gb).default)("metric id"),u=FO.Batcher.extend({namespace:"Metrics",prepareItem:function(e){return e.appType=e.appType||this.config.appType,e.env=e.env||"TEST",e.time=e.time||Date.now(),e.version=e.version||this.spark.version,a.default.resolve(e)},prepareRequest:function(e){return a.default.resolve(e.map(function(e){return e.postTime=e.postTime||Date.now(),e}))},submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"metrics",resource:"metrics",body:{metrics:e}})},handleHttpSuccess:function(e){var t=this;return a.default.all(e.options.body.metrics.map(function(e){return t.acceptItem(e)}))},handleHttpError:function(e){var n=this;return e instanceof FO.SparkHttpError.NetworkOrCORSError?(this.logger.warn("metrics-batcher: received network error submitting metrics, reenqueuing payload"),a.default.all(e.options.body.metrics.map(function(r){return new a.default(function(e){var t=r[i].nextDelay;t<n.config.batcherRetryPlateau&&(r[i].nextDelay*=2),(0,Uk.safeSetTimeout)(function(){e(n.rerequest(r))},t)})}))):(0,r.default)(FO.Batcher.prototype.handleHttpError,this,[e])},rerequest:function(e){var i=this;return a.default.all([this.getDeferredForRequest(e),this.prepareItem(e)]).then(function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];i.enqueue(n).then(function(){return i.bounce()}).catch(function(e){return r.reject(e)})})},fingerprintRequest:function(e){return e[i]=e[i]||{nextDelay:1e3},a.default.resolve(e[i])},fingerprintResponse:function(e){return a.default.resolve(e[i])}});t.default=u});e(Xx);var Zx=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=n(_f);function n(e){return e&&e.__esModule?e:{default:e}}var i=n(Xx).default.extend({namespace:"Metrics",prepareItem:function(e){return r.default.resolve(e)},prepareRequest:function(e){return r.default.resolve(e)},submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"metrics",resource:"clientmetrics",body:{metrics:e}})}});t.default=i});e(Zx);var Qx=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(_f),n=i(Tf);function i(e){return e&&e.__esModule?e:{default:e}}var o=i(Xx).default.extend({namespace:"Metrics",prepareItem:function(e){return e.eventPayload.origin=(0,n.default)({buildType:"test",networkType:"unknown"},e.eventPayload.origin),r.default.resolve(e)},prepareRequest:function(e){return e.forEach(function(e){e.eventPayload.originTime.sent=(new Date).toISOString()}),r.default.resolve(e)},submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"metrics",resource:"clientmetrics",body:{metrics:e}})}});t.default=o});e(Qx);var eR=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i=c(rc),o=c(Tf),a=c(Xx),u=c(Zx),s=c(Qx);function c(e){return e&&e.__esModule?e:{default:e}}var l,f,d,p,h,v,g=FO.SparkPlugin.extend((r=(0,Dk.deprecated)("Metrics#sendUnstructured() is deprecated; please use Metrics#submit()"),n={children:{batcher:a.default,clientMetricsBatcher:u.default,callDiagnosticEventsBatcher:s.default},namespace:"Metrics",sendUnstructured:function(e,t){return this.submit(e,t)},submit:function(e,t){return this.batcher.request((0,o.default)({key:e},t))},submitClientMetrics:function(e,t,r){var n={metricName:e};if(t.tags&&(n.tags=t.tags),t.fields&&(n.fields=t.fields),t.type&&(n.type=t.type),n.timestamp=Date.now(),r){var i={metrics:[n]};return this.postPreLoginMetric(i,r)}return this.clientMetricsBatcher.request(n)},aliasUser:function(e){return this.request({method:"POST",api:"metrics",resource:"clientmetrics",headers:{"x-prelogin-userid":e},body:{},qs:{alias:!0}})},postPreLoginMetric:function(t,r){var n=this;return this.spark.credentials.getClientToken().then(function(e){return n.request({method:"POST",api:"metrics",resource:"clientmetrics-prelogin",headers:{authorization:e.toString(),"x-prelogin-userid":r},body:t})})},submitCallDiagnosticEvents:function(e){var t={type:"diagnostic-event",eventPayload:e};return this.callDiagnosticEventsBatcher.request(t)},version:"1.43.2"},l=n,f="sendUnstructured",d=[r],p=(0,i.default)(n,"sendUnstructured"),h=n,v={},Object.keys(p).forEach(function(e){v[e]=p[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=d.slice().reverse().reduce(function(e,t){return t(l,f,e)||e},v),h&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(h):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(l,f,v),v=null),n));t.default=g});e(eR);var tR=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={device:{preDiscoveryServices:{metricsServiceUrl:"https://metrics-a.wbx2.com/metrics/api/v1"}},metrics:{appType:Dk.inBrowser?"browser":"nodejs",batcherWait:500,batcherMaxCalls:50,batcherMaxWait:1500,batcherRetryPlateau:32e3}}});e(tR);var rR=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(eR).default}});var r=i(eR),n=i(tR);function i(e){return e&&e.__esModule?e:{default:e}}(0,FO.registerInternalPlugin)("metrics",r.default,{config:n.default}),t.config=n.default});e(rR);rR.config;var nR=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownResponse=t.NotAuthorized=t.Forbidden=t.ConnectionError=t.BadRequest=t.config=t.Socket=t.Mercury=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(Wx).default}}),Object.defineProperty(t,"Mercury",{enumerable:!0,get:function(){return i(Wx).default}}),Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return i(Bx).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return i(Gx).default}}),Object.defineProperty(t,"BadRequest",{enumerable:!0,get:function(){return Ux.BadRequest}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return Ux.ConnectionError}}),Object.defineProperty(t,"Forbidden",{enumerable:!0,get:function(){return Ux.Forbidden}}),Object.defineProperty(t,"NotAuthorized",{enumerable:!0,get:function(){return Ux.NotAuthorized}}),Object.defineProperty(t,"UnknownResponse",{enumerable:!0,get:function(){return Ux.UnknownResponse}});var r=i(Wx),n=i(Gx);function i(e){return e&&e.__esModule?e:{default:e}}(0,FO.registerInternalPlugin)("mercury",r.default,{config:n.default,onBeforeLogout:function(){return this.disconnect()}})});e(nR);nR.UnknownResponse,nR.NotAuthorized,nR.Forbidden,nR.ConnectionError,nR.BadRequest,nR.config,nR.Socket,nR.Mercury;var iR=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DESYNC=t.LESS_THAN=t.GREATER_THAN=t.FETCH=t.EQUAL=t.USE_CURRENT=t.USE_INCOMING=t.eventKeys=void 0,Object.defineProperty(t,"eventKeys",{enumerable:!0,get:function(){return Dj.locusEventKeys}}),Object.defineProperty(t,"USE_INCOMING",{enumerable:!0,get:function(){return Nj.USE_INCOMING}}),Object.defineProperty(t,"USE_CURRENT",{enumerable:!0,get:function(){return Nj.USE_CURRENT}}),Object.defineProperty(t,"EQUAL",{enumerable:!0,get:function(){return Nj.EQUAL}}),Object.defineProperty(t,"FETCH",{enumerable:!0,get:function(){return Nj.FETCH}}),Object.defineProperty(t,"GREATER_THAN",{enumerable:!0,get:function(){return Nj.GREATER_THAN}}),Object.defineProperty(t,"LESS_THAN",{enumerable:!0,get:function(){return Nj.LESS_THAN}}),Object.defineProperty(t,"DESYNC",{enumerable:!0,get:function(){return Nj.DESYNC}});var r,n=(r=Nj)&&r.__esModule?r:{default:r};(0,FO.registerInternalPlugin)("locus",n.default),t.default=n.default});e(iR);iR.DESYNC,iR.LESS_THAN,iR.GREATER_THAN,iR.FETCH,iR.EQUAL,iR.USE_CURRENT,iR.USE_INCOMING,iR.eventKeys;var oR=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var p=i(AT),u=i(Tb),r=i(_f),h=i(oO),n=i(fj);function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return Boolean(e.self&&d(e.self))}function f(t,e){return o(e)&&e.self.devices.some(function(e){return t.internal.device.url===e.url&&"JOINED"===e.state})}function v(e,t,r){var n=void 0,i=void 0;return r.person.isExternal||(i=r.person.id,n=e.people.inferPersonIdFromUuid(r.person.id)),{_id:r.id,isSelf:t.self.url===r.url,isInitiator:r.isCreator||!1,personUuid:i,personId:n,state:a(r),audioMuted:m(r),videoMuted:y(r)}}function a(e){var t=e.state&&e.state.toLowerCase();switch(t){case"idle":return"notified";case"joined":return"connected";case"left":return"disconnected";default:return t}}function d(e){return e&&"JOINED"===e.state}function g(e){return s(e)[0]}function s(t){return t.participants.filter(function(e){return"USER"===e.type&&e.url!==t.self.url})}function m(e){return d(e)&&!e.status.audioStatus.includes("SEND")}function y(e){return d(e)&&!e.status.videoStatus.includes("SEND")}t.activeParticipants=function(e){return(0,n.default)(e.participants,{state:"JOINED"})},t.direction=function(e){return e&&e.self?e.self.isCreator?"out":"in":"unknown"},t.waitForMediaShare=function(i){return function(){var e=new r.default(function(r,n){!function e(){try{i.logger.info("checking for media share");var t=i.locus.mediaShares.find(function(e){return"content"===e.name});if(!t)return i.logger.info("did not find media share, waiting for next locus change"),void i.once("change:locus",e);i.logger.info("found media share"),r(t)}catch(e){i.logger.error("something unexpected happened"),i.logger.error(e),n(e)}}()});return r.default.race([e,new r.default(function(e,t){return setTimeout(t(new Error("Could not find media share after 10000ms")),1e4)})])}},t.isActive=function(e){return"ACTIVE"===e.fullState.state},t.isCall=function(e){return e&&e.fullState&&"CALL"===e.fullState.type},t.joined=o,t.joinedOnThisDevice=f,t.participantsToCallMemberships=function(c,l){var e=new u.default,f=new u.default,t=!0,r=!1,n=void 0;try{for(var i,o=(0,p.default)(l.participants);!(t=(i=o.next()).done);t=!0){var a=i.value;"USER"===a.type?e.set(a.url,a):"RESOURCE_ROOM"===a.type&&f.set(a.url,a)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}var d=[];return e.forEach(function(e){var t=v(c,l,e);if(e.devices){var r=!0,n=!1,i=void 0;try{for(var o,a=(0,p.default)(e.devices);!(r=(o=a.next()).done);r=!0){var u=o.value;if("JOINED"===u.state&&"OBSERVE"===(0,h.default)(u,"intent.type")){var s=f.get(u.url);t.audioMuted=m(s),t.videoMuted=y(s)}f.delete(u.url)}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}}d.push(t)}),f.forEach(function(e){var t=v(c,l,e);d.push(t)}),d},t.participantToCallMembership=v,t.participantStateToCallMembershipState=a,t.makeInternalCallId=function(e){return e.url+"_"+e.fullState.lastActive},t.mediaDirection=function(e,t){return t&&t.status?(t.status[e+"Status"]||"inactive").toLowerCase():"inactive"},t.participantIsJoined=d,t.remoteParticipant=g,t.remoteParticipants=s,t.remoteAudioMuted=m,t.remoteVideoMuted=y,t.shouldRing=function(e){return"NONE"!==(0,h.default)(e,"self.alertType.action")},t.getState=function(e){return e&&e.fullState&&e.fullState.state.toLowerCase()},t.getStatus=function(e,t,r){if(t){var n=g(t);if(n){if(f(e,t)&&n&&d(n))return"connected";if(t.replaces){var i=!0,o=!1,a=void 0;try{for(var u,s=(0,p.default)(t.replaces);!(i=(u=s.next()).done);i=!0){var c=u.value;if(c.locusUrl===r.url&&c.lastActive===(0,h.default)(r,"fullState.lastActive"))return"replaced"}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}}var l=t.self;if("LEFT"===n.state||"LEFT"===l.state)return"disconnected";if("DECLINED"===n.state)return"disconnected";if("NOTIFIED"===n.state)return"ringing"}}return"initiated"},t.getThisDevice=function(t,e){return e&&e.self&&e.self.devices.find(function(e){return e.url===t.internal.device.url})}});e(oR);oR.activeParticipants,oR.direction,oR.waitForMediaShare,oR.isActive,oR.isCall,oR.joined,oR.joinedOnThisDevice,oR.participantsToCallMemberships,oR.participantToCallMembership,oR.participantStateToCallMembershipState,oR.makeInternalCallId,oR.mediaDirection,oR.participantIsJoined,oR.remoteParticipant,oR.remoteParticipants,oR.remoteAudioMuted,oR.remoteVideoMuted,oR.shouldRing,oR.getState,oR.getStatus,oR.getThisDevice;var aR=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e&&t)return"sendrecv";if(e&&!t)return"sendonly";if(!e&&t)return"recvonly";if(e||t)throw new Error("If you see this error, your JavaScript engine has a major flaw");return"inactive"}});e(aR);var uR=Object.prototype.hasOwnProperty,sR=Jx(function(e,t,r){uR.call(e,r)?++e[r]:Yd(e,r,1)});var cR=function(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:N_(t),ov(e,t<0?0:t,n)):[]};var lR=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0};var fR=function(e,n){var i=!0;return qE(e,function(e,t,r){return i=!!n(e,t,r)}),i};var dR=function(e,t,r){var n=op(e)?lR:fR;return r&&Y_(e,t,r)&&(t=void 0),n(e,ZO(t,3))},pR=Object.prototype.hasOwnProperty,hR=Jx(function(e,t,r){pR.call(e,r)?e[r].push(t):Yd(e,r,[t])}),vR=Jx(function(e,t,r){Yd(e,r,t)}),gR=Math.max;var mR=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:N_(r);return i<0&&(i=gR(n+i,0)),u_(e,t,i)};var yR=function(e){return null!=e&&e.length?ov(e,0,-1):[]};var bR=function(e,t,r){t=tv(t,e);var n=null==(e=av(e,t))?e:e[nv(rv(t))];return null==n?void 0:bv(n,e,r)},_R=Ob(bR),wR=Ob(function(e,t,r){var n=-1,i="function"==typeof t,o=Tp(e)?Array(e.length):[];return qE(e,function(e){o[++n]=i?bv(t,e,r):bR(e,t,r)}),o});var SR=function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n},kR=Math.max,ER=Math.min;var TR=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=N_(r))<0?kR(n+i,0):ER(i,n-1)),t==t?SR(e,t,i):i_(e,o_,i,!0)};var PR=function(e,n){var i=-1,o=Tp(e)?Array(e.length):[];return qE(e,function(e,t,r){o[++i]=n(e,t,r)}),o};var OR=function(e,t){return(op(e)?Af:PR)(e,ZO(t,3))};var CR=function(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=t(o);if(null!=a&&(void 0===u?a==a&&!zh(a):r(a,u)))var u=a,s=o}return s};var MR=function(e,t){return t<e};var jR=function(e){return e&&e.length?CR(e,kv,MR):void 0};var xR=function(e,t){return e<t};var RR=function(e){return e&&e.length?CR(e,kv,xR):void 0};var AR=function(e,n,i,o,t){return t(e,function(e,t,r){i=o?(o=!1,e):n(i,e,t,r)}),i};var IR=function(e,t,r){var n=op(e)?ix:AR,i=arguments.length<3;return n(e,ZO(t,4),r,i,qE)};var DR=function(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r},LR=Kk(!0);var FR=zE(function(e,t){return e&&LR(e,t,Pp)},!0);var NR=function(e,t,r){var n=op(e)?DR:AR,i=arguments.length<3;return n(e,ZO(t,4),r,i,FR)};var UR=function(e,t){return(op(e)?Dp:lj)(e,xM(ZO(t,3)))},zR=Math.floor,qR=Math.random;var BR=function(e,t){return e+zR(qR()*(t-e+1))};var WR=function(e){var t=e.length;return t?e[BR(0,t-1)]:void 0};var GR=function(e){return WR(rE(e))};var VR=function(e){return(op(e)?WR:GR)(e)};var HR=function(e,t){var r=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++r<t;){var o=BR(r,i),a=e[o];e[o]=e[r],e[r]=a}return e.length=t,e};var JR=function(e){return HR(Ip(e))};var YR=function(e){return HR(rE(e))};var $R=function(e){return(op(e)?JR:YR)(e)};var KR=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e};var XR=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,o=zh(e),a=void 0!==t,u=null===t,s=t==t,c=zh(t);if(!u&&!c&&!o&&t<e||o&&a&&s&&!u&&!c||n&&a&&s||!r&&s||!i)return 1;if(!n&&!o&&!c&&e<t||c&&r&&i&&!n&&!o||u&&r&&i||!a&&i||!s)return-1}return 0};var ZR=function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,u=r.length;++n<a;){var s=XR(i[n],o[n]);if(s)return u<=n?s:s*("desc"==r[n]?-1:1)}return e.index-t.index};var QR=function(e,n,r){var i=-1;n=Af(n.length?n:[kv],pp(ZO));var t=PR(e,function(t,e,r){return{criteria:Af(n,function(e){return e(t)}),index:++i,value:t}});return KR(t,function(e,t){return ZR(e,t,r)})},eA=Ob(function(e,t){if(null==e)return[];var r=t.length;return 1<r&&Y_(e,t[0],t[1])?t=[]:2<r&&Y_(t[0],t[1],t[2])&&(t=[t[0]]),QR(e,mv(t,1),[])});var tA={countBy:sR,difference:Fj,drop:cR,each:BE,every:dR,filter:fj,find:tC,forEach:BE,groupBy:hR,includes:iE,keyBy:vR,indexOf:mR,initial:yR,invoke:_R,invokeMap:wR,isEmpty:xv,lastIndexOf:TR,map:OR,max:jR,min:RR,partition:Yx,reduce:IR,reduceRight:NR,reject:UR,sample:VR,shuffle:$R,some:nC,sortBy:eA,tail:function(e){var t=null==e?0:e.length;return t?ov(e,1,t):[]},take:function(e,t,r){return e&&e.length?(t=r||void 0===t?1:N_(t),ov(e,0,t<0?0:t)):[]},without:EC},rA=[].slice,nA={};tA.each(["forEach","each","map","reduce","reduceRight","find","filter","reject","every","some","includes","invoke","invokeMap","max","min","take","initial","tail","drop","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","sample","partition"],function(t){tA[t]&&(nA[t]=function(){var e=rA.call(arguments);return e.unshift(this.models),tA[t].apply(tA,e)})});tA.each(["groupBy","countBy","sortBy","keyBy"],function(n){tA[n]&&(nA[n]=function(t,e){var r=cd(t)?t:function(e){return e.get?e.get(t):e[t]};return tA[n](this.models,r,e)})}),nA.where=function(n,e){return tA.isEmpty(n)?e?void 0:[]:this[e?"find":"filter"](function(e){var t;for(var r in n)if(t=e.get?e.get(r):e[r],n[r]!==t)return!1;return!0})},nA.findWhere=function(e){return this.where(e,!0)},nA.pluck=function(e){return tA.invokeMap(this.models,"get",e)},nA.first=function(){return this.models[0]},nA.last=function(){return this.models[this.models.length-1]},nA.size=function(){return this.models.length};var iA=nA,oA=t(function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0});var n=((r=oT)&&r.__esModule?r:{default:r}).default.extend({idAttribute:"_id",props:{_id:{required:!0,type:"string"},isSelf:{default:!1,type:"boolean"},isInitiator:{default:!1,required:!0,type:"boolean"},personId:{type:"string"},personUuid:{require:!0,type:"string"},state:{required:!0,type:"string",values:["notified","connected","declined","disconnected","waiting"]},audioMuted:{default:!1,type:"boolean"},videoMuted:{default:!1,type:"boolean"}}});t.default=n});e(oA);var aA=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(YP),n=o(iA),i=o(oA);function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend(n.default,{model:i.default,mainIndex:"_id"});t.default=a});function uA(){this.head=null,this.tail=null,this.length=0}e(aA),uA.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},uA.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},uA.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},uA.prototype.clear=function(){this.head=this.tail=null,this.length=0},uA.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},uA.prototype.concat=function(e){if(0===this.length)return yg.alloc(0);if(1===this.length)return this.head.data;for(var t=yg.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var sA=yg.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function cA(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!sA(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=fA;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=dA;break;default:return void(this.write=lA)}this.charBuffer=new yg(6),this.charReceived=0,this.charLength=0}function lA(e){return e.toString(this.encoding)}function fA(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function dA(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}cA.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!(55296<=(i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if(55296<=(i=t.charCodeAt(n))&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t},cA.prototype.detectIncompleteChar=function(e){for(var t=3<=e.length?3:e.length;0<t;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},cA.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t},vA.ReadableState=hA;var pA=im("stream");function hA(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof WA&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new uA,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new cA(e.encoding),this.encoding=e.encoding)}function vA(e){if(!(this instanceof vA))return new vA(e);this._readableState=new hA(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),Q_.call(this)}function gA(e,t,r,n,i){var o,a,u,s=function(e,t){var r=null;Kg(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,r);if(s)e.emit("error",s);else if(null===r)t.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,bA(e)}(e,t);else if(t.objectMode||r&&0<r.length)if(t.ended&&!i){var c=new Error("stream.push() after EOF");e.emit("error",c)}else if(t.endEmitted&&i){var l=new Error("stream.unshift() after end event");e.emit("error",l)}else{var f;!t.decoder||i||n||(r=t.decoder.write(r),f=!t.objectMode&&0===r.length),i||(t.reading=!1),f||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&bA(e))),o=e,(a=t).readingMore||(a.readingMore=!0,ss(wA,o,a))}else i||(t.reading=!1);return!(u=t).ended&&(u.needReadable||u.length<u.highWaterMark||0===u.length)}Zg(vA,Q_),vA.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=yg.from(e,t),t=""),gA(this,r,e,t,!1)},vA.prototype.unshift=function(e){return gA(this,this._readableState,e,"",!0)},vA.prototype.isPaused=function(){return!1===this._readableState.flowing},vA.prototype.setEncoding=function(e){return this._readableState.decoder=new cA(e),this._readableState.encoding=e,this};var mA=8388608;function yA(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(mA<=(r=e)?r=mA:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var r}function bA(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(pA("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?ss(_A,e):_A(e))}function _A(e){pA("emit readable"),e.emit("readable"),EA(e)}function wA(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(pA("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function SA(e){pA("readable nexttick read 0"),e.read(0)}function kA(e,t){t.reading||(pA("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),EA(e),t.flowing&&!t.reading&&e.read(0)}function EA(e){var t=e._readableState;for(pA("flow",t.flowing);t.flowing&&null!==e.read(););}function TA(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=o.slice(a);break}++n}return t.length-=n,i}(e,t):function(e,t){var r=yg.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=o.slice(a);break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function PA(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,ss(OA,t,e))}function OA(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function CA(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function MA(){}function jA(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function xA(e,t){Object.defineProperty(this,"buffer",{get:tm(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof WA&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1;var i=(this.finished=!1)===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(a=r,a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0,t)!function(e,t,r,n,i){--t.pendingcb,r?ss(i,n):i(n);e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,i);else{var o=LA(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||DA(e,r),n?ss(IA,e,r,o,i):IA(e,r,o,i)}var a}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new UA(this)}function RA(e){if(!(this instanceof RA||this instanceof WA))return new RA(e);this._writableState=new xA(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),Q_.call(this)}function AA(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function IA(e,t,r,n){var i,o;r||(i=e,0===(o=t).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),t.pendingcb--,n(),NA(e,t)}function DA(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0;r;)r=(i[a]=r).next,a+=1;AA(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new UA(t)}else{for(;r;){var u=r.chunk,s=r.encoding,c=r.callback;if(AA(e,t,!1,t.objectMode?1:u.length,u,s,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function LA(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function FA(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function NA(e,t){var r=LA(t);return r&&(0===t.pendingcb?(FA(e,t),t.finished=!0,e.emit("finish")):FA(e,t)),r}function UA(n){var i=this;this.next=null,this.entry=null,this.finish=function(e){var t=i.entry;for(i.entry=null;t;){var r=t.callback;n.pendingcb--,r(e),t=t.next}n.corkedRequestsFree?n.corkedRequestsFree.next=i:n.corkedRequestsFree=i}}vA.prototype.read=function(e){pA("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return pA("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?PA(this):bA(this),null;if(0===(e=yA(e,t))&&t.ended)return 0===t.length&&PA(this),null;var n,i=t.needReadable;return pA("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&pA("length less than watermark",i=!0),t.ended||t.reading?pA("reading or ended",i=!1):i&&(pA("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=yA(r,t))),null===(n=0<e?TA(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&PA(this)),null!==n&&this.emit("data",n),n},vA.prototype._read=function(e){this.emit("error",new Error("not implemented"))},vA.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r)}n.pipesCount+=1,pA("pipe count=%d opts=%j",n.pipesCount,e);var i=!e||!1!==e.end?a:l;function o(e){pA("onunpipe"),e===t&&l()}function a(){pA("onend"),r.end()}n.endEmitted?ss(i):t.once("end",i),r.on("unpipe",o);var u,s=(u=t,function(){var e=u._readableState;pA("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&u.listeners("data").length&&(e.flowing=!0,EA(u))});r.on("drain",s);var c=!1;function l(){pA("cleanup"),r.removeListener("close",h),r.removeListener("finish",v),r.removeListener("drain",s),r.removeListener("error",p),r.removeListener("unpipe",o),t.removeListener("end",a),t.removeListener("end",l),t.removeListener("data",d),c=!0,!n.awaitDrain||r._writableState&&!r._writableState.needDrain||s()}var f=!1;function d(e){pA("ondata"),(f=!1)!==r.write(e)||f||((1===n.pipesCount&&n.pipes===r||1<n.pipesCount&&-1!==CA(n.pipes,r))&&!c&&(pA("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,f=!0),t.pause())}function p(e){var t;pA("onerror",e),g(),r.removeListener("error",p),0===(t="error",r.listeners(t).length)&&r.emit("error",e)}function h(){r.removeListener("finish",v),g()}function v(){pA("onfinish"),r.removeListener("close",h),g()}function g(){pA("unpipe"),t.unpipe(r)}return t.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(r,"error",p),r.once("close",h),r.once("finish",v),r.emit("pipe",t),n.flowing||(pA("pipe resume"),t.resume()),r},vA.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=CA(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},vA.prototype.addListener=vA.prototype.on=function(e,t){var r=Q_.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&bA(this):ss(SA,this))}return r},vA.prototype.resume=function(){var e,t,r=this._readableState;return r.flowing||(pA("resume"),r.flowing=!0,e=this,(t=r).resumeScheduled||(t.resumeScheduled=!0,ss(kA,e,t))),this},vA.prototype.pause=function(){return pA("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(pA("pause"),this._readableState.flowing=!1,this.emit("pause")),this},vA.prototype.wrap=function(t){var r=this._readableState,n=!1,i=this;for(var e in t.on("end",function(){if(pA("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),t.on("data",function(e){(pA("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e)||(r.objectMode||e&&e.length)&&(i.push(e)||(n=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(["error","close","destroy","pause","resume"],function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){pA("wrapped _read",e),n&&(n=!1,t.resume())},i},vA._fromList=TA,RA.WritableState=xA,Zg(RA,Q_),xA.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},RA.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},RA.prototype.write=function(e,t,r){var n,i,o,a,u,s,c,l,f,d=this._writableState,p=!1;return"function"==typeof t&&(r=t,t=null),yg.isBuffer(e)?t="buffer":t||(t=d.defaultEncoding),"function"!=typeof r&&(r=MA),d.ended?(c=this,l=r,f=new Error("write after end"),c.emit("error",f),ss(l,f)):(n=this,i=d,a=r,s=!(u=!0),null===(o=e)?s=new TypeError("May not write null values to stream"):yg.isBuffer(o)||"string"==typeof o||void 0===o||i.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(n.emit("error",s),ss(a,s),u=!1),u&&(d.pendingcb++,p=function(e,t,r,n,i){o=t,a=r,u=n,o.objectMode||!1===o.decodeStrings||"string"!=typeof a||(a=yg.from(a,u)),r=a,yg.isBuffer(r)&&(n="buffer");var o,a,u;var s=t.objectMode?1:r.length;t.length+=s;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new jA(r,n,i),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else AA(e,t,!1,s,r,n,i);return c}(this,d,e,t,r))),p},RA.prototype.cork=function(){this._writableState.corked++},RA.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||DA(this,e))},RA.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},RA.prototype._write=function(e,t,r){r(new Error("not implemented"))},RA.prototype._writev=null,RA.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,t=e=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,NA(e,t),r&&(t.finished?ss(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Zg(WA,vA);for(var zA=Object.keys(RA.prototype),qA=0;qA<zA.length;qA++){var BA=zA[qA];WA.prototype[BA]||(WA.prototype[BA]=RA.prototype[BA])}function WA(e){if(!(this instanceof WA))return new WA(e);vA.call(this,e),RA.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",GA)}function GA(){this.allowHalfOpen||this._writableState.ended||ss(VA,this)}function VA(e){e.end()}function HA(r){this.afterTransform=function(e,t){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,(n.writecb=null)!=r&&e.push(r);i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(r,e,t)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function JA(e){if(!(this instanceof JA))return new JA(e);WA.call(this,e),this._transformState=new HA(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){YA(t,e)}):YA(t)})}function YA(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function $A(e){if(!(this instanceof $A))return new $A(e);JA.call(this,e)}function KA(){Q_.call(this)}Zg(JA,WA),JA.prototype.push=function(e,t){return this._transformState.needTransform=!1,WA.prototype.push.call(this,e,t)},JA.prototype._transform=function(e,t,r){throw new Error("Not implemented")},JA.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},JA.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Zg($A,JA),$A.prototype._transform=function(e,t,r){r(null,e)},Zg(KA,Q_),KA.Readable=vA,KA.Writable=RA,KA.Duplex=WA,KA.Transform=JA,KA.PassThrough=$A,(KA.Stream=KA).prototype.pipe=function(t,e){var r=this;function n(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),t.on("drain",i),t._isStdio||e&&!1===e.end||(r.on("end",a),r.on("close",u));var o=!1;function a(){o||(o=!0,t.end())}function u(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function s(e){if(c(),0===Q_.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",s),t.removeListener("error",s),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("error",s),t.on("error",s),r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};var XA=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p=u(AT),r=u(Gw),n=u(ey),i=u(iy),o=u(Vw),a=u(Hw);function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return(0,n.default)(this,t),(0,o.default)(this,(t.__proto__||(0,r.default)(t)).call(this,{objectMode:!0}))}return(0,a.default)(t,e),(0,i.default)(t,[{key:"_transform",value:function(e,t,r){if(e){var n={local:null,remote:null},i={local:null,remote:null},o={local:null,remote:null},a={local:null,remote:null},u=!0,s=!1,c=void 0;try{for(var l,f=(0,p.default)(e.values());!(u=(l=f.next()).done);u=!0){var d=l.value;["outbound-rtp","outboundrtp"].includes(d.type)&&!d.isRemote&&("audio"===d.mediaType&&(o.local=d,o.remote=e.get(d.remoteId)),"video"===d.mediaType&&(a.local=d,a.remote=e.get(d.remoteId))),["inbound-rtp","inboundrtp"].includes(d.type)&&!d.isRemote&&("audio"===d.mediaType&&(n.local=d,n.remote=e.get(d.remoteId)),"video"===d.mediaType&&(i.local=d,i.remote=e.get(d.remoteId)))}}catch(e){s=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw c}}this.push({incomingAudio:n,incomingVideo:i,outgoingAudio:o,outgoingVideo:a,report:e}),r()}else r()}}]),t}(KA.Transform);t.default=s});e(XA);var ZA=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(Gw),o=s(ey),r=s(iy),a=s(Vw),u=s(Hw),n=s(Ty);function s(e){return e&&e.__esModule?e:{default:e}}var c=new n.default,l=new n.default,f=new n.default,d=new n.default;var p=function(e){function n(e){(0,o.default)(this,n);var t=(0,a.default)(this,(n.__proto__||(0,i.default)(n)).call(this,{objectMode:!0}));c.has(e)||c.set(e,new Q_.EventEmitter);var r=c.get(e);return f.has(t)||f.set(t,r),l.has(r)||l.set(r,e),r.once("error",function(e){t.emit("error",e)}),t}return(0,u.default)(n,e),(0,r.default)(n,[{key:"_read",value:function(){var t=this,e=f.get(this);e.once("data",function(e){t.isPaused()||t.push(e)}),d.has(e)||function r(n){var e=(0,Uk.safeSetTimeout)(function(){var t=l.get(n);t.getStats().then(function(e){n.emit("data",e),"closed"!==t.signalingState&&"closed"!==t.connectionState&&r(n)}).catch(function(e){n.emit("error",e)})},1e3);d.set(n,e)}(e)}}]),n}(KA.Readable);t.default=p});e(ZA);var QA=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o,a,u=S(rc),l=S(AT),s=S(Mf),c=S(Tf),f=S(_f),d=S(W_),p=S(oO),h=S(tC),v=S(X_),g=S(MO),m=S(Ij),y=S(aR),b=S(aA),_=S(XA),w=S(ZA);function S(e){return e&&e.__esModule?e:{default:e}}function k(r,n,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(r,n,o),o=null),o}var E=Ij.webrtcHelpers.boolToDirection,T=["ringing","connected","disconnected","replaced"];function P(t,e){var r="string"==typeof e?sj(e):e,n=void 0;return(n="screen"===t?r.media.find(function(e){return"video"===e.type&&e.content}):r.media.find(function(e){return e.type===t}))&&n.direction?n.direction:"inactive"}function O(e){switch(e){case"inactive":case"sendrecv":return e;case"sendonly":return"recvonly";case"recvonly":return"sendonly";default:throw new Error('direction "'+e+'" is not valid')}}var C={audio:"Audio",video:"Video"},M=FO.SparkPlugin.extend((r=(0,Dk.whileInFlight)("locusJoinInFlight"),n=(0,Dk.deprecated)("Please use Call#reject()"),i=(0,Dk.whileInFlight)("locusLeaveInFlight"),o=(0,nj.debounce)(),k(a={namespace:"Phone",children:{media:m.default},collections:{memberships:b.default},session:{activeParticipantsCount:{default:0,required:!0,type:"number"},remoteAudioMuted:{default:!1,required:!1,type:"boolean"},remoteVideoMuted:{default:!1,required:!1,type:"boolean"},correlationId:"string",facingMode:{type:"string",values:["user","environment"]},internalCallId:{setOnce:!0,type:"string"},locus:"object",localMediaStream:"object",locusJoinInFlight:{default:!1,type:"boolean"},locusLeaveInFlight:{default:!1,type:"boolean"},me:{type:"object"}},derived:{id:{deps:["locus"],fn:function(){return(0,p.default)(this,"locus.url")}},isActive:{deps:["locus"],fn:function(){return!(!this.locus||!(0,oR.isActive)(this.locus))}},joinedOnThisDevice:{deps:["locus"],default:!1,fn:function(){return!(!this.locus||!(0,oR.joinedOnThisDevice)(this.spark,this.locus))}},locusUrl:{deps:["locus"],fn:function(){return(0,p.default)(this,"locus.url")}},device:{deps:["locus"],fn:function(){return(0,oR.getThisDevice)(this.spark,this.locus)}},mediaConnection:{deps:["locus"],fn:function(){var e=(0,oR.getThisDevice)(this.spark,this.locus);return(0,p.default)(e,"mediaConnections[0]")}},mediaId:{deps:["locus"],fn:function(){var e=(0,oR.getThisDevice)(this.spark,this.locus);return(0,p.default)(e,"mediaConnections[0].mediaId")}},remoteMember:{deps:["memberships","locus"],fn:function(){if((0,oR.isCall)(this.locus))return this.memberships.find(function(e){return!e.isSelf})}},direction:{deps:["locus"],fn:function(){return this.locus?(0,oR.direction)(this.locus):"out"}},from:{deps:["memberships"],fn:function(){if(this.isCall)return this.memberships.find(function(e){return e.isInitiator})}},to:{deps:["memberships"],fn:function(){if(this.isCall)return this.memberships.find(function(e){return!e.isInitiator})}},state:{deps:["locus"],fn:function(){if(this.config.enableExperimentalGroupCallingSupport)return(0,oR.getState)(this.locus)}},status:{deps:["locus"],fn:function(){return(0,oR.getStatus)(this.spark,this.locus,this.previousAttributes().locus)}},host:{deps:["locus"],fn:function(){if(this.config.enableExperimentalGroupCallingSupport)return this.locus.host}},roomId:{deps:["locus"],fn:function(){if(this.config.enableExperimentalGroupCallingSupport&&this.locus.conversationUrl)return Dk.base64.encode("ciscospark://us/ROOM/"+this.locus.conversationUrl.split("/").pop())}},remoteMediaStream:{deps:["media.remoteMediaStream"],fn:function(){return this.media.remoteMediaStream}},localScreenShare:{deps:["media.localScreenShare"],fn:function(){return this.media.localScreenShare}},receivingAudio:{deps:["media.receivingAudio"],fn:function(){return this.media.receivingAudio}},receivingVideo:{deps:["media.receivingVideo"],fn:function(){return this.media.receivingVideo}},sendingAudio:{deps:["media.sendingAudio"],fn:function(){return this.media.sendingAudio}},sendingVideo:{deps:["media.sendingVideo"],fn:function(){return this.media.sendingVideo}},isCall:{deps:["locus"],fn:function(){return(0,oR.isCall)(this.locus)}},supportsDtmf:{deps:["locus"],fn:function(){return(0,p.default)(this,"locus.self.enableDTMF")}}},acknowledge:function(){var t=this;return this.logger.info("call: acknowledging"),this.spark.internal.locus.alert(this.locus).then(function(e){return t.setLocus(e)}).then((0,Dk.tap)(function(){return t.logger.info("call: acknowledged")}))},answer:function(e){var t=this;return this.logger.info("call: answering"),this.locus?this.joinedOnThisDevice&&this.media.pc.remoteDescription&&this.media.pc.remoteDescription.sdp?(this.logger.info("call: already joined on this device"),f.default.resolve()):this.createOrJoinLocus(this.locus,e).then((0,Dk.tap)(function(){return t.logger.info("call: answered")})):(this.logger.info("call: no locus provided, answer() is a noop"),f.default.resolve())},changeReceivingMedia:function(i,o){var a=this;return new f.default(function(e){var t=sj(a.media.offerSdp),r=(0,h.default)(t.media,{type:i});r&&r.direction.includes("recv")?(a.logger.info('changeReceivingMedia: expecting to renegotiate, waiting for call to emit "change:receiving'+C[i]+'"'),a.once("change:receiving"+C[i],function(){return e()})):(a.logger.info('changeReceivingMedia: expecting to renegotiate, waiting for media to emit "answeraccepted"'),a.media.once("answeraccepted",function(){return e()}));var n=(0,y.default)(a.media["sending"+C[i]],o);console.warn("starting to setMedia "+i+" to "+n),a.media.setMedia(i,n)})},changeSendingMedia:function(t,e){var r=this;if(this.logger.info('changeSendingMedia: changing sending "'+t+'" to "'+e+'"'),["audio","video"].includes(t)){var n=this.media.senderTracks.filter(function(e){return e.kind===t}),i=(0,y.default)(e,this.media["receiving"+C[t]]);return 0<n.length?this.media.setMedia(t,i).then(function(){return r.updateMuteToggles(t,e)}):new f.default(function(e){r.once("mediaNegotiationCompleted",function(){return e()}),r.media.setMedia(t,i)})}return f.default.reject(new Error('kind must be one of "audio" or "video"'))},cleanup:function(){var t=this;return new f.default(function(e){ss(function(){t.media.stop(),t.stopListening(t.spark.internal.mercury),t.off(),e()})})},createOrJoinLocus:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(r.localMediaStream)this.localMediaStream=r.localMediaStream;else{r.constraints||(r.constraints={audio:!0,video:{facingMode:{ideal:this.spark.phone.defaultFacingMode}}});var n=(0,p.default)(r,"constraints.video.facingMode.ideal",(0,p.default)(r,"constraints.video.facingMode.exact"));"user"!==n&&"environment"!==n||(this.facingMode=n);var i=!r.constraints.audio&&!r.constraints.video;r.offerOptions=(0,v.default)(r.offerOptions,{offerToReceiveAudio:i||!!r.constraints.audio,offerToReceiveVideo:i||!!r.constraints.video}),r.constraints.fake&&(this.media.constraints.fake=!0),this.media.setMedia("audio",(0,y.default)(r.constraints.audio,r.offerOptions.offerToReceiveAudio),r.constraints.audio),"screen"===(0,p.default)(r,"constraints.video.mediaSource")||"application"===(0,p.default)(r,"constraints.video.mediaSource")?this.media.setMedia("screen","sendonly"):this.media.setMedia("video",(0,y.default)(r.constraints.video,r.offerOptions.offerToReceiveVideo),r.constraints.video)}return e.correlationId||(r.correlationId=g.default.v4(),this.correlationId=r.correlationId),this.correlationId||(this.correlationId=e.correlationId),this.media.bandwidthLimit={audioBandwidthLimit:this.config.audioBandwidthLimit,videoBandwidthLimit:this.config.videoBandwidthLimit},this.media.createOffer().then((0,Dk.tap)(function(){return t.logger.info("created offer")})).then(function(){return t.spark.internal.locus.createOrJoin(e,(0,c.default)({localSdp:t.media.offerSdp,correlationId:t.correlationId},r))}).then((0,Dk.tap)(function(){return t.logger.info("sent offer to locus")})).then((0,Dk.tap)(function(){return t.logger.info("setting locus")})).then(function(e){return t.setLocus(e)}).then((0,Dk.tap)(function(){return t.logger.info("successfully set locus")})).then(function(){var e=JSON.parse(t.mediaConnection.remoteSdp).sdp;return t.logger.info("accepting answer"),t.logger.info("peer state",t.media.pc&&t.media.pc.signalingState),t.media.ended?(t.logger.info("call: already ended, not accepting answer"),f.default.resolve()):t.media.acceptAnswer(e).then(function(){return t.logger.info("answer accepted")}).catch(function(e){return t.logger.error("failed to accept answer",e),f.default.reject(e)})})},decline:function(){return this.reject()},dial:function(e,t){var r=this;this.locusJoinInFlight=!0,this.logger.info("call: dialing");var n=e;if(Dk.base64.validate(e)){var i=Dk.base64.decode(e).split("/"),o=i[3],a=i[4];if("PEOPLE"===o&&(n=a),"ROOM"===o){if(!(0,p.default)(this,"config.enableExperimentalGroupCallingSupport"))throw new Error("Group calling is not enabled. Please enable config.phone.enableExperimentalGroupCallingSupport");n={url:this.spark.internal.device.services.conversationServiceUrl+"/conversations/"+a+"/locus"}}}return this.spark.internal.mercury.connect().then(function(){return r.createOrJoinLocus(n,t)}).then((0,Dk.tap)(function(){return r.logger.info("call: dialed")})).catch(function(e){r.trigger("error",e)}).then(function(){r.locusJoinInFlight=!1}),this},getRawStatsStream:function(){return new w.default(this.media.pc)},getStatsStream:function(){return this.getRawStatsStream().pipe(new _.default)},hangup:function(){var e=this;return"in"!==this.direction||this.joinedOnThisDevice?(this.logger.info("call: hanging up"),this.media.stop(),this.locusJoinInFlight?(this.logger.info("call: locus join in flight, waiting for rest call to complete before hanging up"),this.when("change:locusJoinInFlight").then(function(){return e.hangup()})):this.locus?this.leave():this.cleanup().then(function(){return e.logger.info("call: hang up complete, call never created")})):this.reject()},initialize:function(){for(var o=this,e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(0,s.default)(FO.SparkPlugin.prototype.initialize,this,t),this.on("change:activeParticipantsCount",function(){return o.onChangeActiveParticipantsCount.apply(o,arguments)}),this.on("change:isActive",function(){return o.onChangeIsActive.apply(o,arguments)}),this.on("change:localMediaStream",function(){return o.onChangeLocalMediaStream.apply(o,arguments)}),this.on("change:media.localMediaStream",function(){o.localMediaStream=o.media.localMediaStream}),this.on("change:remoteMember",function(){return o.onChangeRemoteMember.apply(o,arguments)}),["localMediaStream","remoteAudioMuted","remoteMediaStream","remoteVideoMuted","localScreenShare"].forEach(function(e){o.on("change:"+e,function(){return o.trigger(e+":change")})}),this.on("replaced",function(){return o.cleanup()}),this.listenTo(this.memberships,"add",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.trigger.apply(o,["memberships:add"].concat(t))}),this.listenTo(this.memberships,"change",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.trigger.apply(o,["membership:change"].concat(t))}),this.listenTo(this.memberships,"change:audioMuted",function(){return o.onMembershipsAudioMuted.apply(o,arguments)}),this.listenTo(this.memberships,"change:state",function(){return o.onMembershipsChangeState.apply(o,arguments)}),this.listenTo(this.memberships,"change:videoMuted",function(){return o.onMembershipsVideoMuted.apply(o,arguments)}),this.listenTo(this.memberships,"remove",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.trigger.apply(o,["memberships:remove"].concat(t))}),this.listenTo(this.spark.internal.mercury,"event:locus",function(e){return o.onLocusEvent(e)}),this.listenTo(this.spark.internal.mercury,"event:locus.difference",function(e){return o.onLocusEvent(e)}),this.listenTo(this.media,"error",function(e){return o.trigger("error",e)}),this.listenTo(this.media,"internalTrackUpdate",function(){o.trigger("remoteMediaStream:change")}),this.listenTo(this.media,"negotiationneeded",function(){return o.onMediaNegotiationNeeded.apply(o,arguments)}),this.locus?this.internalCallId=(0,oR.makeInternalCallId)(this.locus):this.once("change:locus",function(){o.internalCallId=(0,oR.makeInternalCallId)(o.locus)}),this.memberships.listenToAndRun(this,"change:locus",function(){o.locus&&o.locus.participants&&(o.memberships.set((0,oR.participantsToCallMemberships)(o.spark,o.locus)),o.me=o.memberships.find(function(e){return e.isSelf}))}),this.config.enableExperimentalGroupCallingSupport?(this.on("inactive",function(){return o.hangup()}),this.on("inactive",function(){return o.cleanup()}),this.on("change:state",function(){ss(function(){return o.trigger(o.state)})}),this.on=(0,d.default)(this.on,function(e,t){for(var r=arguments.length,n=Array(2<r?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(T.includes(t))throw new Error('The "'+t+'" event is no longer valid with "enableExperimentalGroupCallingSupport===true"');return(0,s.default)(e,o,[t].concat(n))})):(this.on("disconnected",function(){return o.hangup()}),this.on("disconnected",function(){return o.cleanup()}),this.on("change:status",function(){ss(function(){return o.trigger(o.status)})}))},leave:function(){var t=this;this.logger.info("leave: attempting to leave locus");var e=(0,p.default)(this,this.config.enableExperimentalGroupCallingSupport?"me.state":"status");return"disconnected"===e?(this.logger.info("already hung up, not calling locus again"),f.default.resolve()):"declined"===e?(this.logger.info("call was declined, not leaving again"),f.default.resolve()):"connected"!==e?(this.logger.info("call is neither connected, disconnected, or declined, declining instead of leaving"),this.decline()):(this.logger.info("leave: leaving locus"),this.spark.internal.locus.leave(this.locus).catch(function(e){return t.logger.error("leave: locus leave error: ",e.stack||e.toString()),f.default.reject(e)}).then((0,Dk.tap)(function(){return t.logger.info("leave "+t.locus.id+": finished leaving via locus")})).then((0,Dk.tap)(function(){return t.logger.info("leave "+t.locus.id+": setting locus")})).then(function(e){return t.setLocus(e)}).then((0,Dk.tap)(function(){return t.logger.info("leave "+t.locus.id+": finished setting locus")})).then((0,Dk.tap)(function(){return t.logger.info("call: hung up")})))},onLocusEvent:function(e){var t=this,r=(0,p.default)(e,"data.locus.self.devices"),n=r&&(0,h.default)(r,function(e){return e.url===t.spark.internal.device.url});if(((this.locus&&(0,oR.makeInternalCallId)(e.data.locus))===this.internalCallId||n&&this.correlationId===n.correlationId)&&(this.logger.info("locus event: "+e.data.eventType),this.setLocus(e.data.locus)),e.data.locus.replaces){var i=!0,o=!1,a=void 0;try{for(var u,s=(0,l.default)(e.data.locus.replaces);!(i=(u=s.next()).done);i=!0){var c=u.value;if(c.locusUrl+"_"+c.lastActive===this.internalCallId)return this.setLocus(e.data.locus),void this.logger.info("locus replacement event: "+e.data.eventType,this.locusUrl,"->",e.data.locus.url)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}}},onMembershipsAudioMuted:function(){this.logger.info("onMembershipsAudioMuted"),this.remoteMember&&(this.remoteAudioMuted=this.remoteMember.audioMuted)},onMembershipsVideoMuted:function(){this.logger.info("onMembershipsVideoMuted"),this.remoteMember&&(this.remoteVideoMuted=this.remoteMember.videoMuted)},onChangeRemoteMember:function(){this.remoteMember?(this.remoteAudioMuted=this.remoteMember.audioMuted,this.remoteVideoMuted=this.remoteMember.videoMuted):(this.remoteAudioMuted=void 0,this.remoteVideoMuted=void 0)},onMembershipsChangeState:function(e){this.activeParticipantsCount=this.memberships.filter(function(e){return"connected"===e.state}).length,this.trigger("membership:"+e.state,e)},onMediaNegotiationNeeded:function(){var u=this;this.logger.info("onMediaNegotiationNeeded"),this.media.createOffer().then(function(){var e=sj(u.media.offerSdp),t=P("audio",e),r=!t.includes("send"),n=P("video",e),i=!n.includes("send"),o=P("screen",e);u.logger.info("onMediaNegotiationNeeded: audioOfferDir="+t+" videoOfferDir="+n+" screenOfferDir="+o),u.logger.info("onMediaNegotiationNeeded: audioMuted="+r+" videoMuted="+i);var a={sdp:u.media.offerSdp,mediaId:u.mediaId,audioMuted:r,videoMuted:i};return u.updateMedia(a)}).then(function(){return u.pollForExpectedLocusAndSdp()}).then(function(){var e=JSON.parse(u.mediaConnection.remoteSdp).sdp;return u.media.acceptAnswer(e)}).then(function(){return u.emit("mediaNegotiationCompleted")}).catch(function(e){return u.emit("error",e)})},onChangeLocalMediaStream:function(){var r=this;this.localMediaStream&&this.localMediaStream!==this.media.localMediaStream&&(["audio","video"].forEach(function(t){var e=r.localMediaStream.getTracks().find(function(e){return e.kind===t});e?r.media.setMedia(t,(0,y.default)(e.enabled,r["receiving"+C[t]]),e):r.media.setMedia(t,(0,y.default)(!1,r["receiving"+C[t]]))}),this.localMediaStream=this.media.localMediaStream)},onChangeIsActive:function(){this.isActive||this.joinedOnThisDevice&&(this.logger.info("call: hanging up due to locus going inactive"),this.hangup())},onChangeActiveParticipantsCount:function(){if(this.joinedOnThisDevice&&1===this.activeParticipantsCount&&(!this.isCall||this.config.hangupIfLastActive.call)&&(this.isCall||this.config.hangupIfLastActive.meeting)){var e=this.previousAttributes().locus;e&&1<(0,oR.activeParticipants)(e).length&&(this.logger.info("call: hanging up due to last participant in call"),this.hangup())}},pollForExpectedLocusAndSdp:function(){var g=this;return new f.default(function(c,l){var e=sj(g.media.offerSdp),f=P("audio",e),d=P("video",e),p=P("screen",e),h=g,v=0;!function e(){v+=1;try{if(g.logger.info("iteration "+v+": checking if current locus sdp has the expected audio and video directions"),t=JSON.parse(g.mediaConnection.remoteSdp).sdp,r=sj(t),n=P("audio",r),i=P("video",r),o=P("screen",r),a=O(f),u=O(d),s=O(p),h.logger.info("audio: "+f+", "+n+", "+a),h.logger.info("video: "+d+", "+i+", "+u),h.logger.info("screen: "+p+", "+o+", "+s),n===a&&i===u&&o===s){g.logger.info("iteration "+v+": the current locus sdp has the expected audio and video directions");try{return g.logger.info("iteration "+v+": checking if current locus has the expected audio and video directions"),g.validateLocusMediaState(g.locus),g.logger.info("iteration "+v+": the current locus has the expected audio and video directions; not syncing"),void c()}catch(e){g.logger.info("iteration "+v+": the current locus does not have the expected audio and video directions; syncing")}}else g.logger.info("iteration "+v+": the current locus sdp does not have the expected audio and video directions; syncing");if(4<v)return void l(new Error("After "+v+" attempts polling locus"));setTimeout(function(){return g.spark.internal.locus.sync(g.locus).then(function(e){return g.setLocus(e)}).then(e).catch(l)},1e3*Math.pow(2,v))}catch(e){l(e)}var t,r,n,i,o,a,u,s}()})},releaseFloor:function(){var t=this;return this.logger.info("call: releasing floor grant"),f.default.resolve().then((0,oR.waitForMediaShare)(this)).then(function(e){return t.spark.internal.locus.releaseFloorGrant(t.locus,e)})},reject:function(){var t=this;return"out"===this.direction?f.default.resolve():(this.logger.info("call: rejecting"),this.spark.internal.locus.decline(this.locus).then(function(e){return t.setLocus(e)}).then((0,Dk.tap)(function(){return t.cleanup()})).then((0,Dk.tap)(function(){return t.logger.info("call: rejected")})))},requestFloor:function(){var t=this;return this.logger.info("call: requesting floor grant"),f.default.resolve().then((0,oR.waitForMediaShare)(this)).then(function(e){return t.spark.internal.locus.requestFloorGrant(t.locus,e)})},setLocus:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.locus;if(!n)return this.locus=e,f.default.resolve();switch(this.spark.internal.locus.compare(n,e)){case iR.USE_INCOMING:this.locus=this.spark.internal.locus.merge(this.locus,e),this.device&&(this.correlationId=this.device.correlationId);break;case iR.FETCH:return r?(this.logger.info("call: fetching locus according to sequencing algorithm"),this.spark.internal.locus.get(n).then(function(e){return t.setLocus(e,!0)})):(this.logger.info("call: syncing locus according to sequencing algorithm"),this.spark.internal.locus.sync(n).then(function(e){return t.setLocus(e,!0)}))}return f.default.resolve()},sendDtmf:function(e){return this.supportsDtmf?this.spark.internal.locus.sendDtmf(this.locus,e):f.default.reject(new Error("this call does not support dtmf"))},sendFeedback:function(e){return this.spark.internal.metrics.submit("meetup_call_user_rating",e)},startApplicationShare:function(){var t=this;return this.logger.info("call: sharing application"),new f.default(function(e){t.media.once("answeraccepted",e),t.media.setMedia("screen","sendonly",{mediaSource:"application"})}).then(function(){return t.requestFloor()})},startScreenShare:function(){var t=this;return this.logger.info("call: sharing screen"),new f.default(function(e){t.media.once("answeraccepted",e),t.media.setMedia("screen","sendonly",{mediaSource:"screen"})}).then(function(){return t.requestFloor()})},startReceivingAudio:function(){return this.changeReceivingMedia("audio",!0)},startReceivingVideo:function(){return this.changeReceivingMedia("video",!0)},startSendingAudio:function(){return this.changeSendingMedia("audio",!0)},startSendingVideo:function(){return this.changeSendingMedia("video",!0)},stopScreenShare:function(){var t=this;return this.logger.info("call: stopping screen/application share"),this.releaseFloor().then(function(){return new f.default(function(e){t.media.once("answeraccepted",e),t.media.setMedia("screen","inactive")})})},stopReceivingAudio:function(){return this.changeReceivingMedia("audio",!1)},stopReceivingVideo:function(){return this.changeReceivingMedia("video",!1)},stopSendingAudio:function(){return this.changeSendingMedia("audio",!1)},stopSendingVideo:function(){return this.changeSendingMedia("video",!1)},toggleFacingMode:function(){var e=this;if(!this.sendingVideo)throw new Error("Cannot toggle facingMode if we're not sending video");if("user"!==this.facingMode&&"environment"!==this.facingMode)throw new Error("Cannot determine current facing mode; specify a new localMediaStream to change cameras");var t={facingMode:{ideal:"user"===this.facingMode?"environment":"user"}};return this.media.setMedia("video",(0,y.default)(this.sendingAudio,this.sendingVideo),t).then(function(){e.facingMode=t.facingMode.ideal})},toggleReceivingAudio:function(){return this.receivingAudio?this.stopReceivingAudio():this.startReceivingAudio()},toggleReceivingVideo:function(){return this.receivingVideo?this.stopReceivingVideo():this.startReceivingVideo()},toggleSendingAudio:function(){return this.sendingAudio?this.stopSendingAudio():this.startSendingAudio()},toggleSendingVideo:function(){return this.sendingVideo?this.stopSendingVideo():this.startSendingVideo()},updateMedia:function(e){var t=this;if(this.logger.info("updateMedia"),e.sdp&&!e.sdp.includes("b="))throw new Error("outbound sdp should always have a 'b=' line");return this.spark.internal.locus.updateMedia(this.locus,e).then(function(e){return t.setLocus(e)})},updateVideoMuteSdp:function(e,t){var r=E(!t,this.receivingVideo),n=E(t,this.receivingVideo);return e.replace(new RegExp("a=mid:video[^a]+a="+n,"gi"),"a=mid:video\na="+r)},updateMuteToggles:function(e,t){this.logger.info("updating mute toggles: "+e+"="+t);var r={mediaId:this.mediaId,audioMuted:!this.sendingAudio,videoMuted:!this.sendingVideo};return"audio"===e?r.audioMuted=!t:"video"===e&&(r.videoMuted=!t,r.sdp=this.updateVideoMuteSdp(this.media.offerSdp,!t)),this.updateMedia(r)},validateLocusMediaState:function(e){var t=e.self.status.audioStatus.toLowerCase(),r=this.media.audioDirection;if(t!==r)throw this.logger.warn("locus: expected audio "+t+" (locus) to equal "+r+" (local media)"),new Error("locus.self.status.audioStatus indicates the received DTO is out of date");var n=e.self.status.videoStatus.toLowerCase(),i=this.media.videoDirection;if(n!==i)throw this.logger.warn("locus: expected video "+n+" (locus) to equal "+i+" (local media)"),new Error("locus.self.status.videoStatus indicates the received DTO is out of date");return e},waitForExpectedLocus:function(){var r=this;return new f.default(function(t){var e=function e(){try{r.validateLocusMediaState(r.locus),r.off("change:locus",e),t()}catch(e){r.logger.warn("locus: current locus not in expected state; waiting for next locus")}};r.on("change:locus",e),e()})},version:"1.43.2"},"acknowledge",[Dk.oneFlight],(0,u.default)(a,"acknowledge"),a),k(a,"answer",[Dk.oneFlight,r],(0,u.default)(a,"answer"),a),k(a,"createOrJoinLocus",[Dk.oneFlight],(0,u.default)(a,"createOrJoinLocus"),a),k(a,"decline",[n],(0,u.default)(a,"decline"),a),k(a,"dial",[Dk.oneFlight],(0,u.default)(a,"dial"),a),k(a,"leave",[Dk.oneFlight,i],(0,u.default)(a,"leave"),a),k(a,"onMediaNegotiationNeeded",[o],(0,u.default)(a,"onMediaNegotiationNeeded"),a),k(a,"pollForExpectedLocusAndSdp",[Dk.retry],(0,u.default)(a,"pollForExpectedLocusAndSdp"),a),k(a,"reject",[Dk.oneFlight],(0,u.default)(a,"reject"),a),k(a,"updateMuteToggles",[Dk.oneFlight],(0,u.default)(a,"updateMuteToggles"),a),a));M.make=function(e,t){return new M(e,t)},t.default=M});e(QA);var eI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var u=n(AT),i=n(Mf),o=n(YP),r=n(QA);function n(e){return e&&e.__esModule?e:{default:e}}var a=o.default.extend({model:r.default,mainIndex:"internalCallId",indexes:["correlationId"],initialize:function(){for(var t=this,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];(0,i.default)(o.default.prototype.initialize,this,r),this.on("add",function(e){t.listenTo(e,"change:state",function(){e.config.enableExperimentalGroupCallingSupport?"inactive"===e.state&&t.remove(e):"disconnected"===e.status&&t.remove(e)})})},has:function(e){if(this.get(e.url+"_"+e.fullState.lastActive))return!0;if(e.replaces){var t=!0,r=!1,n=void 0;try{for(var i,o=(0,u.default)(e.replaces);!(t=(i=o.next()).done);t=!0){var a=i.value;if(this.get(a.locusUrl+"_"+a.lastActive))return!0}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}return!1}});t.default=a});e(eI);var tI=t(function($){!function(){var e,t="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";if(y="object"==typeof ws&&"object"==typeof ws.versions&&ws.versions.node&&!1){var r=ws.versions.node.toString().replace("v","");t="Nodejs/"+r+" (NodeOS) AppleWebKit/"+r+" (KHTML, like Gecko) Nodejs/"+r+" Nodejs/"+r}e=void 0!==K?K:window,"undefined"==typeof window&&("undefined"==typeof window&&void 0!==K&&(K.navigator={userAgent:t,getUserMedia:function(){}},e.window=K),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(e.screen={width:0,height:0}));var u=window.navigator;void 0!==u?(void 0!==u.webkitGetUserMedia&&(u.getUserMedia=u.webkitGetUserMedia),void 0!==u.mozGetUserMedia&&(u.getUserMedia=u.mozGetUserMedia)):u={getUserMedia:function(){},userAgent:t};var n=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(u.userAgent||""),s=!(-1===u.userAgent.indexOf("Edge")||!u.msSaveOrOpenBlob&&!u.msSaveBlob),c=!!window.opera||0<=u.userAgent.indexOf(" OPR/"),l=void 0!==window.InstallTrigger,f=/^((?!chrome|android).)*safari/i.test(u.userAgent),d=!!window.chrome&&!c,p="undefined"!=typeof document&&!!document.documentMode&&!s;function i(e,t){var r=0,n=!1,i=window.setInterval(function(){e()&&(window.clearInterval(i),t(n)),50<r++&&(window.clearInterval(i),t(n=!0))},10)}var o={Android:function(){return u.userAgent.match(/Android/i)},BlackBerry:function(){return u.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return u.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return u.userAgent.match(/Opera Mini/i)},Windows:function(){return u.userAgent.match(/IEMobile/i)},any:function(){return o.Android()||o.BlackBerry()||o.iOS()||o.Opera()||o.Windows()},getOsName:function(){var e="Unknown OS";return o.Android()&&(e="Android"),o.BlackBerry()&&(e="BlackBerry"),o.iOS()&&(e="iOS"),o.Opera()&&(e="Opera Mini"),o.Windows()&&(e="Windows"),e}};var a="Unknown OS",h="Unknown OS Version";var v,g,m=function(){for(var e,t=u.appVersion,r=u.userAgent,n="-",i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],o=0;e=i[o];o++)if(e.r.test(r)){n=e.s;break}var a="-";switch(/Windows/.test(n)&&(/Windows (.*)/.test(n)&&(a=/Windows (.*)/.exec(n)[1]),n="Windows"),n){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(r)&&(a=/Mac OS X (10[\.\_\d]+)/.exec(r)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(r)&&(a=/Android ([\.\_\d]+)/.exec(r)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(r)&&(a=(a=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))[1]+"."+a[2]+"."+(0|a[3]))}return{osName:n,osVersion:a}}();m&&m.osName&&"-"!=m.osName?(a=m.osName,h=m.osVersion):o.any()&&"Android"==(a=o.getOsName())&&(h=!!(g=(v=(v||u.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/))&&g[1]);var y="object"==typeof ws&&"object"==typeof ws.versions&&ws.versions.node;"Unknown OS"===a&&y&&(a="Nodejs",h=ws.versions.node.toString().replace("v",""));var b=!1,_=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!b&&e in document.createElement("canvas")&&(b=!0),!_&&e in document.createElement("video")&&(_=!0))});var w=[],S=[],k=[],E=[];u.mediaDevices&&u.mediaDevices.enumerateDevices&&(u.enumerateDevices=function(e){var t=u.mediaDevices.enumerateDevices();t&&t.then?u.mediaDevices.enumerateDevices().then(e).catch(function(){e([])}):e([])});var T=!1;"undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack?T=!0:u.mediaDevices&&u.mediaDevices.enumerateDevices&&(T=!0);var P=!1,O=!1,C=!1,M=!1,j=!1;var x=window.DetectRTC||{};x.browser=function(){u.appVersion;var e,t,r,n=u.userAgent,i=u.appName,o=""+parseFloat(u.appVersion),a=parseInt(u.appVersion,10);if(c){i="Opera";try{a=(o=u.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(e){o="0.0.0.0",a=0}}else p?(o=0<(t=n.indexOf("rv:"))?n.substring(t+3):(t=n.indexOf("MSIE"),n.substring(t+5)),i="IE"):d?(t=n.indexOf("Chrome"),i="Chrome",o=n.substring(t+7)):f?(t=n.indexOf("Safari"),i="Safari",o=n.substring(t+7),-1!==(t=n.indexOf("Version"))&&(o=n.substring(t+8)),-1!==u.userAgent.indexOf("Version/")&&(o=u.userAgent.split("Version/")[1].split(" ")[0])):l?(t=n.indexOf("Firefox"),i="Firefox",o=n.substring(t+8)):(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(i=n.substring(e,t),o=n.substring(t+1),i.toLowerCase()===i.toUpperCase()&&(i=u.appName));return s&&(i="Edge",o=u.userAgent.split("Edge/")[1]),-1!==(r=o.search(/[; \)]/))&&(o=o.substring(0,r)),a=parseInt(""+o,10),isNaN(a)&&(o=""+parseFloat(u.appVersion),a=parseInt(u.appVersion,10)),{fullVersion:o,version:a,name:i,isPrivateBrowsing:!1}}(),function(t){var r;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){r=!1},function(e){r=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var n;try{(n=window.indexedDB.open("test")).onerror=function(){return!0}}catch(e){r=!0}void 0===r&&i(function(){return"done"===n.readyState},function(e){e||(r=!n.result)})}else if(function(e){var t=e.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var r=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(r&&10<=parseInt(r[1],10))}(window.navigator.userAgent)){r=!1;try{window.indexedDB||(r=!0)}catch(e){r=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(e){r=!0}void 0===r&&(r=!1,window.localStorage.removeItem("test"))}}catch(e){r=!1}i(function(){return void 0!==r},function(e){t(r)})}(function(e){x.browser.isPrivateBrowsing=!!e}),x.browser["is"+x.browser.name]=!0,x.osName=a,x.osVersion=h;var R=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(e){R||e in window&&(R=!0)}),x.isWebRTCSupported=R,x.isORTCSupported="undefined"!=typeof RTCIceGatherer;var A=!1;(x.browser.isChrome&&35<=x.browser.version?A=!0:x.browser.isFirefox&&34<=x.browser.version?A=!0:x.browser.isEdge&&17<=x.browser.version?A=!0:"Android"===x.osName&&x.browser.isChrome&&(A=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||""))||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(x.browser.isChrome||x.browser.isEdge||x.browser.isOpera)?A=!1:x.browser.isFirefox&&(A=!1));x.isScreenCapturingSupported=A;var I={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(e){I.isSupported||e in window&&(I.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(I.isCreateMediaStreamSourceSupported=!0))}),x.isAudioContextSupported=I.isSupported,x.isCreateMediaStreamSourceSupported=I.isCreateMediaStreamSourceSupported;var D=!1;x.browser.isChrome&&31<x.browser.version&&(D=!0),x.isRtpDataChannelsSupported=D;var L=!1;x.browser.isFirefox&&28<x.browser.version?L=!0:x.browser.isChrome&&25<x.browser.version?L=!0:x.browser.isOpera&&11<=x.browser.version&&(L=!0),x.isSctpDataChannelsSupported=L,x.isMobileDevice=n;var F=!1;u.getUserMedia?F=!0:u.mediaDevices&&u.mediaDevices.getUserMedia&&(F=!0),x.browser.isChrome&&46<=x.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(F="Requires HTTPs"),"Nodejs"===x.osName&&(F=!1),x.isGetUserMediaSupported=F;var N,U,z,q="";screen.width&&(q+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));x.displayResolution=q,x.displayAspectRatio=(N=screen.width,U=screen.height,z=function e(t,r){return 0==r?t:e(r,t%r)}(N,U),N/z/(U/z)).toFixed(2),x.isCanvasSupportsStreamCapturing=b,x.isVideoSupportsStreamCapturing=_,"Chrome"==x.browser.name&&53<=x.browser.version&&(x.isCanvasSupportsStreamCapturing||(x.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),x.isVideoSupportsStreamCapturing||(x.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),x.DetectLocalIPAddress=function(t,e){x.isWebRTCSupported&&function(n,e){if("undefined"!=typeof document&&"function"==typeof document.getElementById){var i={},t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!t){var r=document.getElementById("iframe");if(!r)return;var o=r.contentWindow;t=o.RTCPeerConnection||o.mozRTCPeerConnection||o.webkitRTCPeerConnection}if(t){var a=null;"Chrome"===x.browser&&x.browser.version<58&&(a={optional:[{RtpDataChannels:!0}]});var u=new t({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},a);if(e&&(u.addStream?u.addStream(e):u.addTrack&&e.getTracks()[0]&&u.addTrack(e.getTracks()[0],e)),u.onicecandidate=function(e){e.candidate&&s(e.candidate.candidate)},!e)try{u.createDataChannel("sctp",{})}catch(e){}x.isPromisesSupported?u.createOffer().then(function(e){u.setLocalDescription(e).then(c)}):u.createOffer(function(e){u.setLocalDescription(e,c,function(){})},function(){})}}function s(e){var t=/([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(e);if(t){var r=t[1];void 0===i[r]&&n(r),i[r]=!0}}function c(){var e=u.localDescription.sdp.split("\n");e.forEach(function(e){0===e.indexOf("a=candidate:")&&s(e)})}}(function(e){e.match(/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/)?t("Local: "+e):t("Public: "+e)},e)},x.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,x.isWebSocketsBlocked=!x.isWebSocketsSupported,"Nodejs"===x.osName&&(x.isWebSocketsSupported=!0,x.isWebSocketsBlocked=!1),x.checkWebSocketsSupport=function(t){t=t||function(){};try{var e,r=new WebSocket("wss://echo.websocket.org:443/");r.onopen=function(){x.isWebSocketsBlocked=!1,e=(new Date).getTime(),r.send("ping")},r.onmessage=function(){x.WebsocketLatency=(new Date).getTime()-e+"ms",t(),r.close(),r=null},r.onerror=function(){x.isWebSocketsBlocked=!0,t()}}catch(e){x.isWebSocketsBlocked=!0,t()}},x.load=function(e){!function(t){if(T)if(!u.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(u.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!u.enumerateDevices&&u.enumerateDevices&&(u.enumerateDevices=u.enumerateDevices.bind(u)),u.enumerateDevices){w=[],S=[],k=[],j=M=C=O=P=!(E=[]);var n={};u.enumerateDevices(function(e){e.forEach(function(e){var t={};for(var r in e)try{"function"!=typeof e[r]&&(t[r]=e[r])}catch(e){}n[t.deviceId+t.label+t.kind]||("audio"===t.kind&&(t.kind="audioinput"),"video"===t.kind&&(t.kind="videoinput"),t.deviceId||(t.deviceId=t.id),t.id||(t.id=t.deviceId),t.label?("videoinput"!==t.kind||j||(j=!0),"audioinput"!==t.kind||M||(M=!0)):(t.isCustomLabel=!0,"videoinput"===t.kind?t.label="Camera "+(E.length+1):"audioinput"===t.kind?t.label="Microphone "+(S.length+1):"audiooutput"===t.kind?t.label="Speaker "+(k.length+1):t.label="Please invoke getUserMedia once.",void 0!==x&&x.browser.isChrome&&46<=x.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(t.label="HTTPs is required to get label of this "+t.kind+" device.")),"audioinput"===t.kind&&(P=!0,-1===S.indexOf(t)&&S.push(t)),"audiooutput"===t.kind&&(O=!0,-1===k.indexOf(t)&&k.push(t)),"videoinput"===t.kind&&(C=!0,-1===E.indexOf(t)&&E.push(t)),w.push(t),n[t.deviceId+t.label+t.kind]=t)}),void 0!==x&&(x.MediaDevices=w,x.hasMicrophone=P,x.hasSpeakers=O,x.hasWebcam=C,x.isWebsiteHasWebcamPermissions=j,x.isWebsiteHasMicrophonePermissions=M,x.audioInputDevices=S,x.audioOutputDevices=k,x.videoInputDevices=E),t&&t()})}else t&&t();else t&&t()}(e=e||function(){})},x.MediaDevices=void 0!==w?w:[],x.hasMicrophone=P,x.hasSpeakers=O,x.hasWebcam=C,x.isWebsiteHasWebcamPermissions=j,x.isWebsiteHasMicrophonePermissions=M,x.audioInputDevices=S,x.audioOutputDevices=k,x.videoInputDevices=E;var B=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(B=!0),x.isSetSinkIdSupported=B;var W=!1;x.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(W=!0):x.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(W=!0),x.isRTPSenderReplaceTracksSupported=W;var G=!1;x.browser.isFirefox&&38<x.browser.version&&(G=!0),x.isRemoteStreamProcessingSupported=G;var V=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(V=!0),x.isApplyConstraintsSupported=V;var H=!1;x.browser.isFirefox&&43<=x.browser.version&&(H=!0),x.isMultiMonitorScreenCapturingSupported=H,x.isPromisesSupported=!!("Promise"in window),x.version="1.3.6",void 0===x&&(window.DetectRTC={});var J=window.MediaStream;void 0===J&&"undefined"!=typeof webkitMediaStream&&(J=webkitMediaStream),x.MediaStream=void 0!==J&&"function"==typeof J&&Object.keys(J.prototype),"undefined"!=typeof MediaStreamTrack?x.MediaStreamTrack=Object.keys(MediaStreamTrack.prototype):x.MediaStreamTrack=!1;var Y=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;x.RTCPeerConnection=void 0!==Y&&Object.keys(Y.prototype),window.DetectRTC=x,$.exports=x}()}),rI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.events=void 0;var i=l(Mf),r=l(IT),n=l(_f),o=l(oO),a=l(X_),u=l(Ij),s=l(QA),c=l(eI);function l(e){return e&&e.__esModule?e:{default:e}}var f=t.events={CALL_CREATED:"call:created",CALL_INCOMING:"call:incoming"},d=FO.SparkPlugin.extend({collections:{emittedCalls:c.default},session:{connected:{default:!1,type:"boolean"},defaultFacingMode:{default:"user",type:"string",values:["user","environment"]},registered:{default:!1,type:"boolean"}},namespace:"phone",isCallingSupported:function(){return new n.default(function(e){e(tI.isWebRTCSupported)})},register:function(){var t=this;return this.spark.internal.device.refresh().then(function(){return t.connected?n.default.resolve():n.default.all([t.emittedCalls.reset(),t.spark.internal.mercury.when("event:mercury.buffer_state").then(function(e){return"UNKNOWN"===(0,r.default)(e,1)[0].data.bufferState.locus?t.listActiveCalls():n.default.resolve()}),t.spark.internal.mercury.connect()])})},deregister:function(){var e=this;return this.spark.internal.mercury.disconnect().then(function(){return e.spark.internal.device.unregister()})},createLocalMediaStream:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.constraints||e;return(0,a.default)(t,{audio:!0,video:!0}),u.default.getUserMedia(t)},listActiveCalls:function(){var n=this;return this.spark.internal.locus.list().then(function(e){var r=n.emittedCalls.map(function(e){return e});return e&&e.forEach(function(e){if(!n.emittedCalls.has(e)){var t=s.default.make({locus:e,parent:n.spark});r.push(t),n.emittedCalls.add(t),n._triggerCallEvents(t,e)}}),r})},initialize:function(){for(var t=this,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];(0,i.default)(FO.SparkPlugin.prototype.initialize,this,r),this.listenTo(this.spark.internal.mercury,"event:locus",function(e){return t.onLocusEvent(e)}),this.listenTo(this.spark.internal.mercury,"change:connected",function(){t.connected=t.spark.internal.mercury.connected,t.registered=!!t.spark.internal.device.url&&t.connected}),this.listenTo(this.spark.internal.device,"change:url",function(){t.registered=!!t.spark.internal.device.url&&t.connected})},onLocusEvent:function(e){var t=e.data.locus;if(!this.emittedCalls.has(t)&&"inactive"!==t.fullState.state.toLowerCase()){var r=s.default.make({locus:t},{parent:this.spark});this.emittedCalls.add(r),this._triggerCallEvents(r,e.data.locus)}},dial:function(e,t){var r=s.default.make({},{parent:this.spark});return r.dial(e,t),this.emittedCalls.add(r),r},_triggerCallEvents:function(e,t){this.trigger(f.CALL_CREATED,e),(0,oR.shouldRing)(t)&&((0,oR.isCall)(t)||!(0,oR.isCall)(t)&&(0,o.default)(this,"config.enableExperimentalGroupCallingSupport"))&&this.trigger(f.CALL_INCOMING,e)},version:"1.43.2"});t.default=d});e(rI);rI.events;var nI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};var i=FO.Batcher.extend({namespace:"People",handleHttpSuccess:function(e){var t=this;return n.default.all(e.body.items.map(function(e){return t.handleItemSuccess(e.id,e)}))},handleItemFailure:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.reject(t)})},handleItemSuccess:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.resolve(t)})},fingerprintRequest:function(e){var t=this.spark.people.inferPersonIdFromUuid(e);return n.default.resolve(t)},fingerprintResponse:function(e){return n.default.resolve(e)},prepareRequest:function(e){return n.default.resolve(e.join())},submitHttpRequest:function(e){return this.spark.request({service:"hydra",resource:"people/?id="+e+"&showAllTypes="+this.config.showAllTypes})}});t.default=i});e(nI);var iI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(rc),i=a(_f),o=a(nI);function a(e){return e&&e.__esModule?e:{default:e}}var u,s,c,l,f,d,p=FO.SparkPlugin.extend((r={namespace:"People",children:{batcher:o.default},get:function(e){if(!e)return i.default.reject(new Error("A person with an id is required"));if("me"===e)return this._getMe();var t=e.personId||e.id||e;return this.batcher.request(t)},list:function(e){var t=this;if(Array.isArray(e)){var r=e;return i.default.all(r.map(function(e){return t.batcher.request(e)}))}return this.request({service:"hydra",resource:"people",qs:e}).then(function(e){return new FO.Page(e,t.spark)})},inferPersonIdFromUuid:function(e){try{if(Dk.base64.decode(e).includes("ciscospark://"))return e}catch(e){}return Dk.base64.encode("ciscospark://us/PEOPLE/"+e)},_getMe:function(){return this.spark.request({service:"hydra",resource:"people/me"}).then(function(e){return e.body})},version:"1.43.2"},u=r,s="_getMe",c=[Dk.oneFlight],l=(0,n.default)(r,"_getMe"),f=r,d={},Object.keys(l).forEach(function(e){d[e]=l[e]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=c.slice().reverse().reduce(function(e,t){return t(u,s,e)||e},d),f&&void 0!==d.initializer&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),void 0===d.initializer&&(Object.defineProperty(u,s,d),d=null),r));t.default=p});e(iI);var oI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={people:{batcherWait:100,batcherMaxCalls:10,batcherMaxWait:1500,showAllTypes:!1}}});e(oI),e(t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(iI).default}});var r=i(iI),n=i(oI);function i(e){return e&&e.__esModule?e:{default:e}}(0,FO.registerPlugin)("people",r.default,{config:n.default})}));var aI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={phone:{audioBandwidthLimit:64e3,videoBandwidthLimit:1e6,enableExperimentalGroupCallingSupport:!1,hangupIfLastActive:{call:!0,meeting:!1}}}});e(aI);var uI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StatsStream=t.StatsFilter=t.remoteParticipant=t.boolToStatus=t.Call=t.phoneEvents=void 0,Object.defineProperty(t,"phoneEvents",{enumerable:!0,get:function(){return rI.events}}),Object.defineProperty(t,"Call",{enumerable:!0,get:function(){return i(QA).default}}),Object.defineProperty(t,"boolToStatus",{enumerable:!0,get:function(){return i(aR).default}}),Object.defineProperty(t,"remoteParticipant",{enumerable:!0,get:function(){return oR.remoteParticipant}}),Object.defineProperty(t,"StatsFilter",{enumerable:!0,get:function(){return i(XA).default}}),Object.defineProperty(t,"StatsStream",{enumerable:!0,get:function(){return i(ZA).default}});var r=i(rI),n=i(aI);function i(e){return e&&e.__esModule?e:{default:e}}t.default=r.default,(0,FO.registerPlugin)("phone",r.default,{config:n.default})});e(uI);uI.StatsStream,uI.StatsFilter,uI.remoteParticipant,uI.boolToStatus,uI.Call,uI.phoneEvents;var sI=XT(!0);Xs(Xs.S,"Object",{entries:function(e){return sI(e)}});var cI=Bs.Object.entries,lI=t(function(e){e.exports={default:cI,__esModule:!0}});e(lI);var fI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.levels=void 0;var s=i(uT),l=i(oc),f=i(lI),d=i(AT),p=i(IT),r=i(Fk),h=i(eE),v=i(ud),g=i(op),n=(i(xE),i(Rv));function i(e){return e&&e.__esModule?e:{default:e}}var o={silent:0,error:1,warn:2,log:3,info:4,debug:5,trace:6},a=t.levels=(0,r.default)(o).filter(function(e){return"silent"!==e}),c={error:["log"],warn:["error","log"],info:["log"],debug:["info","log"],trace:["debug","info","log"]},m=/[Aa]uthorization/;function y(e){if((0,g.default)(e))return e.map(y);if(!(0,v.default)(e))return(0,h.default)(e)&&Dk.patterns.email.test(e)?"-- REDACTED --":e;var t=!0,r=!1,n=void 0;try{for(var i,o=(0,d.default)((0,f.default)(e));!(t=(i=o.next()).done);t=!0){var a=i.value,u=(0,p.default)(a,2),s=u[0],c=u[1];m.test(s)?(0,l.default)(e,s):e[s]=y(c)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return e}var b=FO.SparkPlugin.extend({namespace:"Logger",derived:{level:{cache:!1,fn:function(){return this.getCurrentLevel()}}},session:{buffer:{type:"array",default:function(){return[]}}},filter:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map(function(e){return e instanceof Error?e:y(e=(0,n.default)(e))})},shouldPrint:function(e){return o[e]<=o[this.getCurrentLevel()]},shouldBuffer:function(e){return o[e]<=o.info},getCurrentLevel:function(){if(this.config.level)return this.config.level;if(a.includes(ws.env.CISCOSPARK_LOG_LEVEL))return ws.env.CISCOSPARK_LOG_LEVEL;var e=this.spark.internal.device&&this.spark.internal.device.features.developer.get("log-level");return e&&a.includes(e)?e:"error"},version:"1.43.2"});a.forEach(function(a){var e=c[a],u=a;if(e)for(e=e.slice();!console[u];)u=e.pop();b.prototype[a]=function(){try{var e=this.shouldPrint(a),t=this.shouldBuffer(a);if(!t&&!e)return;var r=this.filter.apply(this,arguments),n=r.map(function(e){return e instanceof FO.SparkHttpError?e.toString():e});if(e){var i,o=Dk.inBrowser?n:r;(i=console)[u].apply(i,(0,s.default)(o))}t&&(n.unshift(Date.now()),this.buffer.push(n),this.buffer.length>this.config.historyLength&&this.buffer.shift())}catch(e){console.warn("failed to execute Logger#"+a,e)}}}),t.default=b});e(fI);fI.levels;var dI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={logger:{level:ws.env.LOGGER_LEVEL,historyLength:1e3}}});e(dI);var pI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.levels=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(fI).default}}),Object.defineProperty(t,"levels",{enumerable:!0,get:function(){return fI.levels}});var r=i(fI),n=i(dI);function i(e){return e&&e.__esModule?e:{default:e}}(0,FO.registerPlugin)("logger",r.default,{config:n.default,replace:!0})});e(pI);pI.levels;var hI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=r(aT),i=r(oc),o=r(op);function r(e){return e&&e.__esModule?e:{default:e}}var a=FO.SparkPlugin.extend({create:function(e){var t="body";e.file&&(this.logger.warn("Supplying a single `file` property is deprecated; please supply a `files` array"),e.files=[e.file],(0,i.default)(e,"file")),(0,o.default)(e.files)&&e.files.reduce(function(e,t){return e||"string"!=typeof t},!1)&&(t="formData");var r=(0,n.default)({method:"POST",service:"hydra",resource:"messages"},t,e);return this.request(r).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"messages/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"messages",qs:e}).then(function(e){return new FO.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"messages/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},version:"1.43.2"});t.default=a});e(hI),e(t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=hI)&&r.__esModule?r:{default:r};(0,FO.registerPlugin)("messages",n.default),t.default=n.default}));var vI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=FO.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"memberships",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"memberships/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"memberships",qs:e}).then(function(e){return new FO.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"memberships/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id||e;return this.request({method:"PUT",service:"hydra",resource:"memberships/"+t,body:e}).then(function(e){return e.body})},version:"1.43.2"});t.default=r});e(vI),e(t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=vI)&&r.__esModule?r:{default:r};(0,FO.registerPlugin)("memberships",n.default),t.default=n.default}));var gI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=FO.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"rooms",body:e}).then(function(e){return e.body})},get:function(e,t){var r=e.id||e;return this.request({service:"hydra",resource:"rooms/"+r,qs:t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"rooms/",qs:e}).then(function(e){return new FO.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"rooms/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"rooms/"+t,body:e}).then(function(e){return e.body})},version:"1.43.2"});t.default=r});e(gI),e(t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=gI)&&r.__esModule?r:{default:r};(0,FO.registerPlugin)("rooms",n.default),t.default=n.default}));var mI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=FO.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"teams",body:e}).then(function(e){return e.body})},get:function(e,t){var r=e.id||e;return this.request({service:"hydra",resource:"teams/"+r,qs:t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"teams/",qs:e}).then(function(e){return new FO.Page(e,t.spark)})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"teams/"+t,body:e}).then(function(e){return e.body})},version:"1.43.2"});t.default=r});e(mI),e(t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=mI)&&r.__esModule?r:{default:r};(0,FO.registerPlugin)("teams",n.default),t.default=n.default}));var yI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=FO.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"team/memberships",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"team/memberships/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"team/memberships",qs:e}).then(function(e){return new FO.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"team/memberships/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id||e;return this.request({method:"PUT",service:"hydra",resource:"team/memberships/"+t,body:e}).then(function(e){return e.body})},version:"1.43.2"});t.default=r});e(yI),e(t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=yI)&&r.__esModule?r:{default:r};(0,FO.registerPlugin)("teamMemberships",n.default),t.default=n.default}));var bI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=FO.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"webhooks",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"webhooks/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"webhooks/",qs:e}).then(function(e){return new FO.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"webhooks/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"webhooks/"+t,body:e}).then(function(e){return e.body})},version:"1.43.2"});t.default=r});e(bI),e(t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=bI)&&r.__esModule?r:{default:r};(0,FO.registerPlugin)("webhooks",n.default),t.default=n.default}));var _I=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(oc),o=n(_f),a=n(Rf),u=n(ey),s=n(iy),r=n(Ty);function n(e){return e&&e.__esModule?e:{default:e}}var c=new r.default,l=new r.default,f=function(){function e(n){(0,u.default)(this,e),this.Bound=function(){function r(e,t){(0,u.default)(this,r),c.set(this,e),l.set(this,t.logger)}return(0,s.default)(r,[{key:"_getRawData",value:function(){var e=localStorage.getItem(n);return e?JSON.parse(e):{}}},{key:"_load",value:function(){return this._getRawData()[c.get(this)]||{}}},{key:"_save",value:function(e){var t=this._getRawData();t[c.get(this)]=e,localStorage.setItem(n,(0,a.default)(t))}},{key:"clear",value:function(){return l.get(this).info("local-storage-store-adapter: clearing localStorage"),o.default.resolve(localStorage.removeItem(n))}},{key:"del",value:function(r){var n=this;return new o.default(function(e){l.get(n).info("local-storage-store-adapter: deleting `"+r+"`");var t=n._load();(0,i.default)(t,r),n._save(t),e()})}},{key:"get",value:function(n){var i=this;return new o.default(function(e,t){l.get(i).info("local-storage-store-adapter: reading `"+n+"`");var r=i._load()[n];return void 0!==r?e(r):t(new FO.NotFoundError("No value found for "+n))})}},{key:"put",value:function(r,n){var i=this;return new o.default(function(e){l.get(i).info("local-storage-store-adapter: writing `"+r+"`");var t=i._load();t[r]=n,i._save(t),e()})}}]),r}()}return(0,s.default)(e,[{key:"bind",value:function(e,t){return t=t||{},e?t.logger?(t.logger.info("local-storage-store-adapter: returning binding"),o.default.resolve(new this.Bound(e,t))):o.default.reject(new Error("`options.logger` is required")):o.default.reject(new Error("`namespace` is required"))}}]),e}();t.default=f});e(_I);var wI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_I)&&r.__esModule?r:{default:r};t.default={boundedAdapter:new n.default("ciscospark"),unboundedAdapter:FO.MemoryStoreAdapter}});e(wI);var SI=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=wI)&&r.__esModule?r:{default:r};t.default={hydraServiceUrl:ws.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1",credentials:{clientType:"confidential"},device:{ephemeral:!0},storage:n.default}});e(SI);var kI=FO.default.extend({ciscospark:!0,version:"1.43.2"});kI.version="1.43.2",kI.init=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.config=iO({},SI,e.config),new kI(e)};var EI=kI;K._babelPolyfill;var TI=EI;return window.ciscospark=TI}();
