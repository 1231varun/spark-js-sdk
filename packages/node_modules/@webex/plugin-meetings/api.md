# Web Meetings SDK Definitions & Eventing

## Objects
- [meetings](#meetings)
- [meeting](#meeting)
- [members](#members)
- [member](#member)
- [roap](#roap)

---
## meetings

### functions

### _create(destination, type)_ - function  
- destination - String : sipURL, spaceId, phonenumber, meeting link, or locus object}
- type - String : the optional specified type, such as locusId
- returns - Promise : that resolves to a meeting
- events - meeting:added : with payload {meeting, type} where meeting is the new meeting, and type is INCOMING or CREATED

### _getMeetingByType(type, value)_ - function
- returns - Meeting : the meeting found by parameters 
- type - String : the key to look in each meeting object for
- value - Any : the value to look in each meeting object for

### _getAllMeetings(options)_ - function
- options - Object : properties supported -> active
- returns - Object : Object of Meeting objects

### _getActiveMeetings_ - function
- see #getAllMeetings : with {active: true passed}

### _getReachability_ - function
- returns - Reachability : an object to gather reachability data from (servers and clusters based on devices)

### _setReachability_ - function
- initializes the Reachability object on the Meetings instance

### _startReachability_ - function
- sets and start the reachability gathering process

### _getPersonalMeetingRoom_ - function
- for this spark instance, get the personal meeting room
- returns - PersonalMeetingRoom : information about your lobby

### _syncMeetings_ - function
- get all the active meetings, and syncs the information from server request
- creates meetings if they don't exist locally but do remote

### events

### _meeting:added_ 
- when an incoming call comes in
- when you create an outgoing call
- when you join a space meeting
- when a meeting is created for any reason, always triggered

#### properties

- personalMeetingRoom

---
<a name="Meeting"></a>

## Meeting
**Kind**: global class  
**Export**:   

* [Meeting](#Meeting)
    * [.module.exports](#Meeting.module.exports)
        * [new module.exports(attrs, options)](#new_Meeting.module.exports_new)
    * [.getMediaStreams](#Meeting.getMediaStreams) ⇒ <code>Promise</code>
    * [.setUpLocusInfoListeners()](#Meeting.setUpLocusInfoListeners) ⇒ <code>undefined</code>
    * [.setUpLocusInfoSelfListener()](#Meeting.setUpLocusInfoSelfListener) ⇒ <code>undefined</code>
    * [.invite(invitee, alertIfActive)](#Meeting.invite) ⇒ <code>Promise</code>
    * [.admit(memberIds)](#Meeting.admit) ⇒ <code>Promise</code>
    * [.getMembers()](#Meeting.getMembers) ⇒ <code>Members</code>
    * [.getStats(options)](#Meeting.getStats) ⇒ <code>WebRTCStats</code>
    * [.createStats(options)](#Meeting.createStats) ⇒ <code>WebRTCStats</code>
    * [.isAudioMuted()](#Meeting.isAudioMuted) ⇒ <code>Boolean</code>
    * [.isAudioSelf()](#Meeting.isAudioSelf) ⇒ <code>Boolean</code>
    * [.isVideoMuted()](#Meeting.isVideoMuted) ⇒ <code>Boolean</code>
    * [.isVideoSelf()](#Meeting.isVideoSelf) ⇒ <code>Boolean</code>
    * [.parseMeetingInfo(meetingInfo)](#Meeting.parseMeetingInfo) ⇒ <code>undefined</code>
    * [.parseLocus(locus)](#Meeting.parseLocus) ⇒ <code>undefined</code>
    * [.setSipUri(sipUri)](#Meeting.setSipUri) ⇒ <code>undefined</code>
    * [.setRoapSeq(seq)](#Meeting.setRoapSeq) ⇒ <code>undefined</code>
    * [.setLocus(locus)](#Meeting.setLocus) ⇒ <code>undefined</code>
    * [.unsetRemoteStream()](#Meeting.unsetRemoteStream) ⇒ <code>undefined</code>
    * [.unsetLocalStream()](#Meeting.unsetLocalStream) ⇒ <code>undefined</code>
    * [.unsetLocalShare()](#Meeting.unsetLocalShare) ⇒ <code>undefined</code>
    * [.setPeerConnections(mediaPeerConnection, sharePeerConnection)](#Meeting.setPeerConnections) ⇒ <code>undefined</code>
    * [.closePeerConnections()](#Meeting.closePeerConnections) ⇒ <code>Promise</code>
    * [.unsetPeerConnections(mediaPeerConnection, sharePeerConnection)](#Meeting.unsetPeerConnections) ⇒ <code>undefined</code>
    * [.setCorrelationId(id)](#Meeting.setCorrelationId) ⇒ <code>undefined</code>
    * [.muteAudio()](#Meeting.muteAudio) ⇒ <code>Promise</code>
    * [.unmuteAudio()](#Meeting.unmuteAudio) ⇒ <code>Promise</code>
    * [.muteVideo()](#Meeting.muteVideo) ⇒ <code>Promise</code>
    * [.unmuteVideo()](#Meeting.unmuteVideo) ⇒ <code>Promise</code>
    * [.joinWithMedia(joinOptions, mediaOptions, streamsOptions)](#Meeting.joinWithMedia) ⇒ <code>Promise</code>
    * [.addMedia(options)](#Meeting.addMedia) ⇒ <code>Promise</code>
    * [.acknowledge(type, ringing)](#Meeting.acknowledge) ⇒ <code>Promise</code>
    * [.decline(reason)](#Meeting.decline) ⇒ <code>undefined</code>
    * [.leave(options)](#Meeting.leave) ⇒ <code>Promise</code>
    * [.share()](#Meeting.share) ⇒ <code>Promise</code>
    * [.stopShare()](#Meeting.stopShare) ⇒ <code>Promise</code>
    * ["media:ready" (pc)](#Meeting.media_ready) ⇒ <code>undefined</code>
    * ["media:stopped"](#Meeting.media_stopped) ⇒ <code>undefined</code>
    * ["media:ready" (pc)](#Meeting.media_ready) ⇒ <code>undefined</code>
    * ["media:ready" (localStream)](#Meeting.media_ready) ⇒ <code>undefined</code>
    * ["media:ready" (localShare)](#Meeting.media_ready) ⇒ <code>undefined</code>
    * ["media:stopped"](#Meeting.media_stopped) ⇒ <code>undefined</code>
    * ["media:stopped"](#Meeting.media_stopped) ⇒ <code>undefined</code>
    * ["meeting:reconnectionFailure"](#Meeting.meeting_reconnectionFailure) ⇒ <code>Promise</code>

<a name="Meeting.module.exports"></a>

### Meeting.module.exports
**Kind**: static class of [<code>Meeting</code>](#Meeting)  
<a name="new_Meeting.module.exports_new"></a>

#### new module.exports(attrs, options)
Create an instance of Meeting


| Param | Type |
| --- | --- |
| attrs | <code>Object</code> | 
| options | <code>Object</code> | 

<a name="Meeting.getMediaStreams"></a>

### Meeting.getMediaStreams ⇒ <code>Promise</code>
get local media streams based on options passed

**Kind**: static property of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - see #Media.getUserMedia  

| Param | Type | Description |
| --- | --- | --- |
| mediaDirection | <code>Object</code> | A configurable options object for joining a meeting |

<a name="Meeting.setUpLocusInfoListeners"></a>

### Meeting.setUpLocusInfoListeners() ⇒ <code>undefined</code>
**Kind**: static method of [<code>Meeting</code>](#Meeting)  
<a name="Meeting.setUpLocusInfoSelfListener"></a>

### Meeting.setUpLocusInfoSelfListener() ⇒ <code>undefined</code>
**Kind**: static method of [<code>Meeting</code>](#Meeting)  
<a name="Meeting.invite"></a>

### Meeting.invite(invitee, alertIfActive) ⇒ <code>Promise</code>
invite a guest to the call that isn't normally part of this call

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - see #members.addMember  

| Param | Type | Default | Description |
| --- | --- | --- | --- |
| invitee | <code>Object</code> |  | with {emailAddress or email} |
| alertIfActive | <code>Boolean</code> | <code>true</code> | optional |

<a name="Meeting.admit"></a>

### Meeting.admit(memberIds) ⇒ <code>Promise</code>
admit the guest(s) to the call once they are waiting

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - see #members.admitMembers  

| Param | Type |
| --- | --- |
| memberIds | <code>Array</code> | 

<a name="Meeting.getMembers"></a>

### Meeting.getMembers() ⇒ <code>Members</code>
Reference to the Members object

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
<a name="Meeting.getStats"></a>

### Meeting.getStats(options) ⇒ <code>WebRTCStats</code>
Reference to the stats builder object

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type | Description |
| --- | --- | --- |
| options | <code>Object</code> | optional {media: {}, screen: {}} see stats/index |
| options.media | <code>Object</code> |  |
| options.screen | <code>Object</code> |  |

<a name="Meeting.createStats"></a>

### Meeting.createStats(options) ⇒ <code>WebRTCStats</code>
Overwrite the stats builder object

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type | Description |
| --- | --- | --- |
| options | <code>Object</code> | optional {media: {}, screen: {}} see stats/index |
| options.media | <code>Object</code> |  |
| options.screen | <code>Object</code> |  |

<a name="Meeting.isAudioMuted"></a>

### Meeting.isAudioMuted() ⇒ <code>Boolean</code>
Convenience function to tell whether a meeting is muted

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Boolean</code> - if meeting audio muted or not  
<a name="Meeting.isAudioSelf"></a>

### Meeting.isAudioSelf() ⇒ <code>Boolean</code>
Convenience function to tell if the end user last changed the audio state

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Boolean</code> - if audio was manipulated by the end user  
<a name="Meeting.isVideoMuted"></a>

### Meeting.isVideoMuted() ⇒ <code>Boolean</code>
Convenience function to tell whether video is muted

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Boolean</code> - if meeting video is muted or not  
<a name="Meeting.isVideoSelf"></a>

### Meeting.isVideoSelf() ⇒ <code>Boolean</code>
Convenience function to tell whether the end user changed the video state

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Boolean</code> - if meeting video is muted or not  
<a name="Meeting.parseMeetingInfo"></a>

### Meeting.parseMeetingInfo(meetingInfo) ⇒ <code>undefined</code>
Sets the meeting info on the class instance

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type |
| --- | --- |
| meetingInfo | <code>Object</code> | 
| meetingInfo.convoId | <code>String</code> | 
| meetingInfo.locusUrl | <code>String</code> | 
| meetingInfo.sipUri | <code>String</code> | 
| meetingInfo.owner | <code>Object</code> | 

<a name="Meeting.parseLocus"></a>

### Meeting.parseLocus(locus) ⇒ <code>undefined</code>
Sets the first locus info on the class instance

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type |
| --- | --- |
| locus | <code>Object</code> | 

<a name="Meeting.setSipUri"></a>

### Meeting.setSipUri(sipUri) ⇒ <code>undefined</code>
Sets the sip uri on the class instance
uses meeting info as precedence

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type |
| --- | --- |
| sipUri | <code>String</code> | 

<a name="Meeting.setRoapSeq"></a>

### Meeting.setRoapSeq(seq) ⇒ <code>undefined</code>
Set the roap seq on the class instance

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type |
| --- | --- |
| seq | <code>Number</code> | 

<a name="Meeting.setLocus"></a>

### Meeting.setLocus(locus) ⇒ <code>undefined</code>
// TODO: change name to genertic parser
Set the locus info the class instance

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type |
| --- | --- |
| locus | <code>Object</code> | 
| locus.mediaConnections | <code>Array</code> | 
| locus.locusUrl | <code>String</code> | 
| locus.locusId | <code>String</code> | 
| locus.mediaId | <code>String</code> | 
| locus.host | <code>Object</code> | 

<a name="Meeting.unsetRemoteStream"></a>

### Meeting.unsetRemoteStream() ⇒ <code>undefined</code>
Removes the remote stream on the class instance and triggers an event
to developers

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
<a name="Meeting.unsetLocalStream"></a>

### Meeting.unsetLocalStream() ⇒ <code>undefined</code>
Removes the local stream from the class and emits an event to the developer

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
<a name="Meeting.unsetLocalShare"></a>

### Meeting.unsetLocalShare() ⇒ <code>undefined</code>
Removes the local share from the class and emits an event to the developer

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
<a name="Meeting.setPeerConnections"></a>

### Meeting.setPeerConnections(mediaPeerConnection, sharePeerConnection) ⇒ <code>undefined</code>
Sets the peer connections on the class
sets up reconnection logic

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type |
| --- | --- |
| mediaPeerConnection | <code>PeerConnection</code> | 
| sharePeerConnection | <code>PeerConnection</code> | 

<a name="Meeting.closePeerConnections"></a>

### Meeting.closePeerConnections() ⇒ <code>Promise</code>
Close the peer connections and remove them from the class. Triggers an event
when each is closed.

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - returns a resolved promise with an array of closed peer connections  
<a name="Meeting.unsetPeerConnections"></a>

### Meeting.unsetPeerConnections(mediaPeerConnection, sharePeerConnection) ⇒ <code>undefined</code>
Unsets the peer connections on the class
warning DO NOT CALL WITHOUT CLOSING PEER CONNECTIONS FIRST

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type |
| --- | --- |
| mediaPeerConnection | <code>PeerConnection</code> | 
| sharePeerConnection | <code>PeerConnection</code> | 

<a name="Meeting.setCorrelationId"></a>

### Meeting.setCorrelationId(id) ⇒ <code>undefined</code>
Convenience method to set the correlation id for the Meeting

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type | Description |
| --- | --- | --- |
| id | <code>String</code> | correlation id to set on the class |

<a name="Meeting.muteAudio"></a>

### Meeting.muteAudio() ⇒ <code>Promise</code>
Mute the audio for a meeting

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - resolves the data from muting audio {mute, self} or rejects if there is no audio set  
<a name="Meeting.unmuteAudio"></a>

### Meeting.unmuteAudio() ⇒ <code>Promise</code>
Unmute meeting audio

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - resolves data from muting audio {mute, self} or rejects if there is no audio set  
<a name="Meeting.muteVideo"></a>

### Meeting.muteVideo() ⇒ <code>Promise</code>
Mute the video for a meeting

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - resolves data from muting video {mute, self} or rejects if there is no video set  
<a name="Meeting.unmuteVideo"></a>

### Meeting.unmuteVideo() ⇒ <code>Promise</code>
Unmute meeting video

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - resolves data from muting video {mute, self} or rejects if there is no video set  
<a name="Meeting.joinWithMedia"></a>

### Meeting.joinWithMedia(joinOptions, mediaOptions, streamsOptions) ⇒ <code>Promise</code>
**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - -- {join: see join(), media: see addMedia(), local: see getMediaStreams()}  

| Param | Type | Description |
| --- | --- | --- |
| joinOptions | <code>Object</code> | see #join() |
| mediaOptions | <code>Object</code> | see #addMedia() |
| streamsOptions | <code>object</code> | see #getMediaStreams() |

<a name="Meeting.addMedia"></a>

### Meeting.addMedia(options) ⇒ <code>Promise</code>
Specify joining via audio (option: pstn), video, screenshare

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type | Description |
| --- | --- | --- |
| options | <code>Object</code> | A configurable options object for joining a meeting |
| options.resourceId | <code>Object</code> | pass the deviceId |
| options.localStream | <code>MediaStream</code> |  |
| options.localShare | <code>MediaStream</code> |  |

<a name="Meeting.acknowledge"></a>

### Meeting.acknowledge(type, ringing) ⇒ <code>Promise</code>
acknowledge the meeting, outgoing or incoming

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - resolve {message, ringing, response}  

| Param | Type | Default | Description |
| --- | --- | --- | --- |
| type | <code>String</code> |  |  |
| ringing | <code>Boolean</code> | <code>true</code> | optional |

<a name="Meeting.decline"></a>

### Meeting.decline(reason) ⇒ <code>undefined</code>
Decline this meeting

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type |
| --- | --- |
| reason | <code>String</code> | 

<a name="Meeting.leave"></a>

### Meeting.leave(options) ⇒ <code>Promise</code>
Leave the current meeting

**Kind**: static method of [<code>Meeting</code>](#Meeting)  

| Param | Type | Description |
| --- | --- | --- |
| options | <code>Object</code> | An object of options |
| options.keepLocalMedia | <code>Boolean</code> | Whether to tear down the local media connections or not. |

<a name="Meeting.share"></a>

### Meeting.share() ⇒ <code>Promise</code>
start sharing content

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - see #meetingRequest.changeMeetingFloor  
<a name="Meeting.stopShare"></a>

### Meeting.stopShare() ⇒ <code>Promise</code>
stops the screen share

**Kind**: static method of [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - see #meetingRequest.changeMeetingFloor  
<a name="Meeting.media_ready"></a>

### "media:ready" (pc) ⇒ <code>undefined</code>
Sets the remote stream on the class instance and emits and
event do developers

**Kind**: event emitted by [<code>Meeting</code>](#Meeting)  

| Param | Type | Description |
| --- | --- | --- |
| pc | <code>Object</code> | The remote stream peer connection |

<a name="Meeting.media_stopped"></a>

### "media:stopped" ⇒ <code>undefined</code>
Removes the remote stream on the class instance and triggers an event
to developers

**Kind**: event emitted by [<code>Meeting</code>](#Meeting)  
<a name="Meeting.media_ready"></a>

### "media:ready" (pc) ⇒ <code>undefined</code>
Sets the sceen stream on the class instance and triggers and event to developers

**Kind**: event emitted by [<code>Meeting</code>](#Meeting)  

| Param | Type | Description |
| --- | --- | --- |
| pc | <code>Object</code> | a peer connection instance for the screen |

<a name="Meeting.media_ready"></a>

### "media:ready" (localStream) ⇒ <code>undefined</code>
Sets the local media stream on the class and emits an event to the developer

**Kind**: event emitted by [<code>Meeting</code>](#Meeting)  

| Param | Type | Description |
| --- | --- | --- |
| localStream | <code>Stream</code> | the local media stream |

<a name="Meeting.media_ready"></a>

### "media:ready" (localShare) ⇒ <code>undefined</code>
Sets the local media stream on the class and emits an event to the developer

**Kind**: event emitted by [<code>Meeting</code>](#Meeting)  

| Param | Type | Description |
| --- | --- | --- |
| localShare | <code>Stream</code> | the local media stream |

<a name="Meeting.media_stopped"></a>

### "media:stopped" ⇒ <code>undefined</code>
Closes the local stream from the class and emits an event to the developer

**Kind**: event emitted by [<code>Meeting</code>](#Meeting)  
<a name="Meeting.media_stopped"></a>

### "media:stopped" ⇒ <code>undefined</code>
Closes the local stream from the class and emits an event to the developer

**Kind**: event emitted by [<code>Meeting</code>](#Meeting)  
<a name="Meeting.meeting_reconnectionFailure"></a>

### "meeting:reconnectionFailure" ⇒ <code>Promise</code>
initiates the reconnection of the media in the meeting

**Kind**: event emitted by [<code>Meeting</code>](#Meeting)  
**Returns**: <code>Promise</code> - resolves with {reconnect} or errors with {error}  

## roap

ROAP will be implemented similarly to the web client, but without the obvious flux patterns.

These are the current web client files: 
- roapInterface - Accepts parameters whose values come from the meeting object (what has to be sent); return Promise with request body
- roapAdapter - Sends requests to server, i.e., makes API calls.
- roapHandler - A state manager; "This meeting is in this particular state."
