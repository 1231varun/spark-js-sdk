import {DEFAULT_STATS_HISTORY_MAX} from '../constants';

/**
 * simply adds up the properties from filtered stream data
 */
export default class StatsHistory {
  /**
   * @private
   * @param {Object} options
   */
  constructor() {
    this.history = [];
  }

  getHistory() {
    return this.history;
  }

  clearHistory() {
    delete this.history;
    this.history = [];
  }

  getHistoryAt(index) {
    return this.history[index];
  }

  getLastEntry() {
    return this.history.length > 1 ? this.history[1] : undefined;
  }

  addHistory(data) {
    let removed;
    if (this.history.length >= DEFAULT_STATS_HISTORY_MAX) {
      removed = this.history.pop();
    }
    this.history.unshift(data);
    return removed;
  }
}
