import {pickBy, find} from 'lodash';

import Collection from '../common/collection';
/**
 * @export
 * @class MeetingCollection
 */
export default class MeetingCollection extends Collection {
  /**
   * @constructor
   * @public
   * @memberof MeetingCollection
   */
  constructor() {
    super('meetings');
  }

  set(meeting) {
    if (meeting) {
      super.set(meeting.id, meeting);
    }
  }

  /**
   * get all the meetings with optional filters
   * @param {Object} options An object containg properties to filter by
   * @param {Boolean} options.active Only return active meetings
   * @returns {Meeting} returns an object map of Meeting instances
   * @public
   * @memberof MeetingCollection
   */
  getAll(options = {active: false}) {
    if (options.active) {
      return pickBy(this.meetings, (value) => value.active);
    }
    return this.meetings;
  }


  /**
   * get a specific meeting searching for key
   * @param {String} key
   * @param {Any} value
   * @returns {Meeting} if found, else returns null
   * @public
   * @memberof MeetingCollection
   */
  getByKey(key, value) {
    if (key && value) {
      return find(this.meetings, (meeting) => (meeting[key] === value));
    }
    return null;
  }
}
