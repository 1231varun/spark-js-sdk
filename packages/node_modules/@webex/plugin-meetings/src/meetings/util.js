import {LOCUS_ID, INCOMING, CREATED} from '../constants';

const MeetingsUtil = {};

MeetingsUtil.extractDestination = (destination, type) => {
  let dest = destination;
  if (type === LOCUS_ID) {
    if (!(destination && destination.url)) {
      throw new Error('You cannot create a meeting by locus without a locus.url defined');
    }
    const temp = destination.url.split('/');
    dest = temp[temp.length - 1];
  }
  return dest;
};

MeetingsUtil.setUpMeeting = (meeting, info, destination, type) => {
  meeting.parseMeetingInfo(info);
  if (type === LOCUS_ID) {
    meeting.parseLocus(destination);
  }
  if (!meeting.sipUri) {
    meeting.setSipUri(destination);
  }
};

MeetingsUtil.getMeetingAddedType = (type) => (type === LOCUS_ID ? INCOMING : CREATED);

export default MeetingsUtil;
